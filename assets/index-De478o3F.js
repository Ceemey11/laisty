(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function sw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var od={exports:{}},Da={},ad={exports:{}},Ve={};var og;function iw(){if(og)return Ve;og=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),k=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=k&&L[k]||L["@@iterator"],typeof L=="function"?L:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,H={};function $(L,B,re){this.props=L,this.context=B,this.refs=H,this.updater=re||U}$.prototype.isReactComponent={},$.prototype.setState=function(L,B){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,B,"setState")},$.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function de(){}de.prototype=$.prototype;function ne(L,B,re){this.props=L,this.context=B,this.refs=H,this.updater=re||U}var me=ne.prototype=new de;me.constructor=ne,q(me,$.prototype),me.isPureReactComponent=!0;var oe=Array.isArray,we=Object.prototype.hasOwnProperty,ge={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function x(L,B,re){var ve,_e={},ke=null,be=null;if(B!=null)for(ve in B.ref!==void 0&&(be=B.ref),B.key!==void 0&&(ke=""+B.key),B)we.call(B,ve)&&!R.hasOwnProperty(ve)&&(_e[ve]=B[ve]);var Ue=arguments.length-2;if(Ue===1)_e.children=re;else if(1<Ue){for(var Ge=Array(Ue),wt=0;wt<Ue;wt++)Ge[wt]=arguments[wt+2];_e.children=Ge}if(L&&L.defaultProps)for(ve in Ue=L.defaultProps,Ue)_e[ve]===void 0&&(_e[ve]=Ue[ve]);return{$$typeof:s,type:L,key:ke,ref:be,props:_e,_owner:ge.current}}function A(L,B){return{$$typeof:s,type:L.type,key:B,ref:L.ref,props:L.props,_owner:L._owner}}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function V(L){var B={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(re){return B[re]})}var C=/\/+/g;function I(L,B){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):B.toString(36)}function Pe(L,B,re,ve,_e){var ke=typeof L;(ke==="undefined"||ke==="boolean")&&(L=null);var be=!1;if(L===null)be=!0;else switch(ke){case"string":case"number":be=!0;break;case"object":switch(L.$$typeof){case s:case e:be=!0}}if(be)return be=L,_e=_e(be),L=ve===""?"."+I(be,0):ve,oe(_e)?(re="",L!=null&&(re=L.replace(C,"$&/")+"/"),Pe(_e,B,re,"",function(wt){return wt})):_e!=null&&(P(_e)&&(_e=A(_e,re+(!_e.key||be&&be.key===_e.key?"":(""+_e.key).replace(C,"$&/")+"/")+L)),B.push(_e)),1;if(be=0,ve=ve===""?".":ve+":",oe(L))for(var Ue=0;Ue<L.length;Ue++){ke=L[Ue];var Ge=ve+I(ke,Ue);be+=Pe(ke,B,re,Ge,_e)}else if(Ge=b(L),typeof Ge=="function")for(L=Ge.call(L),Ue=0;!(ke=L.next()).done;)ke=ke.value,Ge=ve+I(ke,Ue++),be+=Pe(ke,B,re,Ge,_e);else if(ke==="object")throw B=String(L),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return be}function Oe(L,B,re){if(L==null)return L;var ve=[],_e=0;return Pe(L,ve,"","",function(ke){return B.call(re,ke,_e++)}),ve}function it(L){if(L._status===-1){var B=L._result;B=B(),B.then(function(re){(L._status===0||L._status===-1)&&(L._status=1,L._result=re)},function(re){(L._status===0||L._status===-1)&&(L._status=2,L._result=re)}),L._status===-1&&(L._status=0,L._result=B)}if(L._status===1)return L._result.default;throw L._result}var Me={current:null},ee={transition:null},W={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:ee,ReactCurrentOwner:ge};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:Oe,forEach:function(L,B,re){Oe(L,function(){B.apply(this,arguments)},re)},count:function(L){var B=0;return Oe(L,function(){B++}),B},toArray:function(L){return Oe(L,function(B){return B})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ve.Component=$,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=ne,Ve.StrictMode=i,Ve.Suspense=g,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Ve.act=Y,Ve.cloneElement=function(L,B,re){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ve=q({},L.props),_e=L.key,ke=L.ref,be=L._owner;if(B!=null){if(B.ref!==void 0&&(ke=B.ref,be=ge.current),B.key!==void 0&&(_e=""+B.key),L.type&&L.type.defaultProps)var Ue=L.type.defaultProps;for(Ge in B)we.call(B,Ge)&&!R.hasOwnProperty(Ge)&&(ve[Ge]=B[Ge]===void 0&&Ue!==void 0?Ue[Ge]:B[Ge])}var Ge=arguments.length-2;if(Ge===1)ve.children=re;else if(1<Ge){Ue=Array(Ge);for(var wt=0;wt<Ge;wt++)Ue[wt]=arguments[wt+2];ve.children=Ue}return{$$typeof:s,type:L.type,key:_e,ref:ke,props:ve,_owner:be}},Ve.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:u,_context:L},L.Consumer=L},Ve.createElement=x,Ve.createFactory=function(L){var B=x.bind(null,L);return B.type=L,B},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:m,render:L}},Ve.isValidElement=P,Ve.lazy=function(L){return{$$typeof:T,_payload:{_status:-1,_result:L},_init:it}},Ve.memo=function(L,B){return{$$typeof:w,type:L,compare:B===void 0?null:B}},Ve.startTransition=function(L){var B=ee.transition;ee.transition={};try{L()}finally{ee.transition=B}},Ve.unstable_act=Y,Ve.useCallback=function(L,B){return Me.current.useCallback(L,B)},Ve.useContext=function(L){return Me.current.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L){return Me.current.useDeferredValue(L)},Ve.useEffect=function(L,B){return Me.current.useEffect(L,B)},Ve.useId=function(){return Me.current.useId()},Ve.useImperativeHandle=function(L,B,re){return Me.current.useImperativeHandle(L,B,re)},Ve.useInsertionEffect=function(L,B){return Me.current.useInsertionEffect(L,B)},Ve.useLayoutEffect=function(L,B){return Me.current.useLayoutEffect(L,B)},Ve.useMemo=function(L,B){return Me.current.useMemo(L,B)},Ve.useReducer=function(L,B,re){return Me.current.useReducer(L,B,re)},Ve.useRef=function(L){return Me.current.useRef(L)},Ve.useState=function(L){return Me.current.useState(L)},Ve.useSyncExternalStore=function(L,B,re){return Me.current.useSyncExternalStore(L,B,re)},Ve.useTransition=function(){return Me.current.useTransition()},Ve.version="18.3.1",Ve}var ag;function Xd(){return ag||(ag=1,ad.exports=iw()),ad.exports}var lg;function ow(){if(lg)return Da;lg=1;var s=Xd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,w){var T,k={},b=null,U=null;w!==void 0&&(b=""+w),g.key!==void 0&&(b=""+g.key),g.ref!==void 0&&(U=g.ref);for(T in g)i.call(g,T)&&!u.hasOwnProperty(T)&&(k[T]=g[T]);if(m&&m.defaultProps)for(T in g=m.defaultProps,g)k[T]===void 0&&(k[T]=g[T]);return{$$typeof:e,type:m,key:b,ref:U,props:k,_owner:o.current}}return Da.Fragment=t,Da.jsx=h,Da.jsxs=h,Da}var ug;function aw(){return ug||(ug=1,od.exports=ow()),od.exports}var v=aw(),he=Xd();const lw=sw(he);var Pu={},ld={exports:{}},mn={},ud={exports:{}},cd={};var cg;function uw(){return cg||(cg=1,(function(s){function e(ee,W){var Y=ee.length;ee.push(W);e:for(;0<Y;){var L=Y-1>>>1,B=ee[L];if(0<o(B,W))ee[L]=W,ee[Y]=B,Y=L;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var W=ee[0],Y=ee.pop();if(Y!==W){ee[0]=Y;e:for(var L=0,B=ee.length,re=B>>>1;L<re;){var ve=2*(L+1)-1,_e=ee[ve],ke=ve+1,be=ee[ke];if(0>o(_e,Y))ke<B&&0>o(be,_e)?(ee[L]=be,ee[ke]=Y,L=ke):(ee[L]=_e,ee[ve]=Y,L=ve);else if(ke<B&&0>o(be,Y))ee[L]=be,ee[ke]=Y,L=ke;else break e}}return W}function o(ee,W){var Y=ee.sortIndex-W.sortIndex;return Y!==0?Y:ee.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],w=[],T=1,k=null,b=3,U=!1,q=!1,H=!1,$=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function me(ee){for(var W=t(w);W!==null;){if(W.callback===null)i(w);else if(W.startTime<=ee)i(w),W.sortIndex=W.expirationTime,e(g,W);else break;W=t(w)}}function oe(ee){if(H=!1,me(ee),!q)if(t(g)!==null)q=!0,it(we);else{var W=t(w);W!==null&&Me(oe,W.startTime-ee)}}function we(ee,W){q=!1,H&&(H=!1,de(x),x=-1),U=!0;var Y=b;try{for(me(W),k=t(g);k!==null&&(!(k.expirationTime>W)||ee&&!V());){var L=k.callback;if(typeof L=="function"){k.callback=null,b=k.priorityLevel;var B=L(k.expirationTime<=W);W=s.unstable_now(),typeof B=="function"?k.callback=B:k===t(g)&&i(g),me(W)}else i(g);k=t(g)}if(k!==null)var re=!0;else{var ve=t(w);ve!==null&&Me(oe,ve.startTime-W),re=!1}return re}finally{k=null,b=Y,U=!1}}var ge=!1,R=null,x=-1,A=5,P=-1;function V(){return!(s.unstable_now()-P<A)}function C(){if(R!==null){var ee=s.unstable_now();P=ee;var W=!0;try{W=R(!0,ee)}finally{W?I():(ge=!1,R=null)}}else ge=!1}var I;if(typeof ne=="function")I=function(){ne(C)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Oe=Pe.port2;Pe.port1.onmessage=C,I=function(){Oe.postMessage(null)}}else I=function(){$(C,0)};function it(ee){R=ee,ge||(ge=!0,I())}function Me(ee,W){x=$(function(){ee(s.unstable_now())},W)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_continueExecution=function(){q||U||(q=!0,it(we))},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(ee){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var Y=b;b=W;try{return ee()}finally{b=Y}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ee,W){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Y=b;b=ee;try{return W()}finally{b=Y}},s.unstable_scheduleCallback=function(ee,W,Y){var L=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?L+Y:L):Y=L,ee){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Y+B,ee={id:T++,callback:W,priorityLevel:ee,startTime:Y,expirationTime:B,sortIndex:-1},Y>L?(ee.sortIndex=Y,e(w,ee),t(g)===null&&ee===t(w)&&(H?(de(x),x=-1):H=!0,Me(oe,Y-L))):(ee.sortIndex=B,e(g,ee),q||U||(q=!0,it(we))),ee},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(ee){var W=b;return function(){var Y=b;b=W;try{return ee.apply(this,arguments)}finally{b=Y}}}})(cd)),cd}var hg;function cw(){return hg||(hg=1,ud.exports=uw()),ud.exports}var dg;function hw(){if(dg)return mn;dg=1;var s=Xd(),e=cw();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},k={};function b(n){return g.call(k,n)?!0:g.call(T,n)?!1:w.test(n)?k[n]=!0:(T[n]=!0,!1)}function U(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,r,a,c){if(r===null||typeof r>"u"||U(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function H(n,r,a,c,d,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];$[r]=new H(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){$[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){$[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){$[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){$[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){$[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var de=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(de,ne);$[r]=new H(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(de,ne);$[r]=new H(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(de,ne);$[r]=new H(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){$[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),$.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){$[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function me(n,r,a,c){var d=$.hasOwnProperty(r)?$[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(q(r,a,d,c)&&(a=null),c||d===null?b(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var oe=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,we=Symbol.for("react.element"),ge=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),V=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),ee=Symbol.iterator;function W(n){return n===null||typeof n!="object"?null:(n=ee&&n[ee]||n["@@iterator"],typeof n=="function"?n:null)}var Y=Object.assign,L;function B(n){if(L===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+n}var re=!1;function ve(n,r){if(!n||re)return"";re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var c=F}Reflect.construct(n,[],r)}else{try{r.call()}catch(F){c=F}n.call(r.prototype)}else{try{throw Error()}catch(F){c=F}n()}}catch(F){if(F&&c&&typeof F.stack=="string"){for(var d=F.stack.split(`
`),p=c.stack.split(`
`),_=d.length-1,S=p.length-1;1<=_&&0<=S&&d[_]!==p[S];)S--;for(;1<=_&&0<=S;_--,S--)if(d[_]!==p[S]){if(_!==1||S!==1)do if(_--,S--,0>S||d[_]!==p[S]){var N=`
`+d[_].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=_&&0<=S);break}}}finally{re=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?B(n):""}function _e(n){switch(n.tag){case 5:return B(n.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return n=ve(n.type,!1),n;case 11:return n=ve(n.type.render,!1),n;case 1:return n=ve(n.type,!0),n;default:return""}}function ke(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case ge:return"Portal";case A:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case Pe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case C:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Oe:return r=n.displayName||null,r!==null?r:ke(n.type)||"Memo";case it:r=n._payload,n=n._init;try{return ke(n(r))}catch{}}return null}function be(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wt(n){var r=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,p.call(this,_)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Fn(n){n._valueTracker||(n._valueTracker=wt(n))}function Xr(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Un(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ir(n,r){var a=r.checked;return Y({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function se(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Ue(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ee(n,r){r=r.checked,r!=null&&me(n,"checked",r,!1)}function De(n,r){Ee(n,r);var a=Ue(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Je(n,r.type,a):r.hasOwnProperty("defaultValue")&&Je(n,r.type,Ue(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Xe(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Je(n,r,a){(r!=="number"||Un(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ue=Array.isArray;function ot(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Ze(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Nt(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(ue(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Ue(a)}}function ft(n,r){var a=Ue(r.value),c=Ue(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function en(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function ut(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?ut(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Sr,$o=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Sr=Sr||document.createElement("div"),Sr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Sr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Jr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fs=["Webkit","ms","Moz","O"];Object.keys(js).forEach(function(n){Fs.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),js[r]=js[n]})});function qo(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||js.hasOwnProperty(n)&&js[n]?(""+r).trim():r+"px"}function Wo(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=qo(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Ho=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ko(n,r){if(r){if(Ho[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Go(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Us=null;function Ai(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ki=null,An=null,or=null;function Ci(n){if(n=va(n)){if(typeof ki!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Hl(r),ki(n.stateNode,n.type,r))}}function ar(n){An?or?or.push(n):or=[n]:An=n}function Qo(){if(An){var n=An,r=or;if(or=An=null,Ci(n),r)for(n=0;n<r.length;n++)Ci(r[n])}}function zs(n,r){return n(r)}function Yo(){}var Ar=!1;function Xo(n,r,a){if(Ar)return n(r,a);Ar=!0;try{return zs(n,r,a)}finally{Ar=!1,(An!==null||or!==null)&&(Yo(),Qo())}}function yt(n,r){var a=n.stateNode;if(a===null)return null;var c=Hl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var Ri=!1;if(m)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{Ri=!1}function Bs(n,r,a,c,d,p,_,S,N){var F=Array.prototype.slice.call(arguments,3);try{r.apply(a,F)}catch(Q){this.onError(Q)}}var $s=!1,Ni=null,Bn=!1,Jo=null,Vc={onError:function(n){$s=!0,Ni=n}};function Pi(n,r,a,c,d,p,_,S,N){$s=!1,Ni=null,Bs.apply(Vc,arguments)}function yl(n,r,a,c,d,p,_,S,N){if(Pi.apply(this,arguments),$s){if($s){var F=Ni;$s=!1,Ni=null}else throw Error(t(198));Bn||(Bn=!0,Jo=F)}}function $n(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function qs(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function qn(n){if($n(n)!==n)throw Error(t(188))}function vl(n){var r=n.alternate;if(!r){if(r=$n(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return qn(d),n;if(p===c)return qn(d),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var _=!1,S=d.child;S;){if(S===a){_=!0,a=d,c=p;break}if(S===c){_=!0,c=d,a=p;break}S=S.sibling}if(!_){for(S=p.child;S;){if(S===a){_=!0,a=p,c=d;break}if(S===c){_=!0,c=p,a=d;break}S=S.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Zo(n){return n=vl(n),n!==null?bi(n):null}function bi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=bi(n);if(r!==null)return r;n=n.sibling}return null}var Di=e.unstable_scheduleCallback,ea=e.unstable_cancelCallback,_l=e.unstable_shouldYield,Lc=e.unstable_requestPaint,et=e.unstable_now,wl=e.unstable_getCurrentPriorityLevel,Ws=e.unstable_ImmediatePriority,Zr=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,ta=e.unstable_LowPriority,El=e.unstable_IdlePriority,Hs=null,yn=null;function Tl(n){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Hs,n,void 0,(n.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Il,na=Math.log,xl=Math.LN2;function Il(n){return n>>>=0,n===0?32:31-(na(n)/xl|0)|0}var Vi=64,Li=4194304;function es(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ks(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,_=a&268435455;if(_!==0){var S=_&~d;S!==0?c=es(S):(p&=_,p!==0&&(c=es(p)))}else _=a&~d,_!==0?c=es(_):p!==0&&(c=es(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-tn(r),d=1<<a,c|=n[a],r&=~d;return c}function Oc(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var _=31-tn(p),S=1<<_,N=d[_];N===-1?((S&a)===0||(S&c)!==0)&&(d[_]=Oc(S,r)):N<=r&&(n.expiredLanes|=S),p&=~S}}function vn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Gs(){var n=Vi;return Vi<<=1,(Vi&4194240)===0&&(Vi=64),n}function ts(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function ns(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-tn(r),n[r]=a}function Ye(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-tn(a),p=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function rs(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-tn(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var je=0;function ss(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Sl,Oi,Al,kl,Cl,ra=!1,lr=[],Ot=null,Wn=null,Hn=null,is=new Map,Cn=new Map,ur=[],Mc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rl(n,r){switch(n){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":is.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cn.delete(r.pointerId)}}function ln(n,r,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=va(r),r!==null&&Oi(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function jc(n,r,a,c,d){switch(r){case"focusin":return Ot=ln(Ot,n,r,a,c,d),!0;case"dragenter":return Wn=ln(Wn,n,r,a,c,d),!0;case"mouseover":return Hn=ln(Hn,n,r,a,c,d),!0;case"pointerover":var p=d.pointerId;return is.set(p,ln(is.get(p)||null,n,r,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Cn.set(p,ln(Cn.get(p)||null,n,r,a,c,d)),!0}return!1}function Nl(n){var r=Zs(n.target);if(r!==null){var a=$n(r);if(a!==null){if(r=a.tag,r===13){if(r=qs(a),r!==null){n.blockedOn=r,Cl(n.priority,function(){Al(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cr(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Mi(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Us=c,a.target.dispatchEvent(c),Us=null}else return r=va(a),r!==null&&Oi(r),n.blockedOn=a,!1;r.shift()}return!0}function Qs(n,r,a){Cr(n)&&a.delete(r)}function Pl(){ra=!1,Ot!==null&&Cr(Ot)&&(Ot=null),Wn!==null&&Cr(Wn)&&(Wn=null),Hn!==null&&Cr(Hn)&&(Hn=null),is.forEach(Qs),Cn.forEach(Qs)}function Kn(n,r){n.blockedOn===r&&(n.blockedOn=null,ra||(ra=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pl)))}function Gn(n){function r(d){return Kn(d,n)}if(0<lr.length){Kn(lr[0],n);for(var a=1;a<lr.length;a++){var c=lr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Ot!==null&&Kn(Ot,n),Wn!==null&&Kn(Wn,n),Hn!==null&&Kn(Hn,n),is.forEach(r),Cn.forEach(r),a=0;a<ur.length;a++)c=ur[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<ur.length&&(a=ur[0],a.blockedOn===null);)Nl(a),a.blockedOn===null&&ur.shift()}var Rr=oe.ReactCurrentBatchConfig,os=!0;function at(n,r,a,c){var d=je,p=Rr.transition;Rr.transition=null;try{je=1,sa(n,r,a,c)}finally{je=d,Rr.transition=p}}function Fc(n,r,a,c){var d=je,p=Rr.transition;Rr.transition=null;try{je=4,sa(n,r,a,c)}finally{je=d,Rr.transition=p}}function sa(n,r,a,c){if(os){var d=Mi(n,r,a,c);if(d===null)Yc(n,r,c,Ys,a),Rl(n,c);else if(jc(d,n,r,a,c))c.stopPropagation();else if(Rl(n,c),r&4&&-1<Mc.indexOf(n)){for(;d!==null;){var p=va(d);if(p!==null&&Sl(p),p=Mi(n,r,a,c),p===null&&Yc(n,r,c,Ys,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else Yc(n,r,c,null,a)}}var Ys=null;function Mi(n,r,a,c){if(Ys=null,n=Ai(c),n=Zs(n),n!==null)if(r=$n(n),r===null)n=null;else if(a=r.tag,a===13){if(n=qs(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Ys=n,null}function ia(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wl()){case Ws:return 1;case Zr:return 4;case kn:case ta:return 16;case El:return 536870912;default:return 16}default:return 16}}var _n=null,ji=null,un=null;function oa(){if(un)return un;var n,r=ji,a=r.length,c,d="value"in _n?_n.value:_n.textContent,p=d.length;for(n=0;n<a&&r[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&r[a-c]===d[p-c];c++);return un=d.slice(n,1<c?1-c:void 0)}function Fi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function cr(){return!0}function aa(){return!1}function Mt(n){function r(a,c,d,p,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?cr:aa,this.isPropagationStopped=aa,this}return Y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),r}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Mt(Qn),hr=Y({},Qn,{view:0,detail:0}),Uc=Mt(hr),zi,Nr,as,Xs=Y({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==as&&(as&&n.type==="mousemove"?(zi=n.screenX-as.screenX,Nr=n.screenY-as.screenY):Nr=zi=0,as=n),zi)},movementY:function(n){return"movementY"in n?n.movementY:Nr}}),Bi=Mt(Xs),la=Y({},Xs,{dataTransfer:0}),bl=Mt(la),$i=Y({},hr,{relatedTarget:0}),qi=Mt($i),Dl=Y({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Pr=Mt(Dl),Vl=Y({},Qn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ll=Mt(Vl),Ol=Y({},Qn,{data:0}),ua=Mt(Ol),Wi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ml={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Ml[n])?!!r[n]:!1}function dr(){return jl}var l=Y({},hr,{key:function(n){if(n.key){var r=Wi[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Fi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dr,charCode:function(n){return n.type==="keypress"?Fi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=Mt(l),y=Y({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Mt(y),O=Y({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dr}),z=Mt(O),te=Y({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Mt(te),At=Y({},Xs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Mt(At),Pt=[9,13,27,32],Et=m&&"CompositionEvent"in window,Rn=null;m&&"documentMode"in document&&(Rn=document.documentMode);var wn=m&&"TextEvent"in window&&!Rn,Js=m&&(!Et||Rn&&8<Rn&&11>=Rn),Hi=" ",ep=!1;function tp(n,r){switch(n){case"keyup":return Pt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ki=!1;function t0(n,r){switch(n){case"compositionend":return np(r);case"keypress":return r.which!==32?null:(ep=!0,Hi);case"textInput":return n=r.data,n===Hi&&ep?null:n;default:return null}}function n0(n,r){if(Ki)return n==="compositionend"||!Et&&tp(n,r)?(n=oa(),un=ji=_n=null,Ki=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Js&&r.locale!=="ko"?null:r.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!r0[n.type]:r==="textarea"}function sp(n,r,a,c){ar(c),r=$l(r,"onChange"),0<r.length&&(a=new Ui("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var ca=null,ha=null;function s0(n){Tp(n,0)}function Fl(n){var r=Ji(n);if(Xr(r))return n}function i0(n,r){if(n==="change")return r}var ip=!1;if(m){var zc;if(m){var Bc="oninput"in document;if(!Bc){var op=document.createElement("div");op.setAttribute("oninput","return;"),Bc=typeof op.oninput=="function"}zc=Bc}else zc=!1;ip=zc&&(!document.documentMode||9<document.documentMode)}function ap(){ca&&(ca.detachEvent("onpropertychange",lp),ha=ca=null)}function lp(n){if(n.propertyName==="value"&&Fl(ha)){var r=[];sp(r,ha,n,Ai(n)),Xo(s0,r)}}function o0(n,r,a){n==="focusin"?(ap(),ca=r,ha=a,ca.attachEvent("onpropertychange",lp)):n==="focusout"&&ap()}function a0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fl(ha)}function l0(n,r){if(n==="click")return Fl(r)}function u0(n,r){if(n==="input"||n==="change")return Fl(r)}function c0(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Yn=typeof Object.is=="function"?Object.is:c0;function da(n,r){if(Yn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!Yn(n[d],r[d]))return!1}return!0}function up(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cp(n,r){var a=up(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=up(a)}}function hp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?hp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function dp(){for(var n=window,r=Un();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Un(n.document)}return r}function $c(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function h0(n){var r=dp(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&hp(a.ownerDocument.documentElement,a)){if(c!==null&&$c(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=cp(a,p);var _=cp(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var d0=m&&"documentMode"in document&&11>=document.documentMode,Gi=null,qc=null,fa=null,Wc=!1;function fp(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wc||Gi==null||Gi!==Un(c)||(c=Gi,"selectionStart"in c&&$c(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),fa&&da(fa,c)||(fa=c,c=$l(qc,"onSelect"),0<c.length&&(r=new Ui("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Gi)))}function Ul(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Qi={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},Hc={},pp={};m&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function zl(n){if(Hc[n])return Hc[n];if(!Qi[n])return n;var r=Qi[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in pp)return Hc[n]=r[a];return n}var mp=zl("animationend"),gp=zl("animationiteration"),yp=zl("animationstart"),vp=zl("transitionend"),_p=new Map,wp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(n,r){_p.set(n,r),u(r,[n])}for(var Kc=0;Kc<wp.length;Kc++){var Gc=wp[Kc],f0=Gc.toLowerCase(),p0=Gc[0].toUpperCase()+Gc.slice(1);ls(f0,"on"+p0)}ls(mp,"onAnimationEnd"),ls(gp,"onAnimationIteration"),ls(yp,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(vp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m0=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function Ep(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,yl(c,r,void 0,n),n.currentTarget=null}function Tp(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var _=c.length-1;0<=_;_--){var S=c[_],N=S.instance,F=S.currentTarget;if(S=S.listener,N!==p&&d.isPropagationStopped())break e;Ep(d,S,F),p=N}else for(_=0;_<c.length;_++){if(S=c[_],N=S.instance,F=S.currentTarget,S=S.listener,N!==p&&d.isPropagationStopped())break e;Ep(d,S,F),p=N}}}if(Bn)throw n=Jo,Bn=!1,Jo=null,n}function nt(n,r){var a=r[nh];a===void 0&&(a=r[nh]=new Set);var c=n+"__bubble";a.has(c)||(xp(r,n,2,!1),a.add(c))}function Qc(n,r,a){var c=0;r&&(c|=4),xp(a,n,c,r)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function ma(n){if(!n[Bl]){n[Bl]=!0,i.forEach(function(a){a!=="selectionchange"&&(m0.has(a)||Qc(a,!1,n),Qc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Bl]||(r[Bl]=!0,Qc("selectionchange",!1,r))}}function xp(n,r,a,c){switch(ia(r)){case 1:var d=at;break;case 4:d=Fc;break;default:d=sa}a=d.bind(null,r,a,n),d=void 0,!Ri||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Yc(n,r,a,c,d){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var N=_.tag;if((N===3||N===4)&&(N=_.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;_=_.return}for(;S!==null;){if(_=Zs(S),_===null)return;if(N=_.tag,N===5||N===6){c=p=_;continue e}S=S.parentNode}}c=c.return}Xo(function(){var F=p,Q=Ai(a),J=[];e:{var G=_p.get(n);if(G!==void 0){var ie=Ui,ce=n;switch(n){case"keypress":if(Fi(a)===0)break e;case"keydown":case"keyup":ie=f;break;case"focusin":ce="focus",ie=qi;break;case"focusout":ce="blur",ie=qi;break;case"beforeblur":case"afterblur":ie=qi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=z;break;case mp:case gp:case yp:ie=Pr;break;case vp:ie=He;break;case"scroll":ie=Uc;break;case"wheel":ie=ze;break;case"copy":case"cut":case"paste":ie=Ll;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=E}var fe=(r&4)!==0,vt=!fe&&n==="scroll",M=fe?G!==null?G+"Capture":null:G;fe=[];for(var D=F,j;D!==null;){j=D;var Z=j.stateNode;if(j.tag===5&&Z!==null&&(j=Z,M!==null&&(Z=yt(D,M),Z!=null&&fe.push(ga(D,Z,j)))),vt)break;D=D.return}0<fe.length&&(G=new ie(G,ce,null,a,Q),J.push({event:G,listeners:fe}))}}if((r&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",G&&a!==Us&&(ce=a.relatedTarget||a.fromElement)&&(Zs(ce)||ce[br]))break e;if((ie||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(ce=a.relatedTarget||a.toElement,ie=F,ce=ce?Zs(ce):null,ce!==null&&(vt=$n(ce),ce!==vt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ie=null,ce=F),ie!==ce)){if(fe=Bi,Z="onMouseLeave",M="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(fe=E,Z="onPointerLeave",M="onPointerEnter",D="pointer"),vt=ie==null?G:Ji(ie),j=ce==null?G:Ji(ce),G=new fe(Z,D+"leave",ie,a,Q),G.target=vt,G.relatedTarget=j,Z=null,Zs(Q)===F&&(fe=new fe(M,D+"enter",ce,a,Q),fe.target=j,fe.relatedTarget=vt,Z=fe),vt=Z,ie&&ce)t:{for(fe=ie,M=ce,D=0,j=fe;j;j=Yi(j))D++;for(j=0,Z=M;Z;Z=Yi(Z))j++;for(;0<D-j;)fe=Yi(fe),D--;for(;0<j-D;)M=Yi(M),j--;for(;D--;){if(fe===M||M!==null&&fe===M.alternate)break t;fe=Yi(fe),M=Yi(M)}fe=null}else fe=null;ie!==null&&Ip(J,G,ie,fe,!1),ce!==null&&vt!==null&&Ip(J,vt,ce,fe,!0)}}e:{if(G=F?Ji(F):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var ye=i0;else if(rp(G))if(ip)ye=u0;else{ye=a0;var xe=o0}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ye=l0);if(ye&&(ye=ye(n,F))){sp(J,ye,a,Q);break e}xe&&xe(n,G,F),n==="focusout"&&(xe=G._wrapperState)&&xe.controlled&&G.type==="number"&&Je(G,"number",G.value)}switch(xe=F?Ji(F):window,n){case"focusin":(rp(xe)||xe.contentEditable==="true")&&(Gi=xe,qc=F,fa=null);break;case"focusout":fa=qc=Gi=null;break;case"mousedown":Wc=!0;break;case"contextmenu":case"mouseup":case"dragend":Wc=!1,fp(J,a,Q);break;case"selectionchange":if(d0)break;case"keydown":case"keyup":fp(J,a,Q)}var Ie;if(Et)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ki?tp(n,a)&&(Ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(Js&&a.locale!=="ko"&&(Ki||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ki&&(Ie=oa()):(_n=Q,ji="value"in _n?_n.value:_n.textContent,Ki=!0)),xe=$l(F,Ae),0<xe.length&&(Ae=new ua(Ae,n,null,a,Q),J.push({event:Ae,listeners:xe}),Ie?Ae.data=Ie:(Ie=np(a),Ie!==null&&(Ae.data=Ie)))),(Ie=wn?t0(n,a):n0(n,a))&&(F=$l(F,"onBeforeInput"),0<F.length&&(Q=new ua("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:F}),Q.data=Ie))}Tp(J,r)})}function ga(n,r,a){return{instance:n,listener:r,currentTarget:a}}function $l(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=yt(n,a),p!=null&&c.unshift(ga(n,p,d)),p=yt(n,r),p!=null&&c.push(ga(n,p,d))),n=n.return}return c}function Yi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ip(n,r,a,c,d){for(var p=r._reactName,_=[];a!==null&&a!==c;){var S=a,N=S.alternate,F=S.stateNode;if(N!==null&&N===c)break;S.tag===5&&F!==null&&(S=F,d?(N=yt(a,p),N!=null&&_.unshift(ga(a,N,S))):d||(N=yt(a,p),N!=null&&_.push(ga(a,N,S)))),a=a.return}_.length!==0&&n.push({event:r,listeners:_})}var g0=/\r\n?/g,y0=/\u0000|\uFFFD/g;function Sp(n){return(typeof n=="string"?n:""+n).replace(g0,`
`).replace(y0,"")}function ql(n,r,a){if(r=Sp(r),Sp(n)!==r&&a)throw Error(t(425))}function Wl(){}var Xc=null,Jc=null;function Zc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var eh=typeof setTimeout=="function"?setTimeout:void 0,v0=typeof clearTimeout=="function"?clearTimeout:void 0,Ap=typeof Promise=="function"?Promise:void 0,_0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ap<"u"?function(n){return Ap.resolve(null).then(n).catch(w0)}:eh;function w0(n){setTimeout(function(){throw n})}function th(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Gn(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Gn(r)}function us(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function kp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),fr="__reactFiber$"+Xi,ya="__reactProps$"+Xi,br="__reactContainer$"+Xi,nh="__reactEvents$"+Xi,E0="__reactListeners$"+Xi,T0="__reactHandles$"+Xi;function Zs(n){var r=n[fr];if(r)return r;for(var a=n.parentNode;a;){if(r=a[br]||a[fr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=kp(n);n!==null;){if(a=n[fr])return a;n=kp(n)}return r}n=a,a=n.parentNode}return null}function va(n){return n=n[fr]||n[br],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ji(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Hl(n){return n[ya]||null}var rh=[],Zi=-1;function cs(n){return{current:n}}function rt(n){0>Zi||(n.current=rh[Zi],rh[Zi]=null,Zi--)}function tt(n,r){Zi++,rh[Zi]=n.current,n.current=r}var hs={},qt=cs(hs),cn=cs(!1),ei=hs;function eo(n,r){var a=n.type.contextTypes;if(!a)return hs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function hn(n){return n=n.childContextTypes,n!=null}function Kl(){rt(cn),rt(qt)}function Cp(n,r,a){if(qt.current!==hs)throw Error(t(168));tt(qt,r),tt(cn,a)}function Rp(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,be(n)||"Unknown",d));return Y({},a,c)}function Gl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||hs,ei=qt.current,tt(qt,n),tt(cn,cn.current),!0}function Np(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Rp(n,r,ei),c.__reactInternalMemoizedMergedChildContext=n,rt(cn),rt(qt),tt(qt,n)):rt(cn),tt(cn,a)}var Dr=null,Ql=!1,sh=!1;function Pp(n){Dr===null?Dr=[n]:Dr.push(n)}function x0(n){Ql=!0,Pp(n)}function ds(){if(!sh&&Dr!==null){sh=!0;var n=0,r=je;try{var a=Dr;for(je=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Dr=null,Ql=!1}catch(d){throw Dr!==null&&(Dr=Dr.slice(n+1)),Di(Ws,ds),d}finally{je=r,sh=!1}}return null}var to=[],no=0,Yl=null,Xl=0,Nn=[],Pn=0,ti=null,Vr=1,Lr="";function ni(n,r){to[no++]=Xl,to[no++]=Yl,Yl=n,Xl=r}function bp(n,r,a){Nn[Pn++]=Vr,Nn[Pn++]=Lr,Nn[Pn++]=ti,ti=n;var c=Vr;n=Lr;var d=32-tn(c)-1;c&=~(1<<d),a+=1;var p=32-tn(r)+d;if(30<p){var _=d-d%5;p=(c&(1<<_)-1).toString(32),c>>=_,d-=_,Vr=1<<32-tn(r)+d|a<<d|c,Lr=p+n}else Vr=1<<p|a<<d|c,Lr=n}function ih(n){n.return!==null&&(ni(n,1),bp(n,1,0))}function oh(n){for(;n===Yl;)Yl=to[--no],to[no]=null,Xl=to[--no],to[no]=null;for(;n===ti;)ti=Nn[--Pn],Nn[Pn]=null,Lr=Nn[--Pn],Nn[Pn]=null,Vr=Nn[--Pn],Nn[Pn]=null}var En=null,Tn=null,lt=!1,Xn=null;function Dp(n,r){var a=Ln(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Vp(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,En=n,Tn=us(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,En=n,Tn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=ti!==null?{id:Vr,overflow:Lr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Ln(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,En=n,Tn=null,!0):!1;default:return!1}}function ah(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lh(n){if(lt){var r=Tn;if(r){var a=r;if(!Vp(n,r)){if(ah(n))throw Error(t(418));r=us(a.nextSibling);var c=En;r&&Vp(n,r)?Dp(c,a):(n.flags=n.flags&-4097|2,lt=!1,En=n)}}else{if(ah(n))throw Error(t(418));n.flags=n.flags&-4097|2,lt=!1,En=n}}}function Lp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;En=n}function Jl(n){if(n!==En)return!1;if(!lt)return Lp(n),lt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Zc(n.type,n.memoizedProps)),r&&(r=Tn)){if(ah(n))throw Op(),Error(t(418));for(;r;)Dp(n,r),r=us(r.nextSibling)}if(Lp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){Tn=us(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}Tn=null}}else Tn=En?us(n.stateNode.nextSibling):null;return!0}function Op(){for(var n=Tn;n;)n=us(n.nextSibling)}function ro(){Tn=En=null,lt=!1}function uh(n){Xn===null?Xn=[n]:Xn.push(n)}var I0=oe.ReactCurrentBatchConfig;function _a(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var S=d.refs;_===null?delete S[p]:S[p]=_},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Zl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Mp(n){var r=n._init;return r(n._payload)}function jp(n){function r(M,D){if(n){var j=M.deletions;j===null?(M.deletions=[D],M.flags|=16):j.push(D)}}function a(M,D){if(!n)return null;for(;D!==null;)r(M,D),D=D.sibling;return null}function c(M,D){for(M=new Map;D!==null;)D.key!==null?M.set(D.key,D):M.set(D.index,D),D=D.sibling;return M}function d(M,D){return M=ws(M,D),M.index=0,M.sibling=null,M}function p(M,D,j){return M.index=j,n?(j=M.alternate,j!==null?(j=j.index,j<D?(M.flags|=2,D):j):(M.flags|=2,D)):(M.flags|=1048576,D)}function _(M){return n&&M.alternate===null&&(M.flags|=2),M}function S(M,D,j,Z){return D===null||D.tag!==6?(D=ed(j,M.mode,Z),D.return=M,D):(D=d(D,j),D.return=M,D)}function N(M,D,j,Z){var ye=j.type;return ye===R?Q(M,D,j.props.children,Z,j.key):D!==null&&(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===it&&Mp(ye)===D.type)?(Z=d(D,j.props),Z.ref=_a(M,D,j),Z.return=M,Z):(Z=xu(j.type,j.key,j.props,null,M.mode,Z),Z.ref=_a(M,D,j),Z.return=M,Z)}function F(M,D,j,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==j.containerInfo||D.stateNode.implementation!==j.implementation?(D=td(j,M.mode,Z),D.return=M,D):(D=d(D,j.children||[]),D.return=M,D)}function Q(M,D,j,Z,ye){return D===null||D.tag!==7?(D=ci(j,M.mode,Z,ye),D.return=M,D):(D=d(D,j),D.return=M,D)}function J(M,D,j){if(typeof D=="string"&&D!==""||typeof D=="number")return D=ed(""+D,M.mode,j),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case we:return j=xu(D.type,D.key,D.props,null,M.mode,j),j.ref=_a(M,null,D),j.return=M,j;case ge:return D=td(D,M.mode,j),D.return=M,D;case it:var Z=D._init;return J(M,Z(D._payload),j)}if(ue(D)||W(D))return D=ci(D,M.mode,j,null),D.return=M,D;Zl(M,D)}return null}function G(M,D,j,Z){var ye=D!==null?D.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ye!==null?null:S(M,D,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case we:return j.key===ye?N(M,D,j,Z):null;case ge:return j.key===ye?F(M,D,j,Z):null;case it:return ye=j._init,G(M,D,ye(j._payload),Z)}if(ue(j)||W(j))return ye!==null?null:Q(M,D,j,Z,null);Zl(M,j)}return null}function ie(M,D,j,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return M=M.get(j)||null,S(D,M,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case we:return M=M.get(Z.key===null?j:Z.key)||null,N(D,M,Z,ye);case ge:return M=M.get(Z.key===null?j:Z.key)||null,F(D,M,Z,ye);case it:var xe=Z._init;return ie(M,D,j,xe(Z._payload),ye)}if(ue(Z)||W(Z))return M=M.get(j)||null,Q(D,M,Z,ye,null);Zl(D,Z)}return null}function ce(M,D,j,Z){for(var ye=null,xe=null,Ie=D,Ae=D=0,Vt=null;Ie!==null&&Ae<j.length;Ae++){Ie.index>Ae?(Vt=Ie,Ie=null):Vt=Ie.sibling;var qe=G(M,Ie,j[Ae],Z);if(qe===null){Ie===null&&(Ie=Vt);break}n&&Ie&&qe.alternate===null&&r(M,Ie),D=p(qe,D,Ae),xe===null?ye=qe:xe.sibling=qe,xe=qe,Ie=Vt}if(Ae===j.length)return a(M,Ie),lt&&ni(M,Ae),ye;if(Ie===null){for(;Ae<j.length;Ae++)Ie=J(M,j[Ae],Z),Ie!==null&&(D=p(Ie,D,Ae),xe===null?ye=Ie:xe.sibling=Ie,xe=Ie);return lt&&ni(M,Ae),ye}for(Ie=c(M,Ie);Ae<j.length;Ae++)Vt=ie(Ie,M,Ae,j[Ae],Z),Vt!==null&&(n&&Vt.alternate!==null&&Ie.delete(Vt.key===null?Ae:Vt.key),D=p(Vt,D,Ae),xe===null?ye=Vt:xe.sibling=Vt,xe=Vt);return n&&Ie.forEach(function(Es){return r(M,Es)}),lt&&ni(M,Ae),ye}function fe(M,D,j,Z){var ye=W(j);if(typeof ye!="function")throw Error(t(150));if(j=ye.call(j),j==null)throw Error(t(151));for(var xe=ye=null,Ie=D,Ae=D=0,Vt=null,qe=j.next();Ie!==null&&!qe.done;Ae++,qe=j.next()){Ie.index>Ae?(Vt=Ie,Ie=null):Vt=Ie.sibling;var Es=G(M,Ie,qe.value,Z);if(Es===null){Ie===null&&(Ie=Vt);break}n&&Ie&&Es.alternate===null&&r(M,Ie),D=p(Es,D,Ae),xe===null?ye=Es:xe.sibling=Es,xe=Es,Ie=Vt}if(qe.done)return a(M,Ie),lt&&ni(M,Ae),ye;if(Ie===null){for(;!qe.done;Ae++,qe=j.next())qe=J(M,qe.value,Z),qe!==null&&(D=p(qe,D,Ae),xe===null?ye=qe:xe.sibling=qe,xe=qe);return lt&&ni(M,Ae),ye}for(Ie=c(M,Ie);!qe.done;Ae++,qe=j.next())qe=ie(Ie,M,Ae,qe.value,Z),qe!==null&&(n&&qe.alternate!==null&&Ie.delete(qe.key===null?Ae:qe.key),D=p(qe,D,Ae),xe===null?ye=qe:xe.sibling=qe,xe=qe);return n&&Ie.forEach(function(rw){return r(M,rw)}),lt&&ni(M,Ae),ye}function vt(M,D,j,Z){if(typeof j=="object"&&j!==null&&j.type===R&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case we:e:{for(var ye=j.key,xe=D;xe!==null;){if(xe.key===ye){if(ye=j.type,ye===R){if(xe.tag===7){a(M,xe.sibling),D=d(xe,j.props.children),D.return=M,M=D;break e}}else if(xe.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===it&&Mp(ye)===xe.type){a(M,xe.sibling),D=d(xe,j.props),D.ref=_a(M,xe,j),D.return=M,M=D;break e}a(M,xe);break}else r(M,xe);xe=xe.sibling}j.type===R?(D=ci(j.props.children,M.mode,Z,j.key),D.return=M,M=D):(Z=xu(j.type,j.key,j.props,null,M.mode,Z),Z.ref=_a(M,D,j),Z.return=M,M=Z)}return _(M);case ge:e:{for(xe=j.key;D!==null;){if(D.key===xe)if(D.tag===4&&D.stateNode.containerInfo===j.containerInfo&&D.stateNode.implementation===j.implementation){a(M,D.sibling),D=d(D,j.children||[]),D.return=M,M=D;break e}else{a(M,D);break}else r(M,D);D=D.sibling}D=td(j,M.mode,Z),D.return=M,M=D}return _(M);case it:return xe=j._init,vt(M,D,xe(j._payload),Z)}if(ue(j))return ce(M,D,j,Z);if(W(j))return fe(M,D,j,Z);Zl(M,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,D!==null&&D.tag===6?(a(M,D.sibling),D=d(D,j),D.return=M,M=D):(a(M,D),D=ed(j,M.mode,Z),D.return=M,M=D),_(M)):a(M,D)}return vt}var so=jp(!0),Fp=jp(!1),eu=cs(null),tu=null,io=null,ch=null;function hh(){ch=io=tu=null}function dh(n){var r=eu.current;rt(eu),n._currentValue=r}function fh(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function oo(n,r){tu=n,ch=io=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(dn=!0),n.firstContext=null)}function bn(n){var r=n._currentValue;if(ch!==n)if(n={context:n,memoizedValue:r,next:null},io===null){if(tu===null)throw Error(t(308));io=n,tu.dependencies={lanes:0,firstContext:n}}else io=io.next=n;return r}var ri=null;function ph(n){ri===null?ri=[n]:ri.push(n)}function Up(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,ph(r)):(a.next=d.next,d.next=a),r.interleaved=a,Or(n,c)}function Or(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var fs=!1;function mh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Mr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function ps(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,Or(n,a)}return d=c.interleaved,d===null?(r.next=r,ph(c)):(r.next=d.next,d.next=r),c.interleaved=r,Or(n,a)}function nu(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,rs(n,a)}}function Bp(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=_:p=p.next=_,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function ru(n,r,a,c){var d=n.updateQueue;fs=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var N=S,F=N.next;N.next=null,_===null?p=F:_.next=F,_=N;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==_&&(S===null?Q.firstBaseUpdate=F:S.next=F,Q.lastBaseUpdate=N))}if(p!==null){var J=d.baseState;_=0,Q=F=N=null,S=p;do{var G=S.lane,ie=S.eventTime;if((c&G)===G){Q!==null&&(Q=Q.next={eventTime:ie,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ce=n,fe=S;switch(G=r,ie=a,fe.tag){case 1:if(ce=fe.payload,typeof ce=="function"){J=ce.call(ie,J,G);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=fe.payload,G=typeof ce=="function"?ce.call(ie,J,G):ce,G==null)break e;J=Y({},J,G);break e;case 2:fs=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[S]:G.push(S))}else ie={eventTime:ie,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?(F=Q=ie,N=J):Q=Q.next=ie,_|=G;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;G=S,S=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Q===null&&(N=J),d.baseState=N,d.firstBaseUpdate=F,d.lastBaseUpdate=Q,r=d.shared.interleaved,r!==null){d=r;do _|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);oi|=_,n.lanes=_,n.memoizedState=J}}function $p(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var wa={},pr=cs(wa),Ea=cs(wa),Ta=cs(wa);function si(n){if(n===wa)throw Error(t(174));return n}function gh(n,r){switch(tt(Ta,r),tt(Ea,n),tt(pr,wa),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:St(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=St(r,n)}rt(pr),tt(pr,r)}function ao(){rt(pr),rt(Ea),rt(Ta)}function qp(n){si(Ta.current);var r=si(pr.current),a=St(r,n.type);r!==a&&(tt(Ea,n),tt(pr,a))}function yh(n){Ea.current===n&&(rt(pr),rt(Ea))}var ct=cs(0);function su(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vh=[];function _h(){for(var n=0;n<vh.length;n++)vh[n]._workInProgressVersionPrimary=null;vh.length=0}var iu=oe.ReactCurrentDispatcher,wh=oe.ReactCurrentBatchConfig,ii=0,ht=null,kt=null,bt=null,ou=!1,xa=!1,Ia=0,S0=0;function Wt(){throw Error(t(321))}function Eh(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Yn(n[a],r[a]))return!1;return!0}function Th(n,r,a,c,d,p){if(ii=p,ht=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,iu.current=n===null||n.memoizedState===null?R0:N0,n=a(c,d),xa){p=0;do{if(xa=!1,Ia=0,25<=p)throw Error(t(301));p+=1,bt=kt=null,r.updateQueue=null,iu.current=P0,n=a(c,d)}while(xa)}if(iu.current=uu,r=kt!==null&&kt.next!==null,ii=0,bt=kt=ht=null,ou=!1,r)throw Error(t(300));return n}function xh(){var n=Ia!==0;return Ia=0,n}function mr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?ht.memoizedState=bt=n:bt=bt.next=n,bt}function Dn(){if(kt===null){var n=ht.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var r=bt===null?ht.memoizedState:bt.next;if(r!==null)bt=r,kt=n;else{if(n===null)throw Error(t(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},bt===null?ht.memoizedState=bt=n:bt=bt.next=n}return bt}function Sa(n,r){return typeof r=="function"?r(n):r}function Ih(n){var r=Dn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=kt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var S=_=null,N=null,F=p;do{var Q=F.lane;if((ii&Q)===Q)N!==null&&(N=N.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),c=F.hasEagerState?F.eagerState:n(c,F.action);else{var J={lane:Q,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};N===null?(S=N=J,_=c):N=N.next=J,ht.lanes|=Q,oi|=Q}F=F.next}while(F!==null&&F!==p);N===null?_=c:N.next=S,Yn(c,r.memoizedState)||(dn=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,ht.lanes|=p,oi|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Sh(n){var r=Dn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do p=n(p,_.action),_=_.next;while(_!==d);Yn(p,r.memoizedState)||(dn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function Wp(){}function Hp(n,r){var a=ht,c=Dn(),d=r(),p=!Yn(c.memoizedState,d);if(p&&(c.memoizedState=d,dn=!0),c=c.queue,Ah(Qp.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||bt!==null&&bt.memoizedState.tag&1){if(a.flags|=2048,Aa(9,Gp.bind(null,a,c,d,r),void 0,null),Dt===null)throw Error(t(349));(ii&30)!==0||Kp(a,r,d)}return d}function Kp(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=ht.updateQueue,r===null?(r={lastEffect:null,stores:null},ht.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Gp(n,r,a,c){r.value=a,r.getSnapshot=c,Yp(r)&&Xp(n)}function Qp(n,r,a){return a(function(){Yp(r)&&Xp(n)})}function Yp(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Yn(n,a)}catch{return!0}}function Xp(n){var r=Or(n,1);r!==null&&tr(r,n,1,-1)}function Jp(n){var r=mr();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:n},r.queue=n,n=n.dispatch=C0.bind(null,ht,n),[r.memoizedState,n]}function Aa(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=ht.updateQueue,r===null?(r={lastEffect:null,stores:null},ht.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function Zp(){return Dn().memoizedState}function au(n,r,a,c){var d=mr();ht.flags|=n,d.memoizedState=Aa(1|r,a,void 0,c===void 0?null:c)}function lu(n,r,a,c){var d=Dn();c=c===void 0?null:c;var p=void 0;if(kt!==null){var _=kt.memoizedState;if(p=_.destroy,c!==null&&Eh(c,_.deps)){d.memoizedState=Aa(r,a,p,c);return}}ht.flags|=n,d.memoizedState=Aa(1|r,a,p,c)}function em(n,r){return au(8390656,8,n,r)}function Ah(n,r){return lu(2048,8,n,r)}function tm(n,r){return lu(4,2,n,r)}function nm(n,r){return lu(4,4,n,r)}function rm(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function sm(n,r,a){return a=a!=null?a.concat([n]):null,lu(4,4,rm.bind(null,r,n),a)}function kh(){}function im(n,r){var a=Dn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Eh(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function om(n,r){var a=Dn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Eh(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function am(n,r,a){return(ii&21)===0?(n.baseState&&(n.baseState=!1,dn=!0),n.memoizedState=a):(Yn(a,r)||(a=Gs(),ht.lanes|=a,oi|=a,n.baseState=!0),r)}function A0(n,r){var a=je;je=a!==0&&4>a?a:4,n(!0);var c=wh.transition;wh.transition={};try{n(!1),r()}finally{je=a,wh.transition=c}}function lm(){return Dn().memoizedState}function k0(n,r,a){var c=vs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},um(n))cm(r,a);else if(a=Up(n,r,a,c),a!==null){var d=sn();tr(a,n,c,d),hm(a,r,c)}}function C0(n,r,a){var c=vs(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(um(n))cm(r,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,S=p(_,a);if(d.hasEagerState=!0,d.eagerState=S,Yn(S,_)){var N=r.interleaved;N===null?(d.next=d,ph(r)):(d.next=N.next,N.next=d),r.interleaved=d;return}}catch{}finally{}a=Up(n,r,d,c),a!==null&&(d=sn(),tr(a,n,c,d),hm(a,r,c))}}function um(n){var r=n.alternate;return n===ht||r!==null&&r===ht}function cm(n,r){xa=ou=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function hm(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,rs(n,a)}}var uu={readContext:bn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},R0={readContext:bn,useCallback:function(n,r){return mr().memoizedState=[n,r===void 0?null:r],n},useContext:bn,useEffect:em,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,au(4194308,4,rm.bind(null,r,n),a)},useLayoutEffect:function(n,r){return au(4194308,4,n,r)},useInsertionEffect:function(n,r){return au(4,2,n,r)},useMemo:function(n,r){var a=mr();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=mr();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=k0.bind(null,ht,n),[c.memoizedState,n]},useRef:function(n){var r=mr();return n={current:n},r.memoizedState=n},useState:Jp,useDebugValue:kh,useDeferredValue:function(n){return mr().memoizedState=n},useTransition:function(){var n=Jp(!1),r=n[0];return n=A0.bind(null,n[1]),mr().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=ht,d=mr();if(lt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),Dt===null)throw Error(t(349));(ii&30)!==0||Kp(c,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,em(Qp.bind(null,c,p,n),[n]),c.flags|=2048,Aa(9,Gp.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=mr(),r=Dt.identifierPrefix;if(lt){var a=Lr,c=Vr;a=(c&~(1<<32-tn(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ia++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=S0++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},N0={readContext:bn,useCallback:im,useContext:bn,useEffect:Ah,useImperativeHandle:sm,useInsertionEffect:tm,useLayoutEffect:nm,useMemo:om,useReducer:Ih,useRef:Zp,useState:function(){return Ih(Sa)},useDebugValue:kh,useDeferredValue:function(n){var r=Dn();return am(r,kt.memoizedState,n)},useTransition:function(){var n=Ih(Sa)[0],r=Dn().memoizedState;return[n,r]},useMutableSource:Wp,useSyncExternalStore:Hp,useId:lm,unstable_isNewReconciler:!1},P0={readContext:bn,useCallback:im,useContext:bn,useEffect:Ah,useImperativeHandle:sm,useInsertionEffect:tm,useLayoutEffect:nm,useMemo:om,useReducer:Sh,useRef:Zp,useState:function(){return Sh(Sa)},useDebugValue:kh,useDeferredValue:function(n){var r=Dn();return kt===null?r.memoizedState=n:am(r,kt.memoizedState,n)},useTransition:function(){var n=Sh(Sa)[0],r=Dn().memoizedState;return[n,r]},useMutableSource:Wp,useSyncExternalStore:Hp,useId:lm,unstable_isNewReconciler:!1};function Jn(n,r){if(n&&n.defaultProps){r=Y({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Ch(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:Y({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var cu={isMounted:function(n){return(n=n._reactInternals)?$n(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=sn(),d=vs(n),p=Mr(c,d);p.payload=r,a!=null&&(p.callback=a),r=ps(n,p,d),r!==null&&(tr(r,n,d,c),nu(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=sn(),d=vs(n),p=Mr(c,d);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=ps(n,p,d),r!==null&&(tr(r,n,d,c),nu(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=sn(),c=vs(n),d=Mr(a,c);d.tag=2,r!=null&&(d.callback=r),r=ps(n,d,c),r!==null&&(tr(r,n,c,a),nu(r,n,c))}};function dm(n,r,a,c,d,p,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,_):r.prototype&&r.prototype.isPureReactComponent?!da(a,c)||!da(d,p):!0}function fm(n,r,a){var c=!1,d=hs,p=r.contextType;return typeof p=="object"&&p!==null?p=bn(p):(d=hn(r)?ei:qt.current,c=r.contextTypes,p=(c=c!=null)?eo(n,d):hs),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=cu,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),r}function pm(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&cu.enqueueReplaceState(r,r.state,null)}function Rh(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},mh(n);var p=r.contextType;typeof p=="object"&&p!==null?d.context=bn(p):(p=hn(r)?ei:qt.current,d.context=eo(n,p)),d.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Ch(n,r,p,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&cu.enqueueReplaceState(d,d.state,null),ru(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function lo(n,r){try{var a="",c=r;do a+=_e(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:d,digest:null}}function Nh(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Ph(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var b0=typeof WeakMap=="function"?WeakMap:Map;function mm(n,r,a){a=Mr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){yu||(yu=!0,Hh=c),Ph(n,r)},a}function gm(n,r,a){a=Mr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){Ph(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Ph(n,r),typeof c!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),a}function ym(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new b0;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=H0.bind(null,n,r,a),r.then(n,n))}function vm(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function _m(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Mr(-1,1),r.tag=2,ps(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var D0=oe.ReactCurrentOwner,dn=!1;function rn(n,r,a,c){r.child=n===null?Fp(r,null,a,c):so(r,n.child,a,c)}function wm(n,r,a,c,d){a=a.render;var p=r.ref;return oo(r,d),c=Th(n,r,a,c,p,d),a=xh(),n!==null&&!dn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,jr(n,r,d)):(lt&&a&&ih(r),r.flags|=1,rn(n,r,c,d),r.child)}function Em(n,r,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!Zh(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,Tm(n,r,p,c,d)):(n=xu(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&d)===0){var _=p.memoizedProps;if(a=a.compare,a=a!==null?a:da,a(_,c)&&n.ref===r.ref)return jr(n,r,d)}return r.flags|=1,n=ws(p,c),n.ref=r.ref,n.return=r,r.child=n}function Tm(n,r,a,c,d){if(n!==null){var p=n.memoizedProps;if(da(p,c)&&n.ref===r.ref)if(dn=!1,r.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(dn=!0);else return r.lanes=n.lanes,jr(n,r,d)}return bh(n,r,a,c,d)}function xm(n,r,a){var c=r.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(co,xn),xn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,tt(co,xn),xn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,tt(co,xn),xn|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,tt(co,xn),xn|=c;return rn(n,r,d,a),r.child}function Im(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function bh(n,r,a,c,d){var p=hn(a)?ei:qt.current;return p=eo(r,p),oo(r,d),a=Th(n,r,a,c,p,d),c=xh(),n!==null&&!dn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,jr(n,r,d)):(lt&&c&&ih(r),r.flags|=1,rn(n,r,a,d),r.child)}function Sm(n,r,a,c,d){if(hn(a)){var p=!0;Gl(r)}else p=!1;if(oo(r,d),r.stateNode===null)du(n,r),fm(r,a,c),Rh(r,a,c,d),c=!0;else if(n===null){var _=r.stateNode,S=r.memoizedProps;_.props=S;var N=_.context,F=a.contextType;typeof F=="object"&&F!==null?F=bn(F):(F=hn(a)?ei:qt.current,F=eo(r,F));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function";J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==c||N!==F)&&pm(r,_,c,F),fs=!1;var G=r.memoizedState;_.state=G,ru(r,c,_,d),N=r.memoizedState,S!==c||G!==N||cn.current||fs?(typeof Q=="function"&&(Ch(r,a,Q,c),N=r.memoizedState),(S=fs||dm(r,a,S,c,G,N,F))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=N),_.props=c,_.state=N,_.context=F,c=S):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,zp(n,r),S=r.memoizedProps,F=r.type===r.elementType?S:Jn(r.type,S),_.props=F,J=r.pendingProps,G=_.context,N=a.contextType,typeof N=="object"&&N!==null?N=bn(N):(N=hn(a)?ei:qt.current,N=eo(r,N));var ie=a.getDerivedStateFromProps;(Q=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==J||G!==N)&&pm(r,_,c,N),fs=!1,G=r.memoizedState,_.state=G,ru(r,c,_,d);var ce=r.memoizedState;S!==J||G!==ce||cn.current||fs?(typeof ie=="function"&&(Ch(r,a,ie,c),ce=r.memoizedState),(F=fs||dm(r,a,F,c,G,ce,N)||!1)?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ce,N),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ce,N)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ce),_.props=c,_.state=ce,_.context=N,c=F):(typeof _.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),c=!1)}return Dh(n,r,a,c,p,d)}function Dh(n,r,a,c,d,p){Im(n,r);var _=(r.flags&128)!==0;if(!c&&!_)return d&&Np(r,a,!1),jr(n,r,p);c=r.stateNode,D0.current=r;var S=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&_?(r.child=so(r,n.child,null,p),r.child=so(r,null,S,p)):rn(n,r,S,p),r.memoizedState=c.state,d&&Np(r,a,!0),r.child}function Am(n){var r=n.stateNode;r.pendingContext?Cp(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Cp(n,r.context,!1),gh(n,r.containerInfo)}function km(n,r,a,c,d){return ro(),uh(d),r.flags|=256,rn(n,r,a,c),r.child}var Vh={dehydrated:null,treeContext:null,retryLane:0};function Lh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Cm(n,r,a){var c=r.pendingProps,d=ct.current,p=!1,_=(r.flags&128)!==0,S;if((S=_)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),tt(ct,d&1),n===null)return lh(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=c.children,n=c.fallback,p?(c=r.mode,p=r.child,_={mode:"hidden",children:_},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Iu(_,c,0,null),n=ci(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=Lh(a),r.memoizedState=Vh,n):Oh(r,_));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return V0(n,r,_,c,S,d,a);if(p){p=c.fallback,_=r.mode,d=n.child,S=d.sibling;var N={mode:"hidden",children:c.children};return(_&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=N,r.deletions=null):(c=ws(d,N),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=ws(S,p):(p=ci(p,_,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,_=n.child.memoizedState,_=_===null?Lh(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=n.childLanes&~a,r.memoizedState=Vh,c}return p=n.child,n=p.sibling,c=ws(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Oh(n,r){return r=Iu({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function hu(n,r,a,c){return c!==null&&uh(c),so(r,n.child,null,a),n=Oh(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function V0(n,r,a,c,d,p,_){if(a)return r.flags&256?(r.flags&=-257,c=Nh(Error(t(422))),hu(n,r,_,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=Iu({mode:"visible",children:c.children},d,0,null),p=ci(p,d,_,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&so(r,n.child,null,_),r.child.memoizedState=Lh(_),r.memoizedState=Vh,p);if((r.mode&1)===0)return hu(n,r,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,p=Error(t(419)),c=Nh(p,c,void 0),hu(n,r,_,c)}if(S=(_&n.childLanes)!==0,dn||S){if(c=Dt,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Or(n,d),tr(c,n,d,-1))}return Jh(),c=Nh(Error(t(421))),hu(n,r,_,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=K0.bind(null,n),d._reactRetry=r,null):(n=p.treeContext,Tn=us(d.nextSibling),En=r,lt=!0,Xn=null,n!==null&&(Nn[Pn++]=Vr,Nn[Pn++]=Lr,Nn[Pn++]=ti,Vr=n.id,Lr=n.overflow,ti=r),r=Oh(r,c.children),r.flags|=4096,r)}function Rm(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),fh(n.return,r,a)}function Mh(n,r,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Nm(n,r,a){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if(rn(n,r,c.children,a),c=ct.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Rm(n,a,r);else if(n.tag===19)Rm(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(tt(ct,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&su(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Mh(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&su(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Mh(r,!0,a,null,p);break;case"together":Mh(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function du(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function jr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),oi|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=ws(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=ws(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function L0(n,r,a){switch(r.tag){case 3:Am(r),ro();break;case 5:qp(r);break;case 1:hn(r.type)&&Gl(r);break;case 4:gh(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;tt(eu,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(tt(ct,ct.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Cm(n,r,a):(tt(ct,ct.current&1),n=jr(n,r,a),n!==null?n.sibling:null);tt(ct,ct.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return Nm(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),tt(ct,ct.current),c)break;return null;case 22:case 23:return r.lanes=0,xm(n,r,a)}return jr(n,r,a)}var Pm,jh,bm,Dm;Pm=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},jh=function(){},bm=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,si(pr.current);var p=null;switch(a){case"input":d=Ir(n,d),c=Ir(n,c),p=[];break;case"select":d=Y({},d,{value:void 0}),c=Y({},c,{value:void 0}),p=[];break;case"textarea":d=Ze(n,d),c=Ze(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Wl)}Ko(a,c);var _;a=null;for(F in d)if(!c.hasOwnProperty(F)&&d.hasOwnProperty(F)&&d[F]!=null)if(F==="style"){var S=d[F];for(_ in S)S.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?p||(p=[]):(p=p||[]).push(F,null));for(F in c){var N=c[F];if(S=d?.[F],c.hasOwnProperty(F)&&N!==S&&(N!=null||S!=null))if(F==="style")if(S){for(_ in S)!S.hasOwnProperty(_)||N&&N.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in N)N.hasOwnProperty(_)&&S[_]!==N[_]&&(a||(a={}),a[_]=N[_])}else a||(p||(p=[]),p.push(F,a)),a=N;else F==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,S=S?S.__html:void 0,N!=null&&S!==N&&(p=p||[]).push(F,N)):F==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push(F,""+N):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(o.hasOwnProperty(F)?(N!=null&&F==="onScroll"&&nt("scroll",n),p||S===N||(p=[])):(p=p||[]).push(F,N))}a&&(p=p||[]).push("style",a);var F=p;(r.updateQueue=F)&&(r.flags|=4)}},Dm=function(n,r,a,c){a!==c&&(r.flags|=4)};function ka(n,r){if(!lt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ht(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function O0(n,r,a){var c=r.pendingProps;switch(oh(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(r),null;case 1:return hn(r.type)&&Kl(),Ht(r),null;case 3:return c=r.stateNode,ao(),rt(cn),rt(qt),_h(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Jl(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xn!==null&&(Qh(Xn),Xn=null))),jh(n,r),Ht(r),null;case 5:yh(r);var d=si(Ta.current);if(a=r.type,n!==null&&r.stateNode!=null)bm(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Ht(r),null}if(n=si(pr.current),Jl(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[fr]=r,c[ya]=p,n=(r.mode&1)!==0,a){case"dialog":nt("cancel",c),nt("close",c);break;case"iframe":case"object":case"embed":nt("load",c);break;case"video":case"audio":for(d=0;d<pa.length;d++)nt(pa[d],c);break;case"source":nt("error",c);break;case"img":case"image":case"link":nt("error",c),nt("load",c);break;case"details":nt("toggle",c);break;case"input":se(c,p),nt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},nt("invalid",c);break;case"textarea":Nt(c,p),nt("invalid",c)}Ko(a,p),d=null;for(var _ in p)if(p.hasOwnProperty(_)){var S=p[_];_==="children"?typeof S=="string"?c.textContent!==S&&(p.suppressHydrationWarning!==!0&&ql(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&ql(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(_)&&S!=null&&_==="onScroll"&&nt("scroll",c)}switch(a){case"input":Fn(c),Xe(c,p,!0);break;case"textarea":Fn(c),en(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Wl)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ut(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[fr]=r,n[ya]=c,Pm(n,r,!1,!1),r.stateNode=n;e:{switch(_=Go(a,c),a){case"dialog":nt("cancel",n),nt("close",n),d=c;break;case"iframe":case"object":case"embed":nt("load",n),d=c;break;case"video":case"audio":for(d=0;d<pa.length;d++)nt(pa[d],n);d=c;break;case"source":nt("error",n),d=c;break;case"img":case"image":case"link":nt("error",n),nt("load",n),d=c;break;case"details":nt("toggle",n),d=c;break;case"input":se(n,c),d=Ir(n,c),nt("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=Y({},c,{value:void 0}),nt("invalid",n);break;case"textarea":Nt(n,c),d=Ze(n,c),nt("invalid",n);break;default:d=c}Ko(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var N=S[p];p==="style"?Wo(n,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&$o(n,N)):p==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Jr(n,N):typeof N=="number"&&Jr(n,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?N!=null&&p==="onScroll"&&nt("scroll",n):N!=null&&me(n,p,N,_))}switch(a){case"input":Fn(n),Xe(n,c,!1);break;case"textarea":Fn(n),en(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ue(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?ot(n,!!c.multiple,p,!1):c.defaultValue!=null&&ot(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Wl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ht(r),null;case 6:if(n&&r.stateNode!=null)Dm(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=si(Ta.current),si(pr.current),Jl(r)){if(c=r.stateNode,a=r.memoizedProps,c[fr]=r,(p=c.nodeValue!==a)&&(n=En,n!==null))switch(n.tag){case 3:ql(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ql(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[fr]=r,r.stateNode=c}return Ht(r),null;case 13:if(rt(ct),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(lt&&Tn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Op(),ro(),r.flags|=98560,p=!1;else if(p=Jl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[fr]=r}else ro(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ht(r),p=!1}else Xn!==null&&(Qh(Xn),Xn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(ct.current&1)!==0?Ct===0&&(Ct=3):Jh())),r.updateQueue!==null&&(r.flags|=4),Ht(r),null);case 4:return ao(),jh(n,r),n===null&&ma(r.stateNode.containerInfo),Ht(r),null;case 10:return dh(r.type._context),Ht(r),null;case 17:return hn(r.type)&&Kl(),Ht(r),null;case 19:if(rt(ct),p=r.memoizedState,p===null)return Ht(r),null;if(c=(r.flags&128)!==0,_=p.rendering,_===null)if(c)ka(p,!1);else{if(Ct!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(_=su(n),_!==null){for(r.flags|=128,ka(p,!1),c=_.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,n=_.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return tt(ct,ct.current&1|2),r.child}n=n.sibling}p.tail!==null&&et()>ho&&(r.flags|=128,c=!0,ka(p,!1),r.lanes=4194304)}else{if(!c)if(n=su(_),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ka(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!lt)return Ht(r),null}else 2*et()-p.renderingStartTime>ho&&a!==1073741824&&(r.flags|=128,c=!0,ka(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(a=p.last,a!==null?a.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=et(),r.sibling=null,a=ct.current,tt(ct,c?a&1|2:a&1),r):(Ht(r),null);case 22:case 23:return Xh(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(xn&1073741824)!==0&&(Ht(r),r.subtreeFlags&6&&(r.flags|=8192)):Ht(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function M0(n,r){switch(oh(r),r.tag){case 1:return hn(r.type)&&Kl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ao(),rt(cn),rt(qt),_h(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return yh(r),null;case 13:if(rt(ct),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));ro()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return rt(ct),null;case 4:return ao(),null;case 10:return dh(r.type._context),null;case 22:case 23:return Xh(),null;case 24:return null;default:return null}}var fu=!1,Kt=!1,j0=typeof WeakSet=="function"?WeakSet:Set,ae=null;function uo(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){pt(n,r,c)}else a.current=null}function Fh(n,r,a){try{a()}catch(c){pt(n,r,c)}}var Vm=!1;function F0(n,r){if(Xc=os,n=dp(),$c(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var _=0,S=-1,N=-1,F=0,Q=0,J=n,G=null;t:for(;;){for(var ie;J!==a||d!==0&&J.nodeType!==3||(S=_+d),J!==p||c!==0&&J.nodeType!==3||(N=_+c),J.nodeType===3&&(_+=J.nodeValue.length),(ie=J.firstChild)!==null;)G=J,J=ie;for(;;){if(J===n)break t;if(G===a&&++F===d&&(S=_),G===p&&++Q===c&&(N=_),(ie=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=ie}a=S===-1||N===-1?null:{start:S,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jc={focusedElem:n,selectionRange:a},os=!1,ae=r;ae!==null;)if(r=ae,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ae=n;else for(;ae!==null;){r=ae;try{var ce=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var fe=ce.memoizedProps,vt=ce.memoizedState,M=r.stateNode,D=M.getSnapshotBeforeUpdate(r.elementType===r.type?fe:Jn(r.type,fe),vt);M.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var j=r.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){pt(r,r.return,Z)}if(n=r.sibling,n!==null){n.return=r.return,ae=n;break}ae=r.return}return ce=Vm,Vm=!1,ce}function Ca(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Fh(r,a,p)}d=d.next}while(d!==c)}}function pu(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Uh(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Lm(n){var r=n.alternate;r!==null&&(n.alternate=null,Lm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[fr],delete r[ya],delete r[nh],delete r[E0],delete r[T0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Om(n){return n.tag===5||n.tag===3||n.tag===4}function Mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Om(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Wl));else if(c!==4&&(n=n.child,n!==null))for(zh(n,r,a),n=n.sibling;n!==null;)zh(n,r,a),n=n.sibling}function Bh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Bh(n,r,a),n=n.sibling;n!==null;)Bh(n,r,a),n=n.sibling}var jt=null,Zn=!1;function ms(n,r,a){for(a=a.child;a!==null;)jm(n,r,a),a=a.sibling}function jm(n,r,a){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Hs,a)}catch{}switch(a.tag){case 5:Kt||uo(a,r);case 6:var c=jt,d=Zn;jt=null,ms(n,r,a),jt=c,Zn=d,jt!==null&&(Zn?(n=jt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):jt.removeChild(a.stateNode));break;case 18:jt!==null&&(Zn?(n=jt,a=a.stateNode,n.nodeType===8?th(n.parentNode,a):n.nodeType===1&&th(n,a),Gn(n)):th(jt,a.stateNode));break;case 4:c=jt,d=Zn,jt=a.stateNode.containerInfo,Zn=!0,ms(n,r,a),jt=c,Zn=d;break;case 0:case 11:case 14:case 15:if(!Kt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&Fh(a,r,_),d=d.next}while(d!==c)}ms(n,r,a);break;case 1:if(!Kt&&(uo(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){pt(a,r,S)}ms(n,r,a);break;case 21:ms(n,r,a);break;case 22:a.mode&1?(Kt=(c=Kt)||a.memoizedState!==null,ms(n,r,a),Kt=c):ms(n,r,a);break;default:ms(n,r,a)}}function Fm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new j0),r.forEach(function(c){var d=G0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function er(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,_=r,S=_;e:for(;S!==null;){switch(S.tag){case 5:jt=S.stateNode,Zn=!1;break e;case 3:jt=S.stateNode.containerInfo,Zn=!0;break e;case 4:jt=S.stateNode.containerInfo,Zn=!0;break e}S=S.return}if(jt===null)throw Error(t(160));jm(p,_,d),jt=null,Zn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(F){pt(d,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Um(r,n),r=r.sibling}function Um(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(er(r,n),gr(n),c&4){try{Ca(3,n,n.return),pu(3,n)}catch(fe){pt(n,n.return,fe)}try{Ca(5,n,n.return)}catch(fe){pt(n,n.return,fe)}}break;case 1:er(r,n),gr(n),c&512&&a!==null&&uo(a,a.return);break;case 5:if(er(r,n),gr(n),c&512&&a!==null&&uo(a,a.return),n.flags&32){var d=n.stateNode;try{Jr(d,"")}catch(fe){pt(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,_=a!==null?a.memoizedProps:p,S=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&Ee(d,p),Go(S,_);var F=Go(S,p);for(_=0;_<N.length;_+=2){var Q=N[_],J=N[_+1];Q==="style"?Wo(d,J):Q==="dangerouslySetInnerHTML"?$o(d,J):Q==="children"?Jr(d,J):me(d,Q,J,F)}switch(S){case"input":De(d,p);break;case"textarea":ft(d,p);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ie=p.value;ie!=null?ot(d,!!p.multiple,ie,!1):G!==!!p.multiple&&(p.defaultValue!=null?ot(d,!!p.multiple,p.defaultValue,!0):ot(d,!!p.multiple,p.multiple?[]:"",!1))}d[ya]=p}catch(fe){pt(n,n.return,fe)}}break;case 6:if(er(r,n),gr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(fe){pt(n,n.return,fe)}}break;case 3:if(er(r,n),gr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Gn(r.containerInfo)}catch(fe){pt(n,n.return,fe)}break;case 4:er(r,n),gr(n);break;case 13:er(r,n),gr(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Wh=et())),c&4&&Fm(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(Kt=(F=Kt)||Q,er(r,n),Kt=F):er(r,n),gr(n),c&8192){if(F=n.memoizedState!==null,(n.stateNode.isHidden=F)&&!Q&&(n.mode&1)!==0)for(ae=n,Q=n.child;Q!==null;){for(J=ae=Q;ae!==null;){switch(G=ae,ie=G.child,G.tag){case 0:case 11:case 14:case 15:Ca(4,G,G.return);break;case 1:uo(G,G.return);var ce=G.stateNode;if(typeof ce.componentWillUnmount=="function"){c=G,a=G.return;try{r=c,ce.props=r.memoizedProps,ce.state=r.memoizedState,ce.componentWillUnmount()}catch(fe){pt(c,a,fe)}}break;case 5:uo(G,G.return);break;case 22:if(G.memoizedState!==null){$m(J);continue}}ie!==null?(ie.return=G,ae=ie):$m(J)}Q=Q.sibling}e:for(Q=null,J=n;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,F?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=J.stateNode,N=J.memoizedProps.style,_=N!=null&&N.hasOwnProperty("display")?N.display:null,S.style.display=qo("display",_))}catch(fe){pt(n,n.return,fe)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=F?"":J.memoizedProps}catch(fe){pt(n,n.return,fe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:er(r,n),gr(n),c&4&&Fm(n);break;case 21:break;default:er(r,n),gr(n)}}function gr(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Om(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Jr(d,""),c.flags&=-33);var p=Mm(n);Bh(n,p,d);break;case 3:case 4:var _=c.stateNode.containerInfo,S=Mm(n);zh(n,S,_);break;default:throw Error(t(161))}}catch(N){pt(n,n.return,N)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function U0(n,r,a){ae=n,zm(n)}function zm(n,r,a){for(var c=(n.mode&1)!==0;ae!==null;){var d=ae,p=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||fu;if(!_){var S=d.alternate,N=S!==null&&S.memoizedState!==null||Kt;S=fu;var F=Kt;if(fu=_,(Kt=N)&&!F)for(ae=d;ae!==null;)_=ae,N=_.child,_.tag===22&&_.memoizedState!==null?qm(d):N!==null?(N.return=_,ae=N):qm(d);for(;p!==null;)ae=p,zm(p),p=p.sibling;ae=d,fu=S,Kt=F}Bm(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ae=p):Bm(n)}}function Bm(n){for(;ae!==null;){var r=ae;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Kt||pu(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Kt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Jn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&$p(r,p,c);break;case 3:var _=r.updateQueue;if(_!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}$p(r,_,a)}break;case 5:var S=r.stateNode;if(a===null&&r.flags&4){a=S;var N=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var Q=F.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&Gn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Kt||r.flags&512&&Uh(r)}catch(G){pt(r,r.return,G)}}if(r===n){ae=null;break}if(a=r.sibling,a!==null){a.return=r.return,ae=a;break}ae=r.return}}function $m(n){for(;ae!==null;){var r=ae;if(r===n){ae=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ae=a;break}ae=r.return}}function qm(n){for(;ae!==null;){var r=ae;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{pu(4,r)}catch(N){pt(r,a,N)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(N){pt(r,d,N)}}var p=r.return;try{Uh(r)}catch(N){pt(r,p,N)}break;case 5:var _=r.return;try{Uh(r)}catch(N){pt(r,_,N)}}}catch(N){pt(r,r.return,N)}if(r===n){ae=null;break}var S=r.sibling;if(S!==null){S.return=r.return,ae=S;break}ae=r.return}}var z0=Math.ceil,mu=oe.ReactCurrentDispatcher,$h=oe.ReactCurrentOwner,Vn=oe.ReactCurrentBatchConfig,$e=0,Dt=null,Tt=null,Ft=0,xn=0,co=cs(0),Ct=0,Ra=null,oi=0,gu=0,qh=0,Na=null,fn=null,Wh=0,ho=1/0,Fr=null,yu=!1,Hh=null,gs=null,vu=!1,ys=null,_u=0,Pa=0,Kh=null,wu=-1,Eu=0;function sn(){return($e&6)!==0?et():wu!==-1?wu:wu=et()}function vs(n){return(n.mode&1)===0?1:($e&2)!==0&&Ft!==0?Ft&-Ft:I0.transition!==null?(Eu===0&&(Eu=Gs()),Eu):(n=je,n!==0||(n=window.event,n=n===void 0?16:ia(n.type)),n)}function tr(n,r,a,c){if(50<Pa)throw Pa=0,Kh=null,Error(t(185));ns(n,a,c),(($e&2)===0||n!==Dt)&&(n===Dt&&(($e&2)===0&&(gu|=a),Ct===4&&_s(n,Ft)),pn(n,c),a===1&&$e===0&&(r.mode&1)===0&&(ho=et()+500,Ql&&ds()))}function pn(n,r){var a=n.callbackNode;kr(n,r);var c=Ks(n,n===Dt?Ft:0);if(c===0)a!==null&&ea(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&ea(a),r===1)n.tag===0?x0(Hm.bind(null,n)):Pp(Hm.bind(null,n)),_0(function(){($e&6)===0&&ds()}),a=null;else{switch(ss(c)){case 1:a=Ws;break;case 4:a=Zr;break;case 16:a=kn;break;case 536870912:a=El;break;default:a=kn}a=eg(a,Wm.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function Wm(n,r){if(wu=-1,Eu=0,($e&6)!==0)throw Error(t(327));var a=n.callbackNode;if(fo()&&n.callbackNode!==a)return null;var c=Ks(n,n===Dt?Ft:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=Tu(n,c);else{r=c;var d=$e;$e|=2;var p=Gm();(Dt!==n||Ft!==r)&&(Fr=null,ho=et()+500,li(n,r));do try{q0();break}catch(S){Km(n,S)}while(!0);hh(),mu.current=p,$e=d,Tt!==null?r=0:(Dt=null,Ft=0,r=Ct)}if(r!==0){if(r===2&&(d=vn(n),d!==0&&(c=d,r=Gh(n,d))),r===1)throw a=Ra,li(n,0),_s(n,c),pn(n,et()),a;if(r===6)_s(n,c);else{if(d=n.current.alternate,(c&30)===0&&!B0(d)&&(r=Tu(n,c),r===2&&(p=vn(n),p!==0&&(c=p,r=Gh(n,p))),r===1))throw a=Ra,li(n,0),_s(n,c),pn(n,et()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:ui(n,fn,Fr);break;case 3:if(_s(n,c),(c&130023424)===c&&(r=Wh+500-et(),10<r)){if(Ks(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){sn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=eh(ui.bind(null,n,fn,Fr),r);break}ui(n,fn,Fr);break;case 4:if(_s(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var _=31-tn(c);p=1<<_,_=r[_],_>d&&(d=_),c&=~p}if(c=d,c=et()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*z0(c/1960))-c,10<c){n.timeoutHandle=eh(ui.bind(null,n,fn,Fr),c);break}ui(n,fn,Fr);break;case 5:ui(n,fn,Fr);break;default:throw Error(t(329))}}}return pn(n,et()),n.callbackNode===a?Wm.bind(null,n):null}function Gh(n,r){var a=Na;return n.current.memoizedState.isDehydrated&&(li(n,r).flags|=256),n=Tu(n,r),n!==2&&(r=fn,fn=a,r!==null&&Qh(r)),n}function Qh(n){fn===null?fn=n:fn.push.apply(fn,n)}function B0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Yn(p(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function _s(n,r){for(r&=~qh,r&=~gu,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-tn(r),c=1<<a;n[a]=-1,r&=~c}}function Hm(n){if(($e&6)!==0)throw Error(t(327));fo();var r=Ks(n,0);if((r&1)===0)return pn(n,et()),null;var a=Tu(n,r);if(n.tag!==0&&a===2){var c=vn(n);c!==0&&(r=c,a=Gh(n,c))}if(a===1)throw a=Ra,li(n,0),_s(n,r),pn(n,et()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,ui(n,fn,Fr),pn(n,et()),null}function Yh(n,r){var a=$e;$e|=1;try{return n(r)}finally{$e=a,$e===0&&(ho=et()+500,Ql&&ds())}}function ai(n){ys!==null&&ys.tag===0&&($e&6)===0&&fo();var r=$e;$e|=1;var a=Vn.transition,c=je;try{if(Vn.transition=null,je=1,n)return n()}finally{je=c,Vn.transition=a,$e=r,($e&6)===0&&ds()}}function Xh(){xn=co.current,rt(co)}function li(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,v0(a)),Tt!==null)for(a=Tt.return;a!==null;){var c=a;switch(oh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Kl();break;case 3:ao(),rt(cn),rt(qt),_h();break;case 5:yh(c);break;case 4:ao();break;case 13:rt(ct);break;case 19:rt(ct);break;case 10:dh(c.type._context);break;case 22:case 23:Xh()}a=a.return}if(Dt=n,Tt=n=ws(n.current,null),Ft=xn=r,Ct=0,Ra=null,qh=gu=oi=0,fn=Na=null,ri!==null){for(r=0;r<ri.length;r++)if(a=ri[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var _=p.next;p.next=d,c.next=_}a.pending=c}ri=null}return n}function Km(n,r){do{var a=Tt;try{if(hh(),iu.current=uu,ou){for(var c=ht.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}ou=!1}if(ii=0,bt=kt=ht=null,xa=!1,Ia=0,$h.current=null,a===null||a.return===null){Ct=1,Ra=r,Tt=null;break}e:{var p=n,_=a.return,S=a,N=r;if(r=Ft,S.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var F=N,Q=S,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ie=vm(_);if(ie!==null){ie.flags&=-257,_m(ie,_,S,p,r),ie.mode&1&&ym(p,F,r),r=ie,N=F;var ce=r.updateQueue;if(ce===null){var fe=new Set;fe.add(N),r.updateQueue=fe}else ce.add(N);break e}else{if((r&1)===0){ym(p,F,r),Jh();break e}N=Error(t(426))}}else if(lt&&S.mode&1){var vt=vm(_);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),_m(vt,_,S,p,r),uh(lo(N,S));break e}}p=N=lo(N,S),Ct!==4&&(Ct=2),Na===null?Na=[p]:Na.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=mm(p,N,r);Bp(p,M);break e;case 1:S=N;var D=p.type,j=p.stateNode;if((p.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(gs===null||!gs.has(j)))){p.flags|=65536,r&=-r,p.lanes|=r;var Z=gm(p,S,r);Bp(p,Z);break e}}p=p.return}while(p!==null)}Ym(a)}catch(ye){r=ye,Tt===a&&a!==null&&(Tt=a=a.return);continue}break}while(!0)}function Gm(){var n=mu.current;return mu.current=uu,n===null?uu:n}function Jh(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Dt===null||(oi&268435455)===0&&(gu&268435455)===0||_s(Dt,Ft)}function Tu(n,r){var a=$e;$e|=2;var c=Gm();(Dt!==n||Ft!==r)&&(Fr=null,li(n,r));do try{$0();break}catch(d){Km(n,d)}while(!0);if(hh(),$e=a,mu.current=c,Tt!==null)throw Error(t(261));return Dt=null,Ft=0,Ct}function $0(){for(;Tt!==null;)Qm(Tt)}function q0(){for(;Tt!==null&&!_l();)Qm(Tt)}function Qm(n){var r=Zm(n.alternate,n,xn);n.memoizedProps=n.pendingProps,r===null?Ym(n):Tt=r,$h.current=null}function Ym(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=O0(a,r,xn),a!==null){Tt=a;return}}else{if(a=M0(a,r),a!==null){a.flags&=32767,Tt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,Tt=null;return}}if(r=r.sibling,r!==null){Tt=r;return}Tt=r=n}while(r!==null);Ct===0&&(Ct=5)}function ui(n,r,a){var c=je,d=Vn.transition;try{Vn.transition=null,je=1,W0(n,r,a,c)}finally{Vn.transition=d,je=c}return null}function W0(n,r,a,c){do fo();while(ys!==null);if(($e&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Ye(n,p),n===Dt&&(Tt=Dt=null,Ft=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||vu||(vu=!0,eg(kn,function(){return fo(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Vn.transition,Vn.transition=null;var _=je;je=1;var S=$e;$e|=4,$h.current=null,F0(n,a),Um(a,n),h0(Jc),os=!!Xc,Jc=Xc=null,n.current=a,U0(a),Lc(),$e=S,je=_,Vn.transition=p}else n.current=a;if(vu&&(vu=!1,ys=n,_u=d),p=n.pendingLanes,p===0&&(gs=null),Tl(a.stateNode),pn(n,et()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(yu)throw yu=!1,n=Hh,Hh=null,n;return(_u&1)!==0&&n.tag!==0&&fo(),p=n.pendingLanes,(p&1)!==0?n===Kh?Pa++:(Pa=0,Kh=n):Pa=0,ds(),null}function fo(){if(ys!==null){var n=ss(_u),r=Vn.transition,a=je;try{if(Vn.transition=null,je=16>n?16:n,ys===null)var c=!1;else{if(n=ys,ys=null,_u=0,($e&6)!==0)throw Error(t(331));var d=$e;for($e|=4,ae=n.current;ae!==null;){var p=ae,_=p.child;if((ae.flags&16)!==0){var S=p.deletions;if(S!==null){for(var N=0;N<S.length;N++){var F=S[N];for(ae=F;ae!==null;){var Q=ae;switch(Q.tag){case 0:case 11:case 15:Ca(8,Q,p)}var J=Q.child;if(J!==null)J.return=Q,ae=J;else for(;ae!==null;){Q=ae;var G=Q.sibling,ie=Q.return;if(Lm(Q),Q===F){ae=null;break}if(G!==null){G.return=ie,ae=G;break}ae=ie}}}var ce=p.alternate;if(ce!==null){var fe=ce.child;if(fe!==null){ce.child=null;do{var vt=fe.sibling;fe.sibling=null,fe=vt}while(fe!==null)}}ae=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,ae=_;else e:for(;ae!==null;){if(p=ae,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Ca(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,ae=M;break e}ae=p.return}}var D=n.current;for(ae=D;ae!==null;){_=ae;var j=_.child;if((_.subtreeFlags&2064)!==0&&j!==null)j.return=_,ae=j;else e:for(_=D;ae!==null;){if(S=ae,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:pu(9,S)}}catch(ye){pt(S,S.return,ye)}if(S===_){ae=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,ae=Z;break e}ae=S.return}}if($e=d,ds(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Hs,n)}catch{}c=!0}return c}finally{je=a,Vn.transition=r}}return!1}function Xm(n,r,a){r=lo(a,r),r=mm(n,r,1),n=ps(n,r,1),r=sn(),n!==null&&(ns(n,1,r),pn(n,r))}function pt(n,r,a){if(n.tag===3)Xm(n,n,a);else for(;r!==null;){if(r.tag===3){Xm(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(gs===null||!gs.has(c))){n=lo(a,n),n=gm(r,n,1),r=ps(r,n,1),n=sn(),r!==null&&(ns(r,1,n),pn(r,n));break}}r=r.return}}function H0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=sn(),n.pingedLanes|=n.suspendedLanes&a,Dt===n&&(Ft&a)===a&&(Ct===4||Ct===3&&(Ft&130023424)===Ft&&500>et()-Wh?li(n,0):qh|=a),pn(n,r)}function Jm(n,r){r===0&&((n.mode&1)===0?r=1:(r=Li,Li<<=1,(Li&130023424)===0&&(Li=4194304)));var a=sn();n=Or(n,r),n!==null&&(ns(n,r,a),pn(n,a))}function K0(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Jm(n,a)}function G0(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),Jm(n,a)}var Zm;Zm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||cn.current)dn=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return dn=!1,L0(n,r,a);dn=(n.flags&131072)!==0}else dn=!1,lt&&(r.flags&1048576)!==0&&bp(r,Xl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;du(n,r),n=r.pendingProps;var d=eo(r,qt.current);oo(r,a),d=Th(null,r,c,n,d,a);var p=xh();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,hn(c)?(p=!0,Gl(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,mh(r),d.updater=cu,r.stateNode=d,d._reactInternals=r,Rh(r,c,n,a),r=Dh(null,r,c,!0,p,a)):(r.tag=0,lt&&p&&ih(r),rn(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(du(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=Y0(c),n=Jn(c,n),d){case 0:r=bh(null,r,c,n,a);break e;case 1:r=Sm(null,r,c,n,a);break e;case 11:r=wm(null,r,c,n,a);break e;case 14:r=Em(null,r,c,Jn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Jn(c,d),bh(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Jn(c,d),Sm(n,r,c,d,a);case 3:e:{if(Am(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,d=p.element,zp(n,r),ru(r,c,null,a);var _=r.memoizedState;if(c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=lo(Error(t(423)),r),r=km(n,r,c,a,d);break e}else if(c!==d){d=lo(Error(t(424)),r),r=km(n,r,c,a,d);break e}else for(Tn=us(r.stateNode.containerInfo.firstChild),En=r,lt=!0,Xn=null,a=Fp(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ro(),c===d){r=jr(n,r,a);break e}rn(n,r,c,a)}r=r.child}return r;case 5:return qp(r),n===null&&lh(r),c=r.type,d=r.pendingProps,p=n!==null?n.memoizedProps:null,_=d.children,Zc(c,d)?_=null:p!==null&&Zc(c,p)&&(r.flags|=32),Im(n,r),rn(n,r,_,a),r.child;case 6:return n===null&&lh(r),null;case 13:return Cm(n,r,a);case 4:return gh(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=so(r,null,c,a):rn(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Jn(c,d),wm(n,r,c,d,a);case 7:return rn(n,r,r.pendingProps,a),r.child;case 8:return rn(n,r,r.pendingProps.children,a),r.child;case 12:return rn(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,_=d.value,tt(eu,c._currentValue),c._currentValue=_,p!==null)if(Yn(p.value,_)){if(p.children===d.children&&!cn.current){r=jr(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var S=p.dependencies;if(S!==null){_=p.child;for(var N=S.firstContext;N!==null;){if(N.context===c){if(p.tag===1){N=Mr(-1,a&-a),N.tag=2;var F=p.updateQueue;if(F!==null){F=F.shared;var Q=F.pending;Q===null?N.next=N:(N.next=Q.next,Q.next=N),F.pending=N}}p.lanes|=a,N=p.alternate,N!==null&&(N.lanes|=a),fh(p.return,a,r),S.lanes|=a;break}N=N.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(t(341));_.lanes|=a,S=_.alternate,S!==null&&(S.lanes|=a),fh(_,a,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}rn(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,oo(r,a),d=bn(d),c=c(d),r.flags|=1,rn(n,r,c,a),r.child;case 14:return c=r.type,d=Jn(c,r.pendingProps),d=Jn(c.type,d),Em(n,r,c,d,a);case 15:return Tm(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Jn(c,d),du(n,r),r.tag=1,hn(c)?(n=!0,Gl(r)):n=!1,oo(r,a),fm(r,c,d),Rh(r,c,d,a),Dh(null,r,c,!0,n,a);case 19:return Nm(n,r,a);case 22:return xm(n,r,a)}throw Error(t(156,r.tag))};function eg(n,r){return Di(n,r)}function Q0(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(n,r,a,c){return new Q0(n,r,a,c)}function Zh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Y0(n){if(typeof n=="function")return Zh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===C)return 11;if(n===Oe)return 14}return 2}function ws(n,r){var a=n.alternate;return a===null?(a=Ln(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function xu(n,r,a,c,d,p){var _=2;if(c=n,typeof n=="function")Zh(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case R:return ci(a.children,d,p,r);case x:_=8,d|=8;break;case A:return n=Ln(12,a,r,d|2),n.elementType=A,n.lanes=p,n;case I:return n=Ln(13,a,r,d),n.elementType=I,n.lanes=p,n;case Pe:return n=Ln(19,a,r,d),n.elementType=Pe,n.lanes=p,n;case Me:return Iu(a,d,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:_=10;break e;case V:_=9;break e;case C:_=11;break e;case Oe:_=14;break e;case it:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=Ln(_,a,r,d),r.elementType=n,r.type=c,r.lanes=p,r}function ci(n,r,a,c){return n=Ln(7,n,c,r),n.lanes=a,n}function Iu(n,r,a,c){return n=Ln(22,n,c,r),n.elementType=Me,n.lanes=a,n.stateNode={isHidden:!1},n}function ed(n,r,a){return n=Ln(6,n,null,r),n.lanes=a,n}function td(n,r,a){return r=Ln(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function X0(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ts(0),this.expirationTimes=ts(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function nd(n,r,a,c,d,p,_,S,N){return n=new X0(n,r,a,S,N),r===1?(r=1,p===!0&&(r|=8)):r=0,p=Ln(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},mh(p),n}function J0(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ge,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function tg(n){if(!n)return hs;n=n._reactInternals;e:{if($n(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(hn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(hn(a))return Rp(n,a,r)}return r}function ng(n,r,a,c,d,p,_,S,N){return n=nd(a,c,!0,n,d,p,_,S,N),n.context=tg(null),a=n.current,c=sn(),d=vs(a),p=Mr(c,d),p.callback=r??null,ps(a,p,d),n.current.lanes=d,ns(n,d,c),pn(n,c),n}function Su(n,r,a,c){var d=r.current,p=sn(),_=vs(d);return a=tg(a),r.context===null?r.context=a:r.pendingContext=a,r=Mr(p,_),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=ps(d,r,_),n!==null&&(tr(n,d,_,p),nu(n,d,_)),_}function Au(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function rg(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function rd(n,r){rg(n,r),(n=n.alternate)&&rg(n,r)}function Z0(){return null}var sg=typeof reportError=="function"?reportError:function(n){console.error(n)};function sd(n){this._internalRoot=n}ku.prototype.render=sd.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Su(n,r,null,null)},ku.prototype.unmount=sd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;ai(function(){Su(null,n,null,null)}),r[br]=null}};function ku(n){this._internalRoot=n}ku.prototype.unstable_scheduleHydration=function(n){if(n){var r=kl();n={blockedOn:null,target:n,priority:r};for(var a=0;a<ur.length&&r!==0&&r<ur[a].priority;a++);ur.splice(a,0,n),a===0&&Nl(n)}};function id(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Cu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ig(){}function ew(n,r,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var F=Au(_);p.call(F)}}var _=ng(r,c,n,0,null,!1,!1,"",ig);return n._reactRootContainer=_,n[br]=_.current,ma(n.nodeType===8?n.parentNode:n),ai(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var F=Au(N);S.call(F)}}var N=nd(n,0,!1,null,null,!1,!1,"",ig);return n._reactRootContainer=N,n[br]=N.current,ma(n.nodeType===8?n.parentNode:n),ai(function(){Su(r,N,a,c)}),N}function Ru(n,r,a,c,d){var p=a._reactRootContainer;if(p){var _=p;if(typeof d=="function"){var S=d;d=function(){var N=Au(_);S.call(N)}}Su(r,_,n,d)}else _=ew(a,r,n,d,c);return Au(_)}Sl=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=es(r.pendingLanes);a!==0&&(rs(r,a|1),pn(r,et()),($e&6)===0&&(ho=et()+500,ds()))}break;case 13:ai(function(){var c=Or(n,1);if(c!==null){var d=sn();tr(c,n,1,d)}}),rd(n,1)}},Oi=function(n){if(n.tag===13){var r=Or(n,134217728);if(r!==null){var a=sn();tr(r,n,134217728,a)}rd(n,134217728)}},Al=function(n){if(n.tag===13){var r=vs(n),a=Or(n,r);if(a!==null){var c=sn();tr(a,n,r,c)}rd(n,r)}},kl=function(){return je},Cl=function(n,r){var a=je;try{return je=n,r()}finally{je=a}},ki=function(n,r,a){switch(r){case"input":if(De(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=Hl(c);if(!d)throw Error(t(90));Xr(c),De(c,d)}}}break;case"textarea":ft(n,a);break;case"select":r=a.value,r!=null&&ot(n,!!a.multiple,r,!1)}},zs=Yh,Yo=ai;var tw={usingClientEntryPoint:!1,Events:[va,Ji,Hl,ar,Qo,Yh]},ba={findFiberByHostInstance:Zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nw={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Zo(n),n===null?null:n.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||Z0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nu.isDisabled&&Nu.supportsFiber)try{Hs=Nu.inject(nw),yn=Nu}catch{}}return mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tw,mn.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(r))throw Error(t(200));return J0(n,r,null,a)},mn.createRoot=function(n,r){if(!id(n))throw Error(t(299));var a=!1,c="",d=sg;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=nd(n,1,!1,null,null,a,!1,c,d),n[br]=r.current,ma(n.nodeType===8?n.parentNode:n),new sd(r)},mn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Zo(r),n=n===null?null:n.stateNode,n},mn.flushSync=function(n){return ai(n)},mn.hydrate=function(n,r,a){if(!Cu(r))throw Error(t(200));return Ru(null,n,r,!0,a)},mn.hydrateRoot=function(n,r,a){if(!id(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",_=sg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),r=ng(r,null,n,1,a??null,d,!1,p,_),n[br]=r.current,ma(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new ku(r)},mn.render=function(n,r,a){if(!Cu(r))throw Error(t(200));return Ru(null,n,r,!1,a)},mn.unmountComponentAtNode=function(n){if(!Cu(n))throw Error(t(40));return n._reactRootContainer?(ai(function(){Ru(null,null,n,!1,function(){n._reactRootContainer=null,n[br]=null})}),!0):!1},mn.unstable_batchedUpdates=Yh,mn.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!Cu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ru(n,r,a,!1,c)},mn.version="18.3.1-next-f1338f8080-20240426",mn}var fg;function dw(){if(fg)return ld.exports;fg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ld.exports=hw(),ld.exports}var pg;function fw(){if(pg)return Pu;pg=1;var s=dw();return Pu.createRoot=s.createRoot,Pu.hydrateRoot=s.hydrateRoot,Pu}var pw=fw(),mg={};const My=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},mw=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},jy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,w=g?s[o+2]:0,T=u>>2,k=(u&3)<<4|m>>4;let b=(m&15)<<2|w>>6,U=w&63;g||(U=64,h||(b=64)),i.push(t[T],t[k],t[b],t[U])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(My(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):mw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const w=o<s.length?t[s.charAt(o)]:64;++o;const k=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||w==null||k==null)throw new gw;const b=u<<2|m>>4;if(i.push(b),w!==64){const U=m<<4&240|w>>2;if(i.push(U),k!==64){const q=w<<6&192|k;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class gw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yw=function(s){const e=My(s);return jy.encodeByteArray(e,!0)},Gu=function(s){return yw(s).replace(/\./g,"")},Fy=function(s){try{return jy.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _w=()=>vw().__FIREBASE_DEFAULTS__,ww=()=>{if(typeof process>"u"||typeof mg>"u")return;const s=mg.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Ew=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Fy(s[1]);return e&&JSON.parse(e)},fc=()=>{try{return _w()||ww()||Ew()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Uy=s=>{var e,t;return(t=(e=fc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},Tw=s=>{const e=Uy(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},zy=()=>{var s;return(s=fc())===null||s===void 0?void 0:s.config},By=s=>{var e;return(e=fc())===null||e===void 0?void 0:e[`_${s}`]};class xw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Iw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Gu(JSON.stringify(t)),Gu(JSON.stringify(h)),""].join(".")}function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function Aw(){var s;const e=(s=fc())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Cw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Rw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nw(){const s=Zt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Pw(){return!Aw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bw(){try{return typeof indexedDB=="object"}catch{return!1}}function Dw(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}const Vw="FirebaseError";class Gr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Vw,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Lw(u,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Gr(o,m,i)}}function Lw(s,e){return s.replace(Ow,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Ow=/\{\$([^}]+)}/g;function Mw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Qa(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const u=s[o],h=e[o];if(gg(u)&&gg(h)){if(!Qa(u,h))return!1}else if(u!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function gg(s){return s!==null&&typeof s=="object"}function il(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function La(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Oa(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function jw(s,e){const t=new Fw(s,e);return t.subscribe.bind(t)}class Fw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Uw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=hd),o.error===void 0&&(o.error=hd),o.complete===void 0&&(o.complete=hd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uw(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function hd(){}function gt(s){return s&&s._delegate?s._delegate:s}class gi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const hi="[DEFAULT]";class zw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new xw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($w(e))try{this.getOrInitializeService({instanceIdentifier:hi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hi){return this.instances.has(e)}getOptions(e=hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Bw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hi){return this.component?this.component.multipleInstances?e:hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bw(s){return s===hi?void 0:s}function $w(s){return s.instantiationMode==="EAGER"}class qw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Fe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Fe||(Fe={}));const Ww={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},Hw=Fe.INFO,Kw={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},Gw=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Kw[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jd{constructor(e){this.name=e,this._logLevel=Hw,this._logHandler=Gw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ww[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const Qw=(s,e)=>e.some(t=>s instanceof t);let yg,vg;function Yw(){return yg||(yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xw(){return vg||(vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $y=new WeakMap,Td=new WeakMap,qy=new WeakMap,dd=new WeakMap,Zd=new WeakMap;function Jw(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(Rs(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&$y.set(t,s)}).catch(()=>{}),Zd.set(e,s),e}function Zw(s){if(Td.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Td.set(s,e)}let xd={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Td.get(s);if(e==="objectStoreNames")return s.objectStoreNames||qy.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function eE(s){xd=s(xd)}function tE(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(fd(this),e,...t);return qy.set(i,e.sort?e.sort():[e]),Rs(i)}:Xw().includes(s)?function(...e){return s.apply(fd(this),e),Rs($y.get(this))}:function(...e){return Rs(s.apply(fd(this),e))}}function nE(s){return typeof s=="function"?tE(s):(s instanceof IDBTransaction&&Zw(s),Qw(s,Yw())?new Proxy(s,xd):s)}function Rs(s){if(s instanceof IDBRequest)return Jw(s);if(dd.has(s))return dd.get(s);const e=nE(s);return e!==s&&(dd.set(s,e),Zd.set(e,s)),e}const fd=s=>Zd.get(s);function rE(s,e,{blocked:t,upgrade:i,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),m=Rs(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Rs(h.result),g.oldVersion,g.newVersion,Rs(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",w=>o(w.oldVersion,w.newVersion,w))}).catch(()=>{}),m}const sE=["get","getKey","getAll","getAllKeys","count"],iE=["put","add","delete","clear"],pd=new Map;function _g(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=iE.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||sE.includes(t)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let w=g.store;return i&&(w=w.index(m.shift())),(await Promise.all([w[t](...m),o&&g.done]))[0]};return pd.set(e,u),u}eE(s=>({...s,get:(e,t,i)=>_g(e,t)||s.get(e,t,i),has:(e,t)=>!!_g(e,t)||s.has(e,t)}));class oE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function aE(s){const e=s.getComponent();return e?.type==="VERSION"}const Id="@firebase/app",wg="0.10.13";const qr=new Jd("@firebase/app"),lE="@firebase/app-compat",uE="@firebase/analytics-compat",cE="@firebase/analytics",hE="@firebase/app-check-compat",dE="@firebase/app-check",fE="@firebase/auth",pE="@firebase/auth-compat",mE="@firebase/database",gE="@firebase/data-connect",yE="@firebase/database-compat",vE="@firebase/functions",_E="@firebase/functions-compat",wE="@firebase/installations",EE="@firebase/installations-compat",TE="@firebase/messaging",xE="@firebase/messaging-compat",IE="@firebase/performance",SE="@firebase/performance-compat",AE="@firebase/remote-config",kE="@firebase/remote-config-compat",CE="@firebase/storage",RE="@firebase/storage-compat",NE="@firebase/firestore",PE="@firebase/vertexai-preview",bE="@firebase/firestore-compat",DE="firebase",VE="10.14.1";const Sd="[DEFAULT]",LE={[Id]:"fire-core",[lE]:"fire-core-compat",[cE]:"fire-analytics",[uE]:"fire-analytics-compat",[dE]:"fire-app-check",[hE]:"fire-app-check-compat",[fE]:"fire-auth",[pE]:"fire-auth-compat",[mE]:"fire-rtdb",[gE]:"fire-data-connect",[yE]:"fire-rtdb-compat",[vE]:"fire-fn",[_E]:"fire-fn-compat",[wE]:"fire-iid",[EE]:"fire-iid-compat",[TE]:"fire-fcm",[xE]:"fire-fcm-compat",[IE]:"fire-perf",[SE]:"fire-perf-compat",[AE]:"fire-rc",[kE]:"fire-rc-compat",[CE]:"fire-gcs",[RE]:"fire-gcs-compat",[NE]:"fire-fst",[bE]:"fire-fst-compat",[PE]:"fire-vertex","fire-js":"fire-js",[DE]:"fire-js-all"};const Qu=new Map,OE=new Map,Ad=new Map;function Eg(s,e){try{s.container.addComponent(e)}catch(t){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function So(s){const e=s.name;if(Ad.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;Ad.set(e,s);for(const t of Qu.values())Eg(t,s);for(const t of OE.values())Eg(t,s);return!0}function ef(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Mn(s){return s.settings!==void 0}const ME={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new sl("app","Firebase",ME);class jE{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}const Mo=VE;function Wy(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Sd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ns.create("bad-app-name",{appName:String(o)});if(t||(t=zy()),!t)throw Ns.create("no-options");const u=Qu.get(o);if(u){if(Qa(t,u.options)&&Qa(i,u.config))return u;throw Ns.create("duplicate-app",{appName:o})}const h=new qw(o);for(const g of Ad.values())h.addComponent(g);const m=new jE(t,i,h);return Qu.set(o,m),m}function Hy(s=Sd){const e=Qu.get(s);if(!e&&s===Sd&&zy())return Wy();if(!e)throw Ns.create("no-app",{appName:s});return e}function Ps(s,e,t){var i;let o=(i=LE[s])!==null&&i!==void 0?i:s;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(m.join(" "));return}So(new gi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const FE="firebase-heartbeat-database",UE=1,Ya="firebase-heartbeat-store";let md=null;function Ky(){return md||(md=rE(FE,UE,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ya)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ns.create("idb-open",{originalErrorMessage:s.message})})),md}async function zE(s){try{const t=(await Ky()).transaction(Ya),i=await t.objectStore(Ya).get(Gy(s));return await t.done,i}catch(e){if(e instanceof Gr)qr.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e?.message});qr.warn(t.message)}}}async function Tg(s,e){try{const i=(await Ky()).transaction(Ya,"readwrite");await i.objectStore(Ya).put(e,Gy(s)),await i.done}catch(t){if(t instanceof Gr)qr.warn(t.message);else{const i=Ns.create("idb-set",{originalErrorMessage:t?.message});qr.warn(i.message)}}}function Gy(s){return`${s.name}!${s.options.appId}`}const BE=1024,$E=720*60*60*1e3;class qE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=xg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=$E}),this._storage.overwrite(this._heartbeatsCache))}catch(i){qr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xg(),{heartbeatsToSend:i,unsentEntries:o}=WE(this._heartbeatsCache.heartbeats),u=Gu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return qr.warn(t),""}}}function xg(){return new Date().toISOString().substring(0,10)}function WE(s,e=BE){const t=[];let i=s.slice();for(const o of s){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Ig(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ig(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class HE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bw()?Dw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Tg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Tg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ig(s){return Gu(JSON.stringify({version:2,heartbeats:s})).length}function KE(s){So(new gi("platform-logger",e=>new oE(e),"PRIVATE")),So(new gi("heartbeat",e=>new qE(e),"PRIVATE")),Ps(Id,wg,s),Ps(Id,wg,"esm2017"),Ps("fire-js","")}KE("");var GE="firebase",QE="10.14.1";Ps(GE,QE,"app");function tf(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(t[i[o]]=s[i[o]]);return t}function Qy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YE=Qy,Yy=new sl("auth","Firebase",Qy());const Yu=new Jd("@firebase/auth");function XE(s,...e){Yu.logLevel<=Fe.WARN&&Yu.warn(`Auth (${Mo}): ${s}`,...e)}function Fu(s,...e){Yu.logLevel<=Fe.ERROR&&Yu.error(`Auth (${Mo}): ${s}`,...e)}function sr(s,...e){throw nf(s,...e)}function yr(s,...e){return nf(s,...e)}function Xy(s,e,t){const i=Object.assign(Object.assign({},YE()),{[e]:t});return new sl("auth","Firebase",i).create(e,{appName:s.name})}function nr(s){return Xy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nf(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return Yy.create(s,...e)}function Se(s,e,...t){if(!s)throw nf(e,...t)}function Ur(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Fu(e),new Error(e)}function Wr(s,e){s||Ur(e)}function kd(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function JE(){return Sg()==="http:"||Sg()==="https:"}function Sg(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}function ZE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JE()||Cw()||"connection"in navigator)?navigator.onLine:!0}function eT(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=Sw()||Rw()}get(){return ZE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rf(s,e){Wr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Jy{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const nT=new ol(3e4,6e4);function Qr(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function xr(s,e,t,i,o={}){return Zy(s,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const m=il(Object.assign({key:s.config.apiKey},h)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const w=Object.assign({method:e,headers:g},u);return kw()||(w.referrerPolicy="no-referrer"),Jy.fetch()(ev(s,s.config.apiHost,t,m),w)})}async function Zy(s,e,t){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},tT),e);try{const o=new sT(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw bu(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,w]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw bu(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw bu(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw bu(s,"user-disabled",h);const T=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw Xy(s,T,w);sr(s,T)}}catch(o){if(o instanceof Gr)throw o;sr(s,"network-request-failed",{message:String(o)})}}async function jo(s,e,t,i,o={}){const u=await xr(s,e,t,i,o);return"mfaPendingCredential"in u&&sr(s,"multi-factor-auth-required",{_serverResponse:u}),u}function ev(s,e,t,i){const o=`${e}${t}?${i}`;return s.config.emulator?rf(s.config,o):`${s.config.apiScheme}://${o}`}function rT(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sT{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yr(this.auth,"network-request-failed")),nT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bu(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=yr(s,e,i);return o.customData._tokenResponse=t,o}function Ag(s){return s!==void 0&&s.enterprise!==void 0}class iT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rT(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function oT(s,e){return xr(s,"GET","/v2/recaptchaConfig",Qr(s,e))}async function aT(s,e){return xr(s,"POST","/v1/accounts:delete",e)}async function tv(s,e){return xr(s,"POST","/v1/accounts:lookup",e)}function za(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lT(s,e=!1){const t=gt(s),i=await t.getIdToken(e),o=sf(i);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:i,authTime:za(gd(o.auth_time)),issuedAtTime:za(gd(o.iat)),expirationTime:za(gd(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function gd(s){return Number(s)*1e3}function sf(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Fu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Fy(t);return o?JSON.parse(o):(Fu("Failed to decode base64 JWT payload"),null)}catch(o){return Fu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function kg(s){const e=sf(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function yi(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Gr&&uT(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function uT({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class cT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Cd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xu(s){var e;const t=s.auth,i=await s.getIdToken(),o=await yi(s,tv(t,{idToken:i}));Se(o?.users.length,t,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?nv(u.providerUserInfo):[],m=dT(s.providerData,h),g=s.isAnonymous,w=!(s.email&&u.passwordHash)&&!m?.length,T=g?w:!1,k={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Cd(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(s,k)}async function hT(s){const e=gt(s);await Xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dT(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function nv(s){return s.map(e=>{var{providerId:t}=e,i=tf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function fT(s,e){const t=await Zy(s,{},async()=>{const i=il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=ev(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Jy.fetch()(h,{method:"POST",headers:m,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pT(s,e){return xr(s,"POST","/v2/accounts:revokeToken",Qr(s,e))}class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=kg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:u}=await fT(e,t);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:u}=t,h=new _o;return i&&(Se(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return Ur("not implemented")}}function Ts(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,u=tf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Cd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await yi(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lT(this,e)}reload(){return hT(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Xu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await yi(this,aT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,u,h,m,g,w,T;const k=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,U=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,q=(h=t.photoURL)!==null&&h!==void 0?h:void 0,H=(m=t.tenantId)!==null&&m!==void 0?m:void 0,$=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,de=(w=t.createdAt)!==null&&w!==void 0?w:void 0,ne=(T=t.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:me,emailVerified:oe,isAnonymous:we,providerData:ge,stsTokenManager:R}=t;Se(me&&R,e,"internal-error");const x=_o.fromJSON(this.name,R);Se(typeof me=="string",e,"internal-error"),Ts(k,e.name),Ts(b,e.name),Se(typeof oe=="boolean",e,"internal-error"),Se(typeof we=="boolean",e,"internal-error"),Ts(U,e.name),Ts(q,e.name),Ts(H,e.name),Ts($,e.name),Ts(de,e.name),Ts(ne,e.name);const A=new zr({uid:me,auth:e,email:b,emailVerified:oe,displayName:k,isAnonymous:we,photoURL:q,phoneNumber:U,tenantId:H,stsTokenManager:x,createdAt:de,lastLoginAt:ne});return ge&&Array.isArray(ge)&&(A.providerData=ge.map(P=>Object.assign({},P))),$&&(A._redirectEventId=$),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new _o;o.updateFromServerResponse(t);const u=new zr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Xu(u),u}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?nv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new _o;m.updateFromIdToken(i);const g=new zr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Cd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,w),g}}const Cg=new Map;function Br(s){Wr(s instanceof Function,"Expected a class definition");let e=Cg.get(s);return e?(Wr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Cg.set(s,e),e)}class rv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rv.type="NONE";const Rg=rv;function Uu(s,e,t){return`firebase:${s}:${e}:${t}`}class wo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=Uu(this.userKey,o.apiKey,u),this.fullPersistenceKey=Uu("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new wo(Br(Rg),e,i);const o=(await Promise.all(t.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let u=o[0]||Br(Rg);const h=Uu(i,e.config.apiKey,e.name);let m=null;for(const w of t)try{const T=await w._get(h);if(T){const k=zr._fromJSON(e,T);w!==u&&(m=k),u=w;break}}catch{}const g=o.filter(w=>w._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new wo(u,e,i):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async w=>{if(w!==u)try{await w._remove(h)}catch{}})),new wo(u,e,i))}}function Ng(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(av(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uv(e))return"Blackberry";if(cv(e))return"Webos";if(iv(e))return"Safari";if((e.includes("chrome/")||ov(e))&&!e.includes("edge/"))return"Chrome";if(lv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function sv(s=Zt()){return/firefox\//i.test(s)}function iv(s=Zt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ov(s=Zt()){return/crios\//i.test(s)}function av(s=Zt()){return/iemobile/i.test(s)}function lv(s=Zt()){return/android/i.test(s)}function uv(s=Zt()){return/blackberry/i.test(s)}function cv(s=Zt()){return/webos/i.test(s)}function of(s=Zt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function mT(s=Zt()){var e;return of(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gT(){return Nw()&&document.documentMode===10}function hv(s=Zt()){return of(s)||lv(s)||cv(s)||uv(s)||/windows phone/i.test(s)||av(s)}function dv(s,e=[]){let t;switch(s){case"Browser":t=Ng(Zt());break;case"Worker":t=`${Ng(Zt())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mo}/${i}`}class yT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function vT(s,e={}){return xr(s,"GET","/v2/passwordPolicy",Qr(s,e))}const _T=6;class wT{constructor(e){var t,i,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:_T,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,u,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class ET{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pg(this),this.idTokenSubscription=new Pg(this),this.beforeStateQueue=new yT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Br(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tv(this,{idToken:e}),i=await zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Mn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&g?.user&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(nr(this));const t=e?gt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vT(this),t=new wT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await pT(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Br(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[Br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&XE(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Yr(s){return gt(s)}class Pg{constructor(e){this.auth=e,this.observer=null,this.addObserver=jw(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TT(s){pc=s}function fv(s){return pc.loadJS(s)}function xT(){return pc.recaptchaEnterpriseScript}function IT(){return pc.gapiScript}function ST(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const AT="recaptcha-enterprise",kT="NO_RECAPTCHA";class CT{constructor(e){this.type=AT,this.auth=Yr(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{oT(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const w=new iT(g);return u.tenantId==null?u._agentRecaptchaConfig=w:u._tenantRecaptchaConfigs[u.tenantId]=w,h(w.siteKey)}}).catch(g=>{m(g)})})}function o(u,h,m){const g=window.grecaptcha;Ag(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(w=>{h(w)}).catch(()=>{h(kT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((u,h)=>{i(this.auth).then(m=>{if(!t&&Ag(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=xT();g.length!==0&&(g+=m),fv(g).then(()=>{o(m,u,h)}).catch(w=>{h(w)})}}).catch(m=>{h(m)})})}}async function bg(s,e,t,i=!1){const o=new CT(s);let u;try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Rd(s,e,t,i){var o;if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await bg(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await bg(s,e,t,t==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function RT(s,e){const t=ef(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Qa(u,e??{}))return o;sr(o,"already-initialized")}return t.initialize({options:e})}function NT(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Br);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function PT(s,e,t){const i=Yr(s);Se(i._canInitEmulator,i,"emulator-config-failed"),Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=pv(e),{host:h,port:m}=bT(e),g=m===null?"":`:${m}`;i.config.emulator={url:`${u}//${h}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),DT()}function pv(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function bT(s){const e=pv(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:Dg(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:Dg(h)}}}function Dg(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function DT(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class af{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function VT(s,e){return xr(s,"POST","/v1/accounts:update",e)}async function LT(s,e){return xr(s,"POST","/v1/accounts:signUp",e)}async function OT(s,e){return jo(s,"POST","/v1/accounts:signInWithPassword",Qr(s,e))}async function MT(s,e){return jo(s,"POST","/v1/accounts:signInWithEmailLink",Qr(s,e))}async function jT(s,e){return jo(s,"POST","/v1/accounts:signInWithEmailLink",Qr(s,e))}class Xa extends af{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Xa(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Xa(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rd(e,t,"signInWithPassword",OT);case"emailLink":return MT(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rd(e,i,"signUpPassword",LT);case"emailLink":return jT(e,{idToken:t,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Eo(s,e){return jo(s,"POST","/v1/accounts:signInWithIdp",Qr(s,e))}const FT="http://localhost";class vi extends af{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,u=tf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new vi(i,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Eo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:FT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=il(t)}return e}}function UT(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zT(s){const e=La(Oa(s)).link,t=e?La(Oa(e)).deep_link_id:null,i=La(Oa(s)).deep_link_id;return(i?La(Oa(i)).link:null)||i||t||e||s}class lf{constructor(e){var t,i,o,u,h,m;const g=La(Oa(e)),w=(t=g.apiKey)!==null&&t!==void 0?t:null,T=(i=g.oobCode)!==null&&i!==void 0?i:null,k=UT((o=g.mode)!==null&&o!==void 0?o:null);Se(w&&T&&k,"argument-error"),this.apiKey=w,this.operation=k,this.code=T,this.continueUrl=(u=g.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=g.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=zT(e);try{return new lf(t)}catch{return null}}}class Ti{constructor(){this.providerId=Ti.PROVIDER_ID}static credential(e,t){return Xa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=lf.parseLink(t);return Se(i,"argument-error"),Xa._fromEmailAndCode(e,i.code,i.tenantId)}}Ti.PROVIDER_ID="password";Ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class mv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class al extends mv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Is extends al{constructor(){super("facebook.com")}static credential(e){return vi._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";class Ss extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vi._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ss.credential(t,i)}catch{return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com";Ss.PROVIDER_ID="google.com";class As extends al{constructor(){super("github.com")}static credential(e){return vi._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.GITHUB_SIGN_IN_METHOD="github.com";As.PROVIDER_ID="github.com";class ks extends al{constructor(){super("twitter.com")}static credential(e,t){return vi._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ks.credential(t,i)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";async function gv(s,e){return jo(s,"POST","/v1/accounts:signUp",Qr(s,e))}class Er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const u=await zr._fromIdTokenResponse(e,i,o),h=Vg(i);return new Er({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Vg(i);return new Er({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Vg(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function BT(s){var e;if(Mn(s.app))return Promise.reject(nr(s));const t=Yr(s);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Er({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await gv(t,{returnSecureToken:!0}),o=await Er._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(o.user),o}class Ju extends Gr{constructor(e,t,i,o){var u;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ju.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ju(e,t,i,o)}}function yv(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ju._fromErrorAndOperation(s,u,e,i):u})}async function $T(s,e,t=!1){const i=await yi(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Er._forOperation(s,"link",i)}async function vv(s,e,t=!1){const{auth:i}=s;if(Mn(i.app))return Promise.reject(nr(i));const o="reauthenticate";try{const u=await yi(s,yv(i,o,e,s),t);Se(u.idToken,i,"internal-error");const h=sf(u.idToken);Se(h,i,"internal-error");const{sub:m}=h;return Se(s.uid===m,i,"user-mismatch"),Er._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&sr(i,"user-mismatch"),u}}async function _v(s,e,t=!1){if(Mn(s.app))return Promise.reject(nr(s));const i="signIn",o=await yv(s,i,e),u=await Er._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(u.user),u}async function qT(s,e){return _v(Yr(s),e)}async function WT(s,e){return vv(gt(s),e)}async function HT(s,e){return jo(s,"POST","/v1/accounts:signInWithCustomToken",Qr(s,e))}async function KT(s,e){if(Mn(s.app))return Promise.reject(nr(s));const t=Yr(s),i=await HT(t,{token:e,returnSecureToken:!0}),o=await Er._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(o.user),o}async function wv(s){const e=Yr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GT(s,e,t){if(Mn(s.app))return Promise.reject(nr(s));const i=Yr(s),h=await Rd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gv).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&wv(s),g}),m=await Er._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function QT(s,e,t){return Mn(s.app)?Promise.reject(nr(s)):qT(gt(s),Ti.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&wv(s),i})}async function YT(s,e){return xr(s,"POST","/v1/accounts:update",e)}async function Nd(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=gt(s),u={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await yi(i,YT(i.auth,u));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const m=i.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=i.displayName,m.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function XT(s,e){return JT(gt(s),null,e)}async function JT(s,e,t){const{auth:i}=s,u={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(u.password=t);const h=await yi(s,VT(i,u));await s._updateTokensIfNecessary(h,!0)}function ZT(s,e,t,i){return gt(s).onIdTokenChanged(e,t,i)}function ex(s,e,t){return gt(s).beforeAuthStateChanged(e,t)}function tx(s,e,t,i){return gt(s).onAuthStateChanged(e,t,i)}function nx(s){return gt(s).signOut()}const Zu="__sak";class Ev{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zu,"1"),this.storage.removeItem(Zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const rx=1e3,sx=10;class Tv extends Ev{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);gT()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,sx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tv.type="LOCAL";const ix=Tv;class xv extends Ev{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xv.type="SESSION";const Iv=xv;function ox(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new mc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async w=>w(t.origin,u)),g=await ox(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];function uf(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class ax{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const w=uf("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(k){const b=k;if(b.data.eventId===w)switch(b.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(b.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:w,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function vr(){return window}function lx(s){vr().location.href=s}function Sv(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function ux(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cx(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function hx(){return Sv()?self:null}const Av="firebaseLocalStorageDb",dx=1,ec="firebaseLocalStorage",kv="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gc(s,e){return s.transaction([ec],e?"readwrite":"readonly").objectStore(ec)}function fx(){const s=indexedDB.deleteDatabase(Av);return new ll(s).toPromise()}function Pd(){const s=indexedDB.open(Av,dx);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(ec,{keyPath:kv})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(ec)?e(i):(i.close(),await fx(),e(await Pd()))})})}async function Lg(s,e,t){const i=gc(s,!0).put({[kv]:e,value:t});return new ll(i).toPromise()}async function px(s,e){const t=gc(s,!1).get(e),i=await new ll(t).toPromise();return i===void 0?null:i.value}function Og(s,e){const t=gc(s,!0).delete(e);return new ll(t).toPromise()}const mx=800,gx=3;class Cv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>gx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(hx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ux(),!this.activeServiceWorker)return;this.sender=new ax(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pd();return await Lg(e,Zu,"1"),await Og(e,Zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Lg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>px(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Og(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=gc(o,!1).getAll();return new ll(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cv.type="LOCAL";const yx=Cv;new ol(3e4,6e4);function vx(s,e){return e?Br(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class cf extends af{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _x(s){return _v(s.auth,new cf(s),s.bypassAuthState)}function wx(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),vv(t,new cf(s),s.bypassAuthState)}async function Ex(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),$T(t,new cf(s),s.bypassAuthState)}class Rv{constructor(e,t,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _x;case"linkViaPopup":case"linkViaRedirect":return Ex;case"reauthViaPopup":case"reauthViaRedirect":return wx;default:sr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tx=new ol(2e3,1e4);class vo extends Rv{constructor(e,t,i,o,u){super(e,t,o,u),this.provider=i,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tx.get())};e()}}vo.currentPopupAction=null;const xx="pendingRedirect",zu=new Map;class Ix extends Rv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=zu.get(this.auth._key());if(!e){try{const i=await Sx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}zu.set(this.auth._key(),e)}return this.bypassAuthState||zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sx(s,e){const t=Cx(e),i=kx(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Ax(s,e){zu.set(s._key(),e)}function kx(s){return Br(s._redirectPersistence)}function Cx(s){return Uu(xx,s.config.apiKey,s.name)}async function Rx(s,e,t=!1){if(Mn(s.app))return Promise.reject(nr(s));const i=Yr(s),o=vx(i,e),h=await new Ix(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const Nx=600*1e3;class Px{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Nv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mg(e))}saveEventToCache(e){this.cachedEventUids.add(Mg(e)),this.lastProcessedEventTime=Date.now()}}function Mg(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Nv({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function bx(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nv(s);default:return!1}}async function Dx(s,e={}){return xr(s,"GET","/v1/projects",e)}const Vx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lx=/^https?/;async function Ox(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Dx(s);for(const t of e)try{if(Mx(t))return}catch{}sr(s,"unauthorized-domain")}function Mx(s){const e=kd(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!Lx.test(t))return!1;if(Vx.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const jx=new ol(3e4,6e4);function jg(){const s=vr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function Fx(s){return new Promise((e,t)=>{var i,o,u;function h(){jg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jg(),t(yr(s,"network-request-failed"))},timeout:jx.get()})}if(!((o=(i=vr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=vr().gapi)===null||u===void 0)&&u.load)h();else{const m=ST("iframefcb");return vr()[m]=()=>{gapi.load?h():t(yr(s,"network-request-failed"))},fv(`${IT()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Bu=null,e})}let Bu=null;function Ux(s){return Bu=Bu||Fx(s),Bu}const zx=new ol(5e3,15e3),Bx="__/auth/iframe",$x="emulator/auth/iframe",qx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hx(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?rf(e,$x):`https://${s.config.authDomain}/${Bx}`,i={apiKey:e.apiKey,appName:s.name,v:Mo},o=Wx.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${il(i).slice(1)}`}async function Kx(s){const e=await Ux(s),t=vr().gapi;return Se(t,s,"internal-error"),e.open({where:document.body,url:Hx(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qx,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const h=yr(s,"network-request-failed"),m=vr().setTimeout(()=>{u(h)},zx.get());function g(){vr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{u(h)})}))}const Gx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qx=500,Yx=600,Xx="_blank",Jx="http://localhost";class Fg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zx(s,e,t,i=Qx,o=Yx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g=Object.assign(Object.assign({},Gx),{width:i.toString(),height:o.toString(),top:u,left:h}),w=Zt().toLowerCase();t&&(m=ov(w)?Xx:t),sv(w)&&(e=e||Jx,g.scrollbars="yes");const T=Object.entries(g).reduce((b,[U,q])=>`${b}${U}=${q},`,"");if(mT(w)&&m!=="_self")return eI(e||"",m),new Fg(null);const k=window.open(e||"",m,T);Se(k,s,"popup-blocked");try{k.focus()}catch{}return new Fg(k)}function eI(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const tI="__/auth/handler",nI="emulator/auth/handler",rI=encodeURIComponent("fac");async function Ug(s,e,t,i,o,u){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Mo,eventId:o};if(e instanceof mv){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",Mw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,k]of Object.entries({}))h[T]=k}if(e instanceof al){const T=e.getScopes().filter(k=>k!=="");T.length>0&&(h.scopes=T.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),w=g?`#${rI}=${encodeURIComponent(g)}`:"";return`${sI(s)}?${il(m).slice(1)}${w}`}function sI({config:s}){return s.emulator?rf(s,nI):`https://${s.authDomain}/${tI}`}const yd="webStorageSupport";class iI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Iv,this._completeRedirectFn=Rx,this._overrideRedirectResult=Ax}async _openPopup(e,t,i,o){var u;Wr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await Ug(e,t,i,kd(),o);return Zx(e,h,uf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const u=await Ug(e,t,i,kd(),o);return lx(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Wr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Kx(e),i=new Px(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yd,{type:yd},o=>{var u;const h=(u=o?.[0])===null||u===void 0?void 0:u[yd];h!==void 0&&t(!!h),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ox(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hv()||iv()||of()}}const oI=iI;var zg="@firebase/auth",Bg="1.7.9";class aI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uI(s){So(new gi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dv(s)},w=new ET(i,o,u,g);return NT(w,t),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),So(new gi("auth-internal",e=>{const t=Yr(e.getProvider("auth").getImmediate());return(i=>new aI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ps(zg,Bg,lI(s)),Ps(zg,Bg,"esm2017")}const cI=300,hI=By("authIdTokenMaxAge")||cI;let $g=null;const dI=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>hI)return;const o=t?.token;$g!==o&&($g=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function fI(s=Hy()){const e=ef(s,"auth");if(e.isInitialized())return e.getImmediate();const t=RT(s,{popupRedirectResolver:oI,persistence:[yx,ix,Iv]}),i=By("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=dI(u.toString());ex(t,h,()=>h(t.currentUser)),ZT(t,m=>h(m))}}const o=Uy("auth");return o&&PT(t,`http://${o}`),t}function pI(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}TT({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=yr("internal-error");u.customData=o,t(u)},i.type="text/javascript",i.charset="UTF-8",pI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uI("Browser");var qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fi,Pv;(function(){var s;function e(R,x){function A(){}A.prototype=x.prototype,R.D=x.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(P,V,C){for(var I=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)I[Pe-2]=arguments[Pe];return x.prototype[V].apply(P,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,x,A){A||(A=0);var P=Array(16);if(typeof x=="string")for(var V=0;16>V;++V)P[V]=x.charCodeAt(A++)|x.charCodeAt(A++)<<8|x.charCodeAt(A++)<<16|x.charCodeAt(A++)<<24;else for(V=0;16>V;++V)P[V]=x[A++]|x[A++]<<8|x[A++]<<16|x[A++]<<24;x=R.g[0],A=R.g[1],V=R.g[2];var C=R.g[3],I=x+(C^A&(V^C))+P[0]+3614090360&4294967295;x=A+(I<<7&4294967295|I>>>25),I=C+(V^x&(A^V))+P[1]+3905402710&4294967295,C=x+(I<<12&4294967295|I>>>20),I=V+(A^C&(x^A))+P[2]+606105819&4294967295,V=C+(I<<17&4294967295|I>>>15),I=A+(x^V&(C^x))+P[3]+3250441966&4294967295,A=V+(I<<22&4294967295|I>>>10),I=x+(C^A&(V^C))+P[4]+4118548399&4294967295,x=A+(I<<7&4294967295|I>>>25),I=C+(V^x&(A^V))+P[5]+1200080426&4294967295,C=x+(I<<12&4294967295|I>>>20),I=V+(A^C&(x^A))+P[6]+2821735955&4294967295,V=C+(I<<17&4294967295|I>>>15),I=A+(x^V&(C^x))+P[7]+4249261313&4294967295,A=V+(I<<22&4294967295|I>>>10),I=x+(C^A&(V^C))+P[8]+1770035416&4294967295,x=A+(I<<7&4294967295|I>>>25),I=C+(V^x&(A^V))+P[9]+2336552879&4294967295,C=x+(I<<12&4294967295|I>>>20),I=V+(A^C&(x^A))+P[10]+4294925233&4294967295,V=C+(I<<17&4294967295|I>>>15),I=A+(x^V&(C^x))+P[11]+2304563134&4294967295,A=V+(I<<22&4294967295|I>>>10),I=x+(C^A&(V^C))+P[12]+1804603682&4294967295,x=A+(I<<7&4294967295|I>>>25),I=C+(V^x&(A^V))+P[13]+4254626195&4294967295,C=x+(I<<12&4294967295|I>>>20),I=V+(A^C&(x^A))+P[14]+2792965006&4294967295,V=C+(I<<17&4294967295|I>>>15),I=A+(x^V&(C^x))+P[15]+1236535329&4294967295,A=V+(I<<22&4294967295|I>>>10),I=x+(V^C&(A^V))+P[1]+4129170786&4294967295,x=A+(I<<5&4294967295|I>>>27),I=C+(A^V&(x^A))+P[6]+3225465664&4294967295,C=x+(I<<9&4294967295|I>>>23),I=V+(x^A&(C^x))+P[11]+643717713&4294967295,V=C+(I<<14&4294967295|I>>>18),I=A+(C^x&(V^C))+P[0]+3921069994&4294967295,A=V+(I<<20&4294967295|I>>>12),I=x+(V^C&(A^V))+P[5]+3593408605&4294967295,x=A+(I<<5&4294967295|I>>>27),I=C+(A^V&(x^A))+P[10]+38016083&4294967295,C=x+(I<<9&4294967295|I>>>23),I=V+(x^A&(C^x))+P[15]+3634488961&4294967295,V=C+(I<<14&4294967295|I>>>18),I=A+(C^x&(V^C))+P[4]+3889429448&4294967295,A=V+(I<<20&4294967295|I>>>12),I=x+(V^C&(A^V))+P[9]+568446438&4294967295,x=A+(I<<5&4294967295|I>>>27),I=C+(A^V&(x^A))+P[14]+3275163606&4294967295,C=x+(I<<9&4294967295|I>>>23),I=V+(x^A&(C^x))+P[3]+4107603335&4294967295,V=C+(I<<14&4294967295|I>>>18),I=A+(C^x&(V^C))+P[8]+1163531501&4294967295,A=V+(I<<20&4294967295|I>>>12),I=x+(V^C&(A^V))+P[13]+2850285829&4294967295,x=A+(I<<5&4294967295|I>>>27),I=C+(A^V&(x^A))+P[2]+4243563512&4294967295,C=x+(I<<9&4294967295|I>>>23),I=V+(x^A&(C^x))+P[7]+1735328473&4294967295,V=C+(I<<14&4294967295|I>>>18),I=A+(C^x&(V^C))+P[12]+2368359562&4294967295,A=V+(I<<20&4294967295|I>>>12),I=x+(A^V^C)+P[5]+4294588738&4294967295,x=A+(I<<4&4294967295|I>>>28),I=C+(x^A^V)+P[8]+2272392833&4294967295,C=x+(I<<11&4294967295|I>>>21),I=V+(C^x^A)+P[11]+1839030562&4294967295,V=C+(I<<16&4294967295|I>>>16),I=A+(V^C^x)+P[14]+4259657740&4294967295,A=V+(I<<23&4294967295|I>>>9),I=x+(A^V^C)+P[1]+2763975236&4294967295,x=A+(I<<4&4294967295|I>>>28),I=C+(x^A^V)+P[4]+1272893353&4294967295,C=x+(I<<11&4294967295|I>>>21),I=V+(C^x^A)+P[7]+4139469664&4294967295,V=C+(I<<16&4294967295|I>>>16),I=A+(V^C^x)+P[10]+3200236656&4294967295,A=V+(I<<23&4294967295|I>>>9),I=x+(A^V^C)+P[13]+681279174&4294967295,x=A+(I<<4&4294967295|I>>>28),I=C+(x^A^V)+P[0]+3936430074&4294967295,C=x+(I<<11&4294967295|I>>>21),I=V+(C^x^A)+P[3]+3572445317&4294967295,V=C+(I<<16&4294967295|I>>>16),I=A+(V^C^x)+P[6]+76029189&4294967295,A=V+(I<<23&4294967295|I>>>9),I=x+(A^V^C)+P[9]+3654602809&4294967295,x=A+(I<<4&4294967295|I>>>28),I=C+(x^A^V)+P[12]+3873151461&4294967295,C=x+(I<<11&4294967295|I>>>21),I=V+(C^x^A)+P[15]+530742520&4294967295,V=C+(I<<16&4294967295|I>>>16),I=A+(V^C^x)+P[2]+3299628645&4294967295,A=V+(I<<23&4294967295|I>>>9),I=x+(V^(A|~C))+P[0]+4096336452&4294967295,x=A+(I<<6&4294967295|I>>>26),I=C+(A^(x|~V))+P[7]+1126891415&4294967295,C=x+(I<<10&4294967295|I>>>22),I=V+(x^(C|~A))+P[14]+2878612391&4294967295,V=C+(I<<15&4294967295|I>>>17),I=A+(C^(V|~x))+P[5]+4237533241&4294967295,A=V+(I<<21&4294967295|I>>>11),I=x+(V^(A|~C))+P[12]+1700485571&4294967295,x=A+(I<<6&4294967295|I>>>26),I=C+(A^(x|~V))+P[3]+2399980690&4294967295,C=x+(I<<10&4294967295|I>>>22),I=V+(x^(C|~A))+P[10]+4293915773&4294967295,V=C+(I<<15&4294967295|I>>>17),I=A+(C^(V|~x))+P[1]+2240044497&4294967295,A=V+(I<<21&4294967295|I>>>11),I=x+(V^(A|~C))+P[8]+1873313359&4294967295,x=A+(I<<6&4294967295|I>>>26),I=C+(A^(x|~V))+P[15]+4264355552&4294967295,C=x+(I<<10&4294967295|I>>>22),I=V+(x^(C|~A))+P[6]+2734768916&4294967295,V=C+(I<<15&4294967295|I>>>17),I=A+(C^(V|~x))+P[13]+1309151649&4294967295,A=V+(I<<21&4294967295|I>>>11),I=x+(V^(A|~C))+P[4]+4149444226&4294967295,x=A+(I<<6&4294967295|I>>>26),I=C+(A^(x|~V))+P[11]+3174756917&4294967295,C=x+(I<<10&4294967295|I>>>22),I=V+(x^(C|~A))+P[2]+718787259&4294967295,V=C+(I<<15&4294967295|I>>>17),I=A+(C^(V|~x))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+x&4294967295,R.g[1]=R.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+C&4294967295}i.prototype.u=function(R,x){x===void 0&&(x=R.length);for(var A=x-this.blockSize,P=this.B,V=this.h,C=0;C<x;){if(V==0)for(;C<=A;)o(this,R,C),C+=this.blockSize;if(typeof R=="string"){for(;C<x;)if(P[V++]=R.charCodeAt(C++),V==this.blockSize){o(this,P),V=0;break}}else for(;C<x;)if(P[V++]=R[C++],V==this.blockSize){o(this,P),V=0;break}}this.h=V,this.o+=x},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var x=1;x<R.length-8;++x)R[x]=0;var A=8*this.o;for(x=R.length-8;x<R.length;++x)R[x]=A&255,A/=256;for(this.u(R),R=Array(16),x=A=0;4>x;++x)for(var P=0;32>P;P+=8)R[A++]=this.g[x]>>>P&255;return R};function u(R,x){var A=m;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=x(R)}function h(R,x){this.h=x;for(var A=[],P=!0,V=R.length-1;0<=V;V--){var C=R[V]|0;P&&C==x||(A[V]=C,P=!1)}this.g=A}var m={};function g(R){return-128<=R&&128>R?u(R,function(x){return new h([x|0],0>x?-1:0)}):new h([R|0],0>R?-1:0)}function w(R){if(isNaN(R)||!isFinite(R))return k;if(0>R)return $(w(-R));for(var x=[],A=1,P=0;R>=A;P++)x[P]=R/A|0,A*=4294967296;return new h(x,0)}function T(R,x){if(R.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(R.charAt(0)=="-")return $(T(R.substring(1),x));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=w(Math.pow(x,8)),P=k,V=0;V<R.length;V+=8){var C=Math.min(8,R.length-V),I=parseInt(R.substring(V,V+C),x);8>C?(C=w(Math.pow(x,C)),P=P.j(C).add(w(I))):(P=P.j(A),P=P.add(w(I)))}return P}var k=g(0),b=g(1),U=g(16777216);s=h.prototype,s.m=function(){if(H(this))return-$(this).m();for(var R=0,x=1,A=0;A<this.g.length;A++){var P=this.i(A);R+=(0<=P?P:4294967296+P)*x,x*=4294967296}return R},s.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(q(this))return"0";if(H(this))return"-"+$(this).toString(R);for(var x=w(Math.pow(R,6)),A=this,P="";;){var V=oe(A,x).g;A=de(A,V.j(x));var C=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=V,q(A))return C+P;for(;6>C.length;)C="0"+C;P=C+P}},s.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function q(R){if(R.h!=0)return!1;for(var x=0;x<R.g.length;x++)if(R.g[x]!=0)return!1;return!0}function H(R){return R.h==-1}s.l=function(R){return R=de(this,R),H(R)?-1:q(R)?0:1};function $(R){for(var x=R.g.length,A=[],P=0;P<x;P++)A[P]=~R.g[P];return new h(A,~R.h).add(b)}s.abs=function(){return H(this)?$(this):this},s.add=function(R){for(var x=Math.max(this.g.length,R.g.length),A=[],P=0,V=0;V<=x;V++){var C=P+(this.i(V)&65535)+(R.i(V)&65535),I=(C>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);P=I>>>16,C&=65535,I&=65535,A[V]=I<<16|C}return new h(A,A[A.length-1]&-2147483648?-1:0)};function de(R,x){return R.add($(x))}s.j=function(R){if(q(this)||q(R))return k;if(H(this))return H(R)?$(this).j($(R)):$($(this).j(R));if(H(R))return $(this.j($(R)));if(0>this.l(U)&&0>R.l(U))return w(this.m()*R.m());for(var x=this.g.length+R.g.length,A=[],P=0;P<2*x;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<R.g.length;V++){var C=this.i(P)>>>16,I=this.i(P)&65535,Pe=R.i(V)>>>16,Oe=R.i(V)&65535;A[2*P+2*V]+=I*Oe,ne(A,2*P+2*V),A[2*P+2*V+1]+=C*Oe,ne(A,2*P+2*V+1),A[2*P+2*V+1]+=I*Pe,ne(A,2*P+2*V+1),A[2*P+2*V+2]+=C*Pe,ne(A,2*P+2*V+2)}for(P=0;P<x;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=x;P<2*x;P++)A[P]=0;return new h(A,0)};function ne(R,x){for(;(R[x]&65535)!=R[x];)R[x+1]+=R[x]>>>16,R[x]&=65535,x++}function me(R,x){this.g=R,this.h=x}function oe(R,x){if(q(x))throw Error("division by zero");if(q(R))return new me(k,k);if(H(R))return x=oe($(R),x),new me($(x.g),$(x.h));if(H(x))return x=oe(R,$(x)),new me($(x.g),x.h);if(30<R.g.length){if(H(R)||H(x))throw Error("slowDivide_ only works with positive integers.");for(var A=b,P=x;0>=P.l(R);)A=we(A),P=we(P);var V=ge(A,1),C=ge(P,1);for(P=ge(P,2),A=ge(A,2);!q(P);){var I=C.add(P);0>=I.l(R)&&(V=V.add(A),C=I),P=ge(P,1),A=ge(A,1)}return x=de(R,V.j(x)),new me(V,x)}for(V=k;0<=R.l(x);){for(A=Math.max(1,Math.floor(R.m()/x.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),C=w(A),I=C.j(x);H(I)||0<I.l(R);)A-=P,C=w(A),I=C.j(x);q(C)&&(C=b),V=V.add(C),R=de(R,I)}return new me(V,R)}s.A=function(R){return oe(this,R).h},s.and=function(R){for(var x=Math.max(this.g.length,R.g.length),A=[],P=0;P<x;P++)A[P]=this.i(P)&R.i(P);return new h(A,this.h&R.h)},s.or=function(R){for(var x=Math.max(this.g.length,R.g.length),A=[],P=0;P<x;P++)A[P]=this.i(P)|R.i(P);return new h(A,this.h|R.h)},s.xor=function(R){for(var x=Math.max(this.g.length,R.g.length),A=[],P=0;P<x;P++)A[P]=this.i(P)^R.i(P);return new h(A,this.h^R.h)};function we(R){for(var x=R.g.length+1,A=[],P=0;P<x;P++)A[P]=R.i(P)<<1|R.i(P-1)>>>31;return new h(A,R.h)}function ge(R,x){var A=x>>5;x%=32;for(var P=R.g.length-A,V=[],C=0;C<P;C++)V[C]=0<x?R.i(C+A)>>>x|R.i(C+A+1)<<32-x:R.i(C+A);return new h(V,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Pv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=w,h.fromString=T,fi=h}).apply(typeof qg<"u"?qg:typeof self<"u"?self:typeof window<"u"?window:{});var Du=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bv,Ma,Dv,$u,bd,Vv,Lv,Ov;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Du=="object"&&Du];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(l,f){if(f)e:{var y=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var O=l[E];if(!(O in y))break e;y=y[O]}l=l[l.length-1],E=y[l],f=f(E),f!=E&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,E=!1,O={next:function(){if(!E&&y<l.length){var z=y++;return{value:f(z,l[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}o("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});var h=h||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function w(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function T(l,f,y){return l.call.apply(l.bind,arguments)}function k(l,f,y){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),l.apply(f,O)}}return function(){return l.apply(f,arguments)}}function b(l,f,y){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:k,b.apply(null,arguments)}function U(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function q(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(E,O,z){for(var te=Array(arguments.length-2),He=2;He<arguments.length;He++)te[He-2]=arguments[He];return f.prototype[O].apply(E,te)}}function H(l){const f=l.length;if(0<f){const y=Array(f);for(let E=0;E<f;E++)y[E]=l[E];return y}return[]}function $(l,f){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(g(E)){const O=l.length||0,z=E.length||0;l.length=O+z;for(let te=0;te<z;te++)l[O+te]=E[te]}else l.push(E)}}class de{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ne(l){return/^[\s\xa0]*$/.test(l)}function me(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function oe(l){return oe[" "](l),l}oe[" "]=function(){};var we=me().indexOf("Gecko")!=-1&&!(me().toLowerCase().indexOf("webkit")!=-1&&me().indexOf("Edge")==-1)&&!(me().indexOf("Trident")!=-1||me().indexOf("MSIE")!=-1)&&me().indexOf("Edge")==-1;function ge(l,f,y){for(const E in l)f.call(y,l[E],E,l)}function R(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function x(l){const f={};for(const y in l)f[y]=l[y];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,f){let y,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(y in E)l[y]=E[y];for(let z=0;z<A.length;z++)y=A[z],Object.prototype.hasOwnProperty.call(E,y)&&(l[y]=E[y])}}function V(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function C(l){m.setTimeout(()=>{throw l},0)}function I(){var l=W;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Pe{constructor(){this.h=this.g=null}add(f,y){const E=Oe.get();E.set(f,y),this.h?this.h.next=E:this.g=E,this.h=E}}var Oe=new de(()=>new it,l=>l.reset());class it{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,ee=!1,W=new Pe,Y=()=>{const l=m.Promise.resolve(void 0);Me=()=>{l.then(L)}};var L=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(y){C(y)}var f=Oe;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ee=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l})();function _e(l,f){if(re.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(we){e:{try{oe(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&_e.aa.h.call(this)}}q(_e,re);var ke={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Ge(l,f,y,E,O){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!E,this.ha=O,this.key=++Ue,this.da=this.fa=!1}function wt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Fn(l){this.src=l,this.g={},this.h=0}Fn.prototype.add=function(l,f,y,E,O){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var te=Un(l,f,E,O);return-1<te?(f=l[te],y||(f.fa=!1)):(f=new Ge(f,this.src,z,!!E,O),f.fa=y,l.push(f)),f};function Xr(l,f){var y=f.type;if(y in l.g){var E=l.g[y],O=Array.prototype.indexOf.call(E,f,void 0),z;(z=0<=O)&&Array.prototype.splice.call(E,O,1),z&&(wt(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Un(l,f,y,E){for(var O=0;O<l.length;++O){var z=l[O];if(!z.da&&z.listener==f&&z.capture==!!y&&z.ha==E)return O}return-1}var Ir="closure_lm_"+(1e6*Math.random()|0),se={};function Ee(l,f,y,E,O){if(Array.isArray(f)){for(var z=0;z<f.length;z++)Ee(l,f[z],y,E,O);return null}return y=en(y),l&&l[be]?l.K(f,y,w(E)?!!E.capture:!1,O):De(l,f,y,!1,E,O)}function De(l,f,y,E,O,z){if(!f)throw Error("Invalid event type");var te=w(O)?!!O.capture:!!O,He=Nt(l);if(He||(l[Ir]=He=new Fn(l)),y=He.add(f,y,E,te,z),y.proxy)return y;if(E=Xe(),y.proxy=E,E.src=l,E.listener=y,l.addEventListener)ve||(O=te),O===void 0&&(O=!1),l.addEventListener(f.toString(),E,O);else if(l.attachEvent)l.attachEvent(ot(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Xe(){function l(y){return f.call(l.src,l.listener,y)}const f=Ze;return l}function Je(l,f,y,E,O){if(Array.isArray(f))for(var z=0;z<f.length;z++)Je(l,f[z],y,E,O);else E=w(E)?!!E.capture:!!E,y=en(y),l&&l[be]?(l=l.i,f=String(f).toString(),f in l.g&&(z=l.g[f],y=Un(z,y,E,O),-1<y&&(wt(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete l.g[f],l.h--)))):l&&(l=Nt(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Un(f,y,E,O)),(y=-1<l?f[l]:null)&&ue(y))}function ue(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[be])Xr(f.i,l);else{var y=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(y,E,l.capture):f.detachEvent?f.detachEvent(ot(y),E):f.addListener&&f.removeListener&&f.removeListener(E),(y=Nt(f))?(Xr(y,l),y.h==0&&(y.src=null,f[Ir]=null)):wt(l)}}}function ot(l){return l in se?se[l]:se[l]="on"+l}function Ze(l,f){if(l.da)l=!0;else{f=new _e(f,this);var y=l.listener,E=l.ha||l.src;l.fa&&ue(l),l=y.call(E,f)}return l}function Nt(l){return l=l[Ir],l instanceof Fn?l:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function en(l){return typeof l=="function"?l:(l[ft]||(l[ft]=function(f){return l.handleEvent(f)}),l[ft])}function ut(){B.call(this),this.i=new Fn(this),this.M=this,this.F=null}q(ut,B),ut.prototype[be]=!0,ut.prototype.removeEventListener=function(l,f,y,E){Je(this,l,f,y,E)};function St(l,f){var y,E=l.F;if(E)for(y=[];E;E=E.F)y.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new re(f,l);else if(f instanceof re)f.target=f.target||l;else{var O=f;f=new re(E,l),P(f,O)}if(O=!0,y)for(var z=y.length-1;0<=z;z--){var te=f.g=y[z];O=Sr(te,E,!0,f)&&O}if(te=f.g=l,O=Sr(te,E,!0,f)&&O,O=Sr(te,E,!1,f)&&O,y)for(z=0;z<y.length;z++)te=f.g=y[z],O=Sr(te,E,!1,f)&&O}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],E=0;E<y.length;E++)wt(y[E]);delete l.g[f],l.h--}}this.F=null},ut.prototype.K=function(l,f,y,E){return this.i.add(String(l),f,!1,y,E)},ut.prototype.L=function(l,f,y,E){return this.i.add(String(l),f,!0,y,E)};function Sr(l,f,y,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,z=0;z<f.length;++z){var te=f[z];if(te&&!te.da&&te.capture==y){var He=te.listener,At=te.ha||te.src;te.fa&&Xr(l.i,te),O=He.call(At,E)!==!1&&O}}return O&&!E.defaultPrevented}function $o(l,f,y){if(typeof l=="function")y&&(l=b(l,y));else if(l&&typeof l.handleEvent=="function")l=b(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Jr(l){l.g=$o(()=>{l.g=null,l.i&&(l.i=!1,Jr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class js extends B{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Jr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(l){B.call(this),this.h=l,this.g={}}q(Fs,B);var qo=[];function Wo(l){ge(l.g,function(f,y){this.g.hasOwnProperty(y)&&ue(f)},l),l.g={}}Fs.prototype.N=function(){Fs.aa.N.call(this),Wo(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ho=m.JSON.stringify,Ko=m.JSON.parse,Go=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function Us(){}Us.prototype.h=null;function Ai(l){return l.h||(l.h=l.i())}function ki(){}var An={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){re.call(this,"d")}q(or,re);function Ci(){re.call(this,"c")}q(Ci,re);var ar={},Qo=null;function zs(){return Qo=Qo||new ut}ar.La="serverreachability";function Yo(l){re.call(this,ar.La,l)}q(Yo,re);function Ar(l){const f=zs();St(f,new Yo(f))}ar.STAT_EVENT="statevent";function Xo(l,f){re.call(this,ar.STAT_EVENT,l),this.stat=f}q(Xo,re);function yt(l){const f=zs();St(f,new Xo(f,l))}ar.Ma="timingevent";function Ri(l,f){re.call(this,ar.Ma,l),this.size=f}q(Ri,re);function zn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function $s(l,f,y,E,O,z){l.info(function(){if(l.g)if(z)for(var te="",He=z.split("&"),At=0;At<He.length;At++){var ze=He[At].split("=");if(1<ze.length){var Pt=ze[0];ze=ze[1];var Et=Pt.split("_");te=2<=Et.length&&Et[1]=="type"?te+(Pt+"="+ze+"&"):te+(Pt+"=redacted&")}}else te=null;else te=z;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+f+`
`+y+`
`+te})}function Ni(l,f,y,E,O,z,te){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+f+`
`+y+`
`+z+" "+te})}function Bn(l,f,y,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Vc(l,y)+(E?" "+E:"")})}function Jo(l,f){l.info(function(){return"TIMEOUT: "+f})}Bs.prototype.info=function(){};function Vc(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var E=y[l];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var te=1;te<O.length;te++)O[te]=""}}}}return Ho(y)}catch{return f}}var Pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function qs(){}q(qs,Us),qs.prototype.g=function(){return new XMLHttpRequest},qs.prototype.i=function(){return{}},$n=new qs;function qn(l,f,y,E){this.j=l,this.i=f,this.l=y,this.R=E||1,this.U=new Fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vl}function vl(){this.i=null,this.g="",this.h=!1}var Zo={},bi={};function Di(l,f,y){l.L=1,l.v=rs(vn(f)),l.m=y,l.P=!0,ea(l,null)}function ea(l,f){l.F=Date.now(),et(l),l.A=vn(l.v);var y=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),is(y.i,"t",E),l.C=0,y=l.j.J,l.h=new vl,l.g=Ol(l.j,y?f:null,!l.m),0<l.O&&(l.M=new js(b(l.Y,l,l.g),l.O)),f=l.U,y=l.g,E=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(qo[0]=O.toString()),O=qo);for(var z=0;z<O.length;z++){var te=Ee(y,O[z],E||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Ar(),$s(l.i,l.u,l.A,l.l,l.R,l.m)}qn.prototype.ca=function(l){l=l.target;const f=this.M;f&&un(l)==3?f.j():this.Y(l)},qn.prototype.Y=function(l){try{if(l==this.g)e:{const Et=un(this.g);var f=this.g.Ba();const Rn=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||oa(this.g)))){this.J||Et!=4||f==7||(f==8||0>=Rn?Ar(3):Ar(2)),Ws(this);var y=this.g.Z();this.X=y;t:if(_l(this)){var E=oa(this.g);l="";var O=E.length,z=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),Zr(this);var te="";break t}this.h.i=new m.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(z&&f==O-1)});E.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,Ni(this.i,this.u,this.A,this.l,this.R,Et,y),this.o){if(this.T&&!this.K){t:{if(this.g){var He,At=this.g;if((He=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(He)){var ze=He;break t}}ze=null}if(y=ze)Bn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ta(this,y);else{this.o=!1,this.s=3,yt(12),kn(this),Zr(this);break e}}if(this.P){y=!0;let wn;for(;!this.J&&this.C<te.length;)if(wn=Lc(this,te),wn==bi){Et==4&&(this.s=4,yt(14),y=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==Zo){this.s=4,yt(15),Bn(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else Bn(this.i,this.l,wn,null),ta(this,wn);if(_l(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||te.length!=0||this.h.h||(this.s=1,yt(16),y=!1),this.o=this.o&&y,!y)Bn(this.i,this.l,te,"[Invalid Chunked Response]"),kn(this),Zr(this);else if(0<te.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),la(Pt),Pt.M=!0,yt(11))}}else Bn(this.i,this.l,te,null),ta(this,te);Et==4&&kn(this),this.o&&!this.J&&(Et==4?qi(this.j,this):(this.o=!1,et(this)))}else Fi(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),kn(this),Zr(this)}}}catch{}finally{}};function _l(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Lc(l,f){var y=l.C,E=f.indexOf(`
`,y);return E==-1?bi:(y=Number(f.substring(y,E)),isNaN(y)?Zo:(E+=1,E+y>f.length?bi:(f=f.slice(E,E+y),l.C=E+y,f)))}qn.prototype.cancel=function(){this.J=!0,kn(this)};function et(l){l.S=Date.now()+l.I,wl(l,l.I)}function wl(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=zn(b(l.ba,l),f)}function Ws(l){l.B&&(m.clearTimeout(l.B),l.B=null)}qn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Jo(this.i,this.A),this.L!=2&&(Ar(),yt(17)),kn(this),this.s=2,Zr(this)):wl(this,this.S-l)};function Zr(l){l.j.G==0||l.J||qi(l.j,l)}function kn(l){Ws(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Wo(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function ta(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||tn(y.h,l))){if(!l.K&&tn(y.h,l)&&y.G==3){try{var E=y.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)$i(y),Qn(y);else break e;Bi(y),yt(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=zn(b(y.Za,y),6e3));if(1>=Tl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Pr(y,11)}else if((l.K||y.g==l)&&$i(y),!ne(f))for(O=y.Da.g.parse(f),f=0;f<O.length;f++){let ze=O[f];if(y.T=ze[0],ze=ze[1],y.G==2)if(ze[0]=="c"){y.K=ze[1],y.ia=ze[2];const Pt=ze[3];Pt!=null&&(y.la=Pt,y.j.info("VER="+y.la));const Et=ze[4];Et!=null&&(y.Aa=Et,y.j.info("SVER="+y.Aa));const Rn=ze[5];Rn!=null&&typeof Rn=="number"&&0<Rn&&(E=1.5*Rn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const wn=l.g;if(wn){const Js=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Js){var z=E.h;z.g||Js.indexOf("spdy")==-1&&Js.indexOf("quic")==-1&&Js.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(na(z,z.h),z.h=null))}if(E.D){const Hi=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hi&&(E.ya=Hi,Ye(E.I,E.D,Hi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var te=l;if(E.qa=Ll(E,E.J?E.ia:null,E.W),te.K){xl(E.h,te);var He=te,At=E.L;At&&(He.I=At),He.B&&(Ws(He),et(He)),E.g=te}else Xs(E);0<y.i.length&&hr(y)}else ze[0]!="stop"&&ze[0]!="close"||Pr(y,7);else y.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Pr(y,7):Mt(y):ze[0]!="noop"&&y.l&&y.l.ta(ze),y.v=0)}}Ar(4)}catch{}}var El=class{constructor(l,f){this.g=l,this.map=f}};function Hs(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yn(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Tl(l){return l.h?1:l.g?l.g.size:0}function tn(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function na(l,f){l.g?l.g.add(f):l.h=f}function xl(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Hs.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Il(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return H(l.i)}function Vi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,E=0;E<y;E++)f.push(l[E]);return f}f=[],y=0;for(E in l)f[y++]=l[E];return f}function Li(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const E in l)f[y++]=E;return f}}}function es(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=Li(l),E=Vi(l),O=E.length,z=0;z<O;z++)f.call(void 0,E[z],y&&y[z],l)}var Ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oc(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var E=l[y].indexOf("="),O=null;if(0<=E){var z=l[y].substring(0,E);O=l[y].substring(E+1)}else z=l[y];f(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function kr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof kr){this.h=l.h,Gs(this,l.j),this.o=l.o,this.g=l.g,ts(this,l.s),this.l=l.l;var f=l.i,y=new lr;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),ns(this,y),this.m=l.m}else l&&(f=String(l).match(Ks))?(this.h=!1,Gs(this,f[1]||"",!0),this.o=je(f[2]||""),this.g=je(f[3]||"",!0),ts(this,f[4]),this.l=je(f[5]||"",!0),ns(this,f[6]||"",!0),this.m=je(f[7]||"")):(this.h=!1,this.i=new lr(null,this.h))}kr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ss(f,Oi,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ss(f,Oi,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(ss(y,y.charAt(0)=="/"?kl:Al,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",ss(y,ra)),l.join("")};function vn(l){return new kr(l)}function Gs(l,f,y){l.j=y?je(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function ts(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function ns(l,f,y){f instanceof lr?(l.i=f,ur(l.i,l.h)):(y||(f=ss(f,Cl)),l.i=new lr(f,l.h))}function Ye(l,f,y){l.i.set(f,y)}function rs(l){return Ye(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function je(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ss(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,Sl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Sl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Oi=/[#\/\?@]/g,Al=/[#\?:]/g,kl=/[#\?]/g,Cl=/[#\?@]/g,ra=/#/g;function lr(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Ot(l){l.g||(l.g=new Map,l.h=0,l.i&&Oc(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}s=lr.prototype,s.add=function(l,f){Ot(this),this.i=null,l=Cn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Wn(l,f){Ot(l),f=Cn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Hn(l,f){return Ot(l),f=Cn(l,f),l.g.has(f)}s.forEach=function(l,f){Ot(this),this.g.forEach(function(y,E){y.forEach(function(O){l.call(f,O,E,this)},this)},this)},s.na=function(){Ot(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let E=0;E<f.length;E++){const O=l[E];for(let z=0;z<O.length;z++)y.push(f[E])}return y},s.V=function(l){Ot(this);let f=[];if(typeof l=="string")Hn(this,l)&&(f=f.concat(this.g.get(Cn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},s.set=function(l,f){return Ot(this),this.i=null,l=Cn(this,l),Hn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function is(l,f,y){Wn(l,f),0<y.length&&(l.i=null,l.g.set(Cn(l,f),H(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var E=f[y];const z=encodeURIComponent(String(E)),te=this.V(E);for(E=0;E<te.length;E++){var O=z;te[E]!==""&&(O+="="+encodeURIComponent(String(te[E]))),l.push(O)}}return this.i=l.join("&")};function Cn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function ur(l,f){f&&!l.j&&(Ot(l),l.i=null,l.g.forEach(function(y,E){var O=E.toLowerCase();E!=O&&(Wn(this,E),is(this,O,y))},l)),l.j=f}function Mc(l,f){const y=new Bs;if(m.Image){const E=new Image;E.onload=U(ln,y,"TestLoadImage: loaded",!0,f,E),E.onerror=U(ln,y,"TestLoadImage: error",!1,f,E),E.onabort=U(ln,y,"TestLoadImage: abort",!1,f,E),E.ontimeout=U(ln,y,"TestLoadImage: timeout",!1,f,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function Rl(l,f){const y=new Bs,E=new AbortController,O=setTimeout(()=>{E.abort(),ln(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(z=>{clearTimeout(O),z.ok?ln(y,"TestPingServer: ok",!0,f):ln(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),ln(y,"TestPingServer: error",!1,f)})}function ln(l,f,y,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(y)}catch{}}function jc(){this.g=new Go}function Nl(l,f,y){const E=y||"";try{es(l,function(O,z){let te=O;w(O)&&(te=Ho(O)),f.push(E+z+"="+encodeURIComponent(te))})}catch(O){throw f.push(E+"type="+encodeURIComponent("_badmap")),O}}function Cr(l){this.l=l.Ub||null,this.j=l.eb||!1}q(Cr,Us),Cr.prototype.g=function(){return new Qs(this.l,this.j)},Cr.prototype.i=(function(l){return function(){return l}})({});function Qs(l,f){ut.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Qs,ut),s=Qs.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Gn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Kn(this):Gn(this),this.readyState==3&&Pl(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Kn(this))},s.Qa=function(l){this.g&&(this.response=l,Kn(this))},s.ga=function(){this.g&&Kn(this)};function Kn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Gn(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Gn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Rr(l){let f="";return ge(l,function(y,E){f+=E,f+=":",f+=y,f+=`\r
`}),f}function os(l,f,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=Rr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Ye(l,f,y))}function at(l){ut.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(at,ut);var Fc=/^https?$/i,sa=["POST","PUT"];s=at.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?Ai(this.o):Ai($n),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(z){Ys(this,z);return}if(l=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)y.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const z of E.keys())y.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),O=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(sa,f,void 0))||E||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,te]of y)this.g.setRequestHeader(z,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ji(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){Ys(this,z)}};function Ys(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Mi(l),_n(l)}function Mi(l){l.A||(l.A=!0,St(l,"complete"),St(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,St(this,"complete"),St(this,"abort"),_n(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_n(this,!0)),at.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ia(this):this.bb())},s.bb=function(){ia(this)};function ia(l){if(l.h&&typeof h<"u"&&(!l.v[1]||un(l)!=4||l.Z()!=2)){if(l.u&&un(l)==4)$o(l.Ea,0,l);else if(St(l,"readystatechange"),un(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var E;if(E=te===0){var O=String(l.D).match(Ks)[1]||null;!O&&m.self&&m.self.location&&(O=m.self.location.protocol.slice(0,-1)),E=!Fc.test(O?O.toLowerCase():"")}y=E}if(y)St(l,"complete"),St(l,"success");else{l.m=6;try{var z=2<un(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Mi(l)}}finally{_n(l)}}}}function _n(l,f){if(l.g){ji(l);const y=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||St(l,"ready");try{y.onreadystatechange=E}catch{}}}function ji(l){l.I&&(m.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function un(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Ko(f)}};function oa(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(l){const f={};l=(l.g&&2<=un(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(ne(l[E]))continue;var y=V(l[E]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=f[O]||[];f[O]=z,z.push(y)}R(f,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cr(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function aa(l){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cr("baseRetryDelayMs",5e3,l),this.cb=cr("retryDelaySeedMs",1e4,l),this.Wa=cr("forwardChannelMaxRetries",2,l),this.wa=cr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Hs(l&&l.concurrentRequestLimit),this.Da=new jc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=aa.prototype,s.la=8,s.G=1,s.connect=function(l,f,y,E){yt(0),this.W=l,this.H=f||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=Ll(this,null,this.W),hr(this)};function Mt(l){if(Ui(l),l.G==3){var f=l.U++,y=vn(l.I);if(Ye(y,"SID",l.K),Ye(y,"RID",f),Ye(y,"TYPE","terminate"),Nr(l,y),f=new qn(l,l.j,f),f.L=2,f.v=rs(vn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=Ol(f.j,null),f.g.ea(f.v)),f.F=Date.now(),et(f)}Vl(l)}function Qn(l){l.g&&(la(l),l.g.cancel(),l.g=null)}function Ui(l){Qn(l),l.u&&(m.clearTimeout(l.u),l.u=null),$i(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function hr(l){if(!yn(l.h)&&!l.s){l.s=!0;var f=l.Ga;Me||Y(),ee||(Me(),ee=!0),W.add(f,l),l.B=0}}function Uc(l,f){return Tl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=zn(b(l.Ga,l,f),Dl(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new qn(this,this.j,l);let z=this.o;if(this.S&&(z?(z=x(z),P(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=as(this,O,f),y=vn(this.I),Ye(y,"RID",l),Ye(y,"CVER",22),this.D&&Ye(y,"X-HTTP-Session-Id",this.D),Nr(this,y),z&&(this.O?f="headers="+encodeURIComponent(String(Rr(z)))+"&"+f:this.m&&os(y,this.m,z)),na(this.h,O),this.Ua&&Ye(y,"TYPE","init"),this.P?(Ye(y,"$req",f),Ye(y,"SID","null"),O.T=!0,Di(O,y,null)):Di(O,y,f),this.G=2}}else this.G==3&&(l?zi(this,l):this.i.length==0||yn(this.h)||zi(this))};function zi(l,f){var y;f?y=f.l:y=l.U++;const E=vn(l.I);Ye(E,"SID",l.K),Ye(E,"RID",y),Ye(E,"AID",l.T),Nr(l,E),l.m&&l.o&&os(E,l.m,l.o),y=new qn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=as(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),na(l.h,y),Di(y,E,f)}function Nr(l,f){l.H&&ge(l.H,function(y,E){Ye(f,E,y)}),l.l&&es({},function(y,E){Ye(f,E,y)})}function as(l,f,y){y=Math.min(l.i.length,y);var E=l.l?b(l.l.Na,l.l,l):null;e:{var O=l.i;let z=-1;for(;;){const te=["count="+y];z==-1?0<y?(z=O[0].g,te.push("ofs="+z)):z=0:te.push("ofs="+z);let He=!0;for(let At=0;At<y;At++){let ze=O[At].g;const Pt=O[At].map;if(ze-=z,0>ze)z=Math.max(0,O[At].g-100),He=!1;else try{Nl(Pt,te,"req"+ze+"_")}catch{E&&E(Pt)}}if(He){E=te.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,E}function Xs(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Me||Y(),ee||(Me(),ee=!0),W.add(f,l),l.v=0}}function Bi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=zn(b(l.Fa,l),Dl(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,bl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=zn(b(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Qn(this),bl(this))};function la(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function bl(l){l.g=new qn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=vn(l.qa);Ye(f,"RID","rpc"),Ye(f,"SID",l.K),Ye(f,"AID",l.T),Ye(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ye(f,"TO",l.ja),Ye(f,"TYPE","xmlhttp"),Nr(l,f),l.m&&l.o&&os(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=rs(vn(f)),y.m=null,y.P=!0,ea(y,l)}s.Za=function(){this.C!=null&&(this.C=null,Qn(this),Bi(this),yt(19))};function $i(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function qi(l,f){var y=null;if(l.g==f){$i(l),la(l),l.g=null;var E=2}else if(tn(l.h,f))y=f.D,xl(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var O=l.B;E=zs(),St(E,new Ri(E,y)),hr(l)}else Xs(l);else if(O=f.s,O==3||O==0&&0<f.X||!(E==1&&Uc(l,f)||E==2&&Bi(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),O){case 1:Pr(l,5);break;case 4:Pr(l,10);break;case 3:Pr(l,6);break;default:Pr(l,2)}}}function Dl(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function Pr(l,f){if(l.j.info("Error code "+f),f==2){var y=b(l.fb,l),E=l.Xa;const O=!E;E=new kr(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Gs(E,"https"),rs(E),O?Mc(E.toString(),y):Rl(E.toString(),y)}else yt(2);l.G=0,l.l&&l.l.sa(f),Vl(l),Ui(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Vl(l){if(l.G=0,l.ka=[],l.l){const f=Il(l.h);(f.length!=0||l.i.length!=0)&&($(l.ka,f),$(l.ka,l.i),l.h.i.length=0,H(l.i),l.i.length=0),l.l.ra()}}function Ll(l,f,y){var E=y instanceof kr?vn(y):new kr(y);if(E.g!="")f&&(E.g=f+"."+E.g),ts(E,E.s);else{var O=m.location;E=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var z=new kr(null);E&&Gs(z,E),f&&(z.g=f),O&&ts(z,O),y&&(z.l=y),E=z}return y=l.D,f=l.ya,y&&f&&Ye(E,y,f),Ye(E,"VER",l.la),Nr(l,E),E}function Ol(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new at(new Cr({eb:y})):new at(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ua(){}s=ua.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Wi(){}Wi.prototype.g=function(l,f){return new nn(l,f)};function nn(l,f){ut.call(this),this.g=new aa(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ne(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ne(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new dr(this)}q(nn,ut),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Mt(this.g)},nn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Ho(l),l=y);f.i.push(new El(f.Ya++,l)),f.G==3&&hr(f)},nn.prototype.N=function(){this.g.l=null,delete this.j,Mt(this.g),delete this.g,nn.aa.N.call(this)};function Ml(l){or.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}q(Ml,or);function jl(){Ci.call(this),this.status=1}q(jl,Ci);function dr(l){this.g=l}q(dr,ua),dr.prototype.ua=function(){St(this.g,"a")},dr.prototype.ta=function(l){St(this.g,new Ml(l))},dr.prototype.sa=function(l){St(this.g,new jl)},dr.prototype.ra=function(){St(this.g,"b")},Wi.prototype.createWebChannel=Wi.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,Ov=function(){return new Wi},Lv=function(){return zs()},Vv=ar,bd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,$u=Pi,yl.COMPLETE="complete",Dv=yl,ki.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Ma=ki,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,bv=at}).apply(typeof Du<"u"?Du:typeof self<"u"?self:typeof window<"u"?window:{});const Wg="@firebase/firestore";class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let Fo="10.14.0";const _i=new Jd("@firebase/firestore");function Va(){return _i.logLevel}function pe(s,...e){if(_i.logLevel<=Fe.DEBUG){const t=e.map(hf);_i.debug(`Firestore (${Fo}): ${s}`,...t)}}function Hr(s,...e){if(_i.logLevel<=Fe.ERROR){const t=e.map(hf);_i.error(`Firestore (${Fo}): ${s}`,...t)}}function Ao(s,...e){if(_i.logLevel<=Fe.WARN){const t=e.map(hf);_i.warn(`Firestore (${Fo}): ${s}`,...t)}}function hf(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Ce(s="Unexpected state"){const e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+s;throw Hr(e),new Error(e)}function Ke(s,e){s||Ce()}function Ne(s,e){return s}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Mv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yt.UNAUTHENTICATED)))}shutdown(){}}class gI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yI{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new $r,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new $r)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string"),new Mv(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Yt(e)}}class vI{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _I{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new vI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const i=u=>{u.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new wI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function TI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class jv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=TI(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<t&&(i+=e.charAt(o[u]%e.length))}return i}}function We(s,e){return s<e?-1:s>e?1:0}function ko(s,e,t){return s.length===e.length&&s.every(((i,o)=>t(i,e[o])))}class Rt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Rt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Rt(0,0))}static max(){return new Re(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ja{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(),i===void 0?i=e.length-t:i>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ja.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ja?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class st extends Ja{construct(e,t,i){return new st(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const xI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Ja{construct(e,t,i){return new zt(e,t,i)}static isValidIdentifier(e){return xI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const u=()=>{if(i.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(u(),o++)}if(u(),h)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(st.fromString(e))}static fromName(e){return new Te(st.fromString(e).popFirst(5))}static empty(){return new Te(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new st(e.slice()))}}function II(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new Rt(t+1,0):new Rt(t,i));return new Ds(o,Te.empty(),e)}function SI(s){return new Ds(s.readTime,s.key,-1)}class Ds{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ds(Re.min(),Te.empty(),-1)}static max(){return new Ds(Re.max(),Te.empty(),-1)}}function AI(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(s.documentKey,e.documentKey),t!==0?t:We(s.largestBatchId,e.largestBatchId))}const kI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ul(s){if(s.code!==K.FAILED_PRECONDITION||s.message!==kI)throw s;pe("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,i)=>{t(e)}))}static reject(e){return new X(((t,i)=>{i(e)}))}static waitFor(e){return new X(((t,i)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&t()}),(g=>i(g)))})),h=!0,u===o&&t()}))}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next((o=>o?X.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,u)=>{i.push(t.call(this,o,u))})),this.waitFor(i)}static mapArray(e,t){return new X(((i,o)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const w=g;t(e[w]).next((T=>{h[w]=T,++m,m===u&&i(h)}),(T=>o(T)))}}))}static doWhile(e,t){return new X(((i,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):i()};u()}))}}function RI(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(s){return s.name==="IndexedDbTransactionError"}class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}df.oe=-1;function yc(s){return s==null}function tc(s){return s===0&&1/s==-1/0}function NI(s){return typeof s=="number"&&Number.isInteger(s)&&!tc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function Hg(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function xi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Fv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class dt{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vu(this.root,e,this.comparator,!0)}}class Vu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,i,o,u){this.key=e,this.value=t,this.color=i??Ut.RED,this.left=o??Ut.EMPTY,this.right=u??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,u){return new Ut(e??this.key,t??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,i),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,i,o,u){return this}insert(e,t,i){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kg(this.data.getIterator())}getIteratorFrom(e){return new Kg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Kg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Sn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Sn([])}unionWith(e){let t=new Bt(zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Sn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Uv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Uv("Invalid base64 string: "+u):u}})(e);return new $t(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const PI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(s){if(Ke(!!s),typeof s=="string"){let e=0;const t=PI.exec(s);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_t(s.seconds),nanos:_t(s.nanos)}}function _t(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function wi(s){return typeof s=="string"?$t.fromBase64String(s):$t.fromUint8Array(s)}function ff(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function pf(s){const e=s.mapValue.fields.__previous_value__;return ff(e)?pf(e):e}function Za(s){const e=Vs(s.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}class bI{constructor(e,t,i,o,u,h,m,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=w}}class el{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new el("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}const Lu={mapValue:{}};function Ei(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ff(s)?4:VI(s)?9007199254740991:DI(s)?10:11:Ce()}function Tr(s,e){if(s===e)return!0;const t=Ei(s);if(t!==Ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Za(s).isEqual(Za(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Vs(o.timestampValue),m=Vs(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return wi(o.bytesValue).isEqual(wi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return _t(o.geoPointValue.latitude)===_t(u.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return _t(o.integerValue)===_t(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=_t(o.doubleValue),m=_t(u.doubleValue);return h===m?tc(h)===tc(m):isNaN(h)&&isNaN(m)}return!1})(s,e);case 9:return ko(s.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Hg(h)!==Hg(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Tr(h[g],m[g])))return!1;return!0})(s,e);default:return Ce()}}function tl(s,e){return(s.values||[]).find((t=>Tr(t,e)))!==void 0}function Co(s,e){if(s===e)return 0;const t=Ei(s),i=Ei(e);if(t!==i)return We(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=_t(u.integerValue||u.doubleValue),g=_t(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return Gg(s.timestampValue,e.timestampValue);case 4:return Gg(Za(s),Za(e));case 5:return We(s.stringValue,e.stringValue);case 6:return(function(u,h){const m=wi(u),g=wi(h);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let w=0;w<m.length&&w<g.length;w++){const T=We(m[w],g[w]);if(T!==0)return T}return We(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=We(_t(u.latitude),_t(h.latitude));return m!==0?m:We(_t(u.longitude),_t(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Qg(s.arrayValue,e.arrayValue);case 10:return(function(u,h){var m,g,w,T;const k=u.fields||{},b=h.fields||{},U=(m=k.value)===null||m===void 0?void 0:m.arrayValue,q=(g=b.value)===null||g===void 0?void 0:g.arrayValue,H=We(((w=U?.values)===null||w===void 0?void 0:w.length)||0,((T=q?.values)===null||T===void 0?void 0:T.length)||0);return H!==0?H:Qg(U,q)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Lu.mapValue&&h===Lu.mapValue)return 0;if(u===Lu.mapValue)return 1;if(h===Lu.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),w=h.fields||{},T=Object.keys(w);g.sort(),T.sort();for(let k=0;k<g.length&&k<T.length;++k){const b=We(g[k],T[k]);if(b!==0)return b;const U=Co(m[g[k]],w[T[k]]);if(U!==0)return U}return We(g.length,T.length)})(s.mapValue,e.mapValue);default:throw Ce()}}function Gg(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return We(s,e);const t=Vs(s),i=Vs(e),o=We(t.seconds,i.seconds);return o!==0?o:We(t.nanos,i.nanos)}function Qg(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const u=Co(t[o],i[o]);if(u)return u}return We(t.length,i.length)}function Ro(s){return Dd(s)}function Dd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Vs(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return wi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Te.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",o=!0;for(const u of t.values||[])o?o=!1:i+=",",i+=Dd(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${Dd(t.fields[h])}`;return o+"}"})(s.mapValue):Ce()}function Yg(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Vd(s){return!!s&&"integerValue"in s}function mf(s){return!!s&&"arrayValue"in s}function Xg(s){return!!s&&"nullValue"in s}function Jg(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function qu(s){return!!s&&"mapValue"in s}function DI(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ba(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return xi(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ba(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ba(s.arrayValue.values[t]);return e}return Object.assign({},s)}function VI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ba(t)}setAll(e){let t=zt.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=Ba(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,o)}delete(e){const t=this.field(e.popLast());qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){xi(t,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new gn(Ba(this.value))}}function zv(s){const e=[];return xi(s.fields,((t,i)=>{const o=new zt([t]);if(qu(i)){const u=zv(i.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Sn(e)}class Xt{constructor(e,t,i,o,u,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Xt(e,0,Re.min(),Re.min(),Re.min(),gn.empty(),0)}static newFoundDocument(e,t,i,o){return new Xt(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new Xt(e,2,t,Re.min(),Re.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,Re.min(),Re.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nc{constructor(e,t){this.position=e,this.inclusive=t}}function Zg(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?i=Te.comparator(Te.fromName(h.referenceValue),t.key):i=Co(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function ey(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Tr(s.position[t],e.position[t]))return!1;return!0}class rc{constructor(e,t="asc"){this.field=e,this.dir=t}}function LI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Bv{}class It extends Bv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new MI(e,t,i):t==="array-contains"?new UI(e,i):t==="in"?new zI(e,i):t==="not-in"?new BI(e,i):t==="array-contains-any"?new $I(e,i):new It(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new jI(e,i):new FI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Co(t,this.value)):t!==null&&Ei(this.value)===Ei(t)&&this.matchesComparison(Co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends Bv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ir(e,t)}matches(e){return $v(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $v(s){return s.op==="and"}function qv(s){return OI(s)&&$v(s)}function OI(s){for(const e of s.filters)if(e instanceof ir)return!1;return!0}function Ld(s){if(s instanceof It)return s.field.canonicalString()+s.op.toString()+Ro(s.value);if(qv(s))return s.filters.map((e=>Ld(e))).join(",");{const e=s.filters.map((t=>Ld(t))).join(",");return`${s.op}(${e})`}}function Wv(s,e){return s instanceof It?(function(i,o){return o instanceof It&&i.op===o.op&&i.field.isEqual(o.field)&&Tr(i.value,o.value)})(s,e):s instanceof ir?(function(i,o){return o instanceof ir&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,h,m)=>u&&Wv(h,o.filters[m])),!0):!1})(s,e):void Ce()}function Hv(s){return s instanceof It?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ro(t.value)}`})(s):s instanceof ir?(function(t){return t.op.toString()+" {"+t.getFilters().map(Hv).join(" ,")+"}"})(s):"Filter"}class MI extends It{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class jI extends It{constructor(e,t){super(e,"in",t),this.keys=Kv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FI extends It{constructor(e,t){super(e,"not-in",t),this.keys=Kv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Kv(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class UI extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mf(t)&&tl(t.arrayValue,this.value)}}class zI extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tl(this.value.arrayValue,t)}}class BI extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!tl(this.value.arrayValue,t)}}class $I extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>tl(this.value.arrayValue,i)))}}class qI{constructor(e,t=null,i=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function ty(s,e=null,t=[],i=[],o=null,u=null,h=null){return new qI(s,e,t,i,o,u,h)}function gf(s){const e=Ne(s);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ld(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ro(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ro(i))).join(",")),e.ue=t}return e.ue}function yf(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!LI(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Wv(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!ey(s.startAt,e.startAt)&&ey(s.endAt,e.endAt)}function Od(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class hl{constructor(e,t=null,i=[],o=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WI(s,e,t,i,o,u,h,m){return new hl(s,e,t,i,o,u,h,m)}function vc(s){return new hl(s)}function ny(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Gv(s){return s.collectionGroup!==null}function $a(s){const e=Ne(s);if(e.ce===null){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Bt(zt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((w=>{w.isInequality()&&(m=m.add(w.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new rc(u,i))})),t.has(zt.keyField().canonicalString())||e.ce.push(new rc(zt.keyField(),i))}return e.ce}function _r(s){const e=Ne(s);return e.le||(e.le=HI(e,$a(s))),e.le}function HI(s,e){if(s.limitType==="F")return ty(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new rc(o.field,u)}));const t=s.endAt?new nc(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new nc(s.startAt.position,s.startAt.inclusive):null;return ty(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Md(s,e){const t=s.filters.concat([e]);return new hl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function jd(s,e,t){return new hl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function _c(s,e){return yf(_r(s),_r(e))&&s.limitType===e.limitType}function Qv(s){return`${gf(_r(s))}|lt:${s.limitType}`}function mo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Hv(o))).join(", ")}]`),yc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ro(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ro(o))).join(",")),`Target(${i})`})(_r(s))}; limitType=${s.limitType})`}function wc(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Te.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of $a(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,g){const w=Zg(h,m,g);return h.inclusive?w<=0:w<0})(i.startAt,$a(i),o)||i.endAt&&!(function(h,m,g){const w=Zg(h,m,g);return h.inclusive?w>=0:w>0})(i.endAt,$a(i),o))})(s,e)}function KI(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Yv(s){return(e,t)=>{let i=!1;for(const o of $a(s)){const u=GI(o,e,t);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function GI(s,e,t){const i=s.field.isKeyField()?Te.comparator(e.key,t.key):(function(u,h,m){const g=h.data.field(u),w=m.data.field(u);return g!==null&&w!==null?Co(g,w):Ce()})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ce()}}class Uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,((t,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return Fv(this.inner)}size(){return this.innerSize}}const QI=new dt(Te.comparator);function Kr(){return QI}const Xv=new dt(Te.comparator);function ja(...s){let e=Xv;for(const t of s)e=e.insert(t.key,t);return e}function Jv(s){let e=Xv;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function di(){return qa()}function Zv(){return qa()}function qa(){return new Uo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const YI=new dt(Te.comparator),XI=new Bt(Te.comparator);function Le(...s){let e=XI;for(const t of s)e=e.add(t);return e}const JI=new Bt(We);function ZI(){return JI}function vf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function e_(s){return{integerValue:""+s}}function eS(s,e){return NI(e)?e_(e):vf(s,e)}class Ec{constructor(){this._=void 0}}function tS(s,e,t){return s instanceof nl?(function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ff(u)&&(u=pf(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}})(t,e):s instanceof No?n_(s,e):s instanceof rl?r_(s,e):(function(o,u){const h=t_(o,u),m=ry(h)+ry(o.Pe);return Vd(h)&&Vd(o.Pe)?e_(m):vf(o.serializer,m)})(s,e)}function nS(s,e,t){return s instanceof No?n_(s,e):s instanceof rl?r_(s,e):t}function t_(s,e){return s instanceof sc?(function(i){return Vd(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class nl extends Ec{}class No extends Ec{constructor(e){super(),this.elements=e}}function n_(s,e){const t=s_(e);for(const i of s.elements)t.some((o=>Tr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class rl extends Ec{constructor(e){super(),this.elements=e}}function r_(s,e){let t=s_(e);for(const i of s.elements)t=t.filter((o=>!Tr(o,i)));return{arrayValue:{values:t}}}class sc extends Ec{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ry(s){return _t(s.integerValue||s.doubleValue)}function s_(s){return mf(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class i_{constructor(e,t){this.field=e,this.transform=t}}function rS(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof No&&o instanceof No||i instanceof rl&&o instanceof rl?ko(i.elements,o.elements,Tr):i instanceof sc&&o instanceof sc?Tr(i.Pe,o.Pe):i instanceof nl&&o instanceof nl})(s.transform,e.transform)}class sS{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Tc{}function o_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new _f(s.key,rr.none()):new dl(s.key,s.data,rr.none());{const t=s.data,i=gn.empty();let o=new Bt(zt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),o=o.add(u)}return new Ms(s.key,i,new Sn(o.toArray()),rr.none())}}function iS(s,e,t){s instanceof dl?(function(o,u,h){const m=o.value.clone(),g=iy(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Ms?(function(o,u,h){if(!Wu(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=iy(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(a_(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Wa(s,e,t,i){return s instanceof dl?(function(u,h,m,g){if(!Wu(u.precondition,h))return m;const w=u.value.clone(),T=oy(u.fieldTransforms,g,h);return w.setAll(T),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),null})(s,e,t,i):s instanceof Ms?(function(u,h,m,g){if(!Wu(u.precondition,h))return m;const w=oy(u.fieldTransforms,g,h),T=h.data;return T.setAll(a_(u)),T.setAll(w),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,t,i):(function(u,h,m){return Wu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,e,t)}function oS(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=t_(i.transform,o||null);u!=null&&(t===null&&(t=gn.empty()),t.set(i.field,u))}return t||null}function sy(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ko(i,o,((u,h)=>rS(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class dl extends Tc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ms extends Tc{constructor(e,t,i,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function a_(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function iy(s,e,t){const i=new Map;Ke(s.length===t.length);for(let o=0;o<t.length;o++){const u=s[o],h=u.transform,m=e.data.field(u.field);i.set(u.field,nS(h,m,t[o]))}return i}function oy(s,e,t){const i=new Map;for(const o of s){const u=o.transform,h=t.data.field(o.field);i.set(o.field,tS(u,h,e))}return i}class _f extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aS extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lS{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&iS(u,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Wa(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Wa(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Zv();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const g=o_(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,((t,i)=>sy(t,i)))&&ko(this.baseMutations,e.baseMutations,((t,i)=>sy(t,i)))}}class wf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length);let o=(function(){return YI})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,i[h].version);return new wf(e,t,i,o)}}class uS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class cS{constructor(e,t){this.count=e,this.unchangedNames=t}}var xt,Be;function hS(s){switch(s){default:return Ce();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function l_(s){if(s===void 0)return Hr("GRPC error has no .code"),K.UNKNOWN;switch(s){case xt.OK:return K.OK;case xt.CANCELLED:return K.CANCELLED;case xt.UNKNOWN:return K.UNKNOWN;case xt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case xt.INTERNAL:return K.INTERNAL;case xt.UNAVAILABLE:return K.UNAVAILABLE;case xt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case xt.NOT_FOUND:return K.NOT_FOUND;case xt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case xt.ABORTED:return K.ABORTED;case xt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case xt.DATA_LOSS:return K.DATA_LOSS;default:return Ce()}}(Be=xt||(xt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";function dS(){return new TextEncoder}const fS=new fi([4294967295,4294967295],0);function ay(s){const e=dS().encode(s),t=new Pv;return t.update(e),new Uint8Array(t.digest())}function ly(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new fi([t,i],0),new fi([o,u],0)]}class Ef{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Fa(`Invalid padding: ${t}`);if(i<0)throw new Fa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Fa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Fa(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=fi.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(fi.fromNumber(i)));return o.compare(fS)===1&&(o=new fi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=ay(e),[i,o]=ly(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Ef(u,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.Ie===0)return;const t=ay(e),[i,o]=ly(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xc{constructor(e,t,i,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,fl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new xc(Re.min(),o,new dt(We),Kr(),Le())}}class fl{constructor(e,t,i,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new fl(i,t,Le(),Le(),Le())}}class Hu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class u_{constructor(e,t){this.targetId=e,this.me=t}}class c_{constructor(e,t,i=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class uy{constructor(){this.fe=0,this.ge=hy(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),i=Le();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ce()}})),new fl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=hy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pS{constructor(e){this.Le=e,this.Be=new Map,this.ke=Kr(),this.qe=cy(),this.Qe=new dt(We)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ce()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const u=o.target;if(Od(u))if(i===0){const h=new Te(u.path);this.Ue(t,h,Xt.newNoDocument(h,Re.min()))}else Ke(i===1);else{const h=this.Ye(t);if(h!==i){const m=this.Ze(e),g=m?this.Xe(m,e,h):1;if(g!==0){this.je(t);const w=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,w)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=wi(i).toUint8Array()}catch(g){if(g instanceof Uv)return Ao("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ef(h,o,u)}catch(g){return Ao(g instanceof Fa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((u=>{const h=this.Le.tt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(t,u,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((u,h)=>{const m=this.Je(h);if(m){if(u.current&&Od(m.target)){const g=new Te(m.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,Xt.newNoDocument(g,e))}u.be&&(t.set(h,u.ve()),u.Ce())}}));let i=Le();this.qe.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const w=this.Je(g);return!w||w.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(u))})),this.ke.forEach(((u,h)=>h.setReadTime(e)));const o=new xc(e,t,this.Qe,this.ke,i);return this.ke=Kr(),this.qe=cy(),this.Qe=new dt(We),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new uy,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(We),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uy),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function cy(){return new dt(Te.comparator)}function hy(){return new dt(Te.comparator)}const mS={asc:"ASCENDING",desc:"DESCENDING"},gS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yS={and:"AND",or:"OR"};class vS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fd(s,e){return s.useProto3Json||yc(e)?e:{value:e}}function ic(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function _S(s,e){return ic(s,e.toTimestamp())}function wr(s){return Ke(!!s),Re.fromTimestamp((function(t){const i=Vs(t);return new Rt(i.seconds,i.nanos)})(s))}function Tf(s,e){return Ud(s,e).canonicalString()}function Ud(s,e){const t=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function d_(s){const e=st.fromString(s);return Ke(y_(e)),e}function zd(s,e){return Tf(s.databaseId,e.path)}function vd(s,e){const t=d_(e);if(t.get(1)!==s.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Te(p_(t))}function f_(s,e){return Tf(s.databaseId,e)}function wS(s){const e=d_(s);return e.length===4?st.emptyPath():p_(e)}function Bd(s){return new st(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function p_(s){return Ke(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function dy(s,e,t){return{name:zd(s,e),fields:t.value.mapValue.fields}}function ES(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:Ce()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(w,T){return w.useProto3Json?(Ke(T===void 0||typeof T=="string"),$t.fromBase64String(T||"")):(Ke(T===void 0||T instanceof Buffer||T instanceof Uint8Array),$t.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(w){const T=w.code===void 0?K.UNKNOWN:l_(w.code);return new le(T,w.message||"")})(h);t=new c_(i,o,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=vd(s,i.document.name),u=wr(i.document.updateTime),h=i.document.createTime?wr(i.document.createTime):Re.min(),m=new gn({mapValue:{fields:i.document.fields}}),g=Xt.newFoundDocument(o,u,h,m),w=i.targetIds||[],T=i.removedTargetIds||[];t=new Hu(w,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=vd(s,i.document),u=i.readTime?wr(i.readTime):Re.min(),h=Xt.newNoDocument(o,u),m=i.removedTargetIds||[];t=new Hu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=vd(s,i.document),u=i.removedTargetIds||[];t=new Hu([],u,o,null)}else{if(!("filter"in e))return Ce();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,h=new cS(o,u),m=i.targetId;t=new u_(m,h)}}return t}function TS(s,e){let t;if(e instanceof dl)t={update:dy(s,e.key,e.value)};else if(e instanceof _f)t={delete:zd(s,e.key)};else if(e instanceof Ms)t={update:dy(s,e.key,e.data),updateMask:PS(e.fieldMask)};else{if(!(e instanceof aS))return Ce();t={verify:zd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const m=h.transform;if(m instanceof nl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof No)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof rl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof sc)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw Ce()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:_S(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce()})(s,e.precondition)),t}function xS(s,e){return s&&s.length>0?(Ke(e!==void 0),s.map((t=>(function(o,u){let h=o.updateTime?wr(o.updateTime):wr(u);return h.isEqual(Re.min())&&(h=wr(u)),new sS(h,o.transformResults||[])})(t,e)))):[]}function IS(s,e){return{documents:[f_(s,e.path)]}}function SS(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=f_(s,o);const u=(function(w){if(w.length!==0)return g_(ir.create(w,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(w){if(w.length!==0)return w.map((T=>(function(b){return{field:go(b.field),direction:CS(b.dir)}})(T)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Fd(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{_t:t,parent:o}}function AS(s){let e=wS(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=(function(k){const b=m_(k);return b instanceof ir&&qv(b)?b.getFilters():[b]})(t.where));let h=[];t.orderBy&&(h=(function(k){return k.map((b=>(function(q){return new rc(yo(q.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(b)))})(t.orderBy));let m=null;t.limit&&(m=(function(k){let b;return b=typeof k=="object"?k.value:k,yc(b)?null:b})(t.limit));let g=null;t.startAt&&(g=(function(k){const b=!!k.before,U=k.values||[];return new nc(U,b)})(t.startAt));let w=null;return t.endAt&&(w=(function(k){const b=!k.before,U=k.values||[];return new nc(U,b)})(t.endAt)),WI(e,o,h,u,m,"F",g,w)}function kS(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function m_(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=yo(t.unaryFilter.field);return It.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=yo(t.unaryFilter.field);return It.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=yo(t.unaryFilter.field);return It.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}})(s):s.fieldFilter!==void 0?(function(t){return It.create(yo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ir.create(t.compositeFilter.filters.map((i=>m_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce()}})(t.compositeFilter.op))})(s):Ce()}function CS(s){return mS[s]}function RS(s){return gS[s]}function NS(s){return yS[s]}function go(s){return{fieldPath:s.canonicalString()}}function yo(s){return zt.fromServerFormat(s.fieldPath)}function g_(s){return s instanceof It?(function(t){if(t.op==="=="){if(Jg(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(Xg(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jg(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(Xg(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:RS(t.op),value:t.value}}})(s):s instanceof ir?(function(t){const i=t.getFilters().map((o=>g_(o)));return i.length===1?i[0]:{compositeFilter:{op:NS(t.op),filters:i}}})(s):Ce()}function PS(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function y_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Cs{constructor(e,t,i,o,u=Re.min(),h=Re.min(),m=$t.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bS{constructor(e){this.ct=e}}function DS(s){const e=AS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?jd(e,e.limit,"L"):e}class VS{constructor(){this.un=new LS}addToCollectionParentIndex(e,t){return this.un.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Ds.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class LS{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Bt(st.comparator),u=!o.has(i);return this.index[t]=o.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Bt(st.comparator)).toArray()}}class Po{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Po(0)}static kn(){return new Po(-1)}}class OS{constructor(){this.changes=new Uo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jS{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Wa(i.mutation,o,Sn.empty(),Rt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Le()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Le()){const o=di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((u=>{let h=ja();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=di();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Le())))}populateOverlays(e,t,i){const o=[];return i.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let u=Kr();const h=qa(),m=(function(){return qa()})();return t.forEach(((g,w)=>{const T=i.get(w.key);o.has(w.key)&&(T===void 0||T.mutation instanceof Ms)?u=u.insert(w.key,w):T!==void 0?(h.set(w.key,T.mutation.getFieldMask()),Wa(T.mutation,w,T.mutation.getFieldMask(),Rt.now())):h.set(w.key,Sn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((w,T)=>h.set(w,T))),t.forEach(((w,T)=>{var k;return m.set(w,new MS(T,(k=h.get(w))!==null&&k!==void 0?k:null))})),m)))}recalculateAndSaveOverlays(e,t){const i=qa();let o=new dt(((h,m)=>h-m)),u=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const w=t.get(g);if(w===null)return;let T=i.get(g)||Sn.empty();T=m.applyToLocalView(w,T),i.set(g,T);const k=(o.get(m.batchId)||Le()).add(g);o=o.insert(m.batchId,k)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),w=g.key,T=g.value,k=Zv();T.forEach((b=>{if(!u.has(b)){const U=o_(t.get(b),i.get(b));U!==null&&k.set(b,U),u=u.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(e,w,k))}return X.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-u.size):X.resolve(di());let m=-1,g=u;return h.next((w=>X.forEach(w,((T,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),u.get(T)?X.resolve():this.remoteDocumentCache.getEntry(e,T).next((b=>{g=g.insert(T,b)}))))).next((()=>this.populateOverlays(e,w,u))).next((()=>this.computeViews(e,g,w,Le()))).next((T=>({batchId:m,changes:Jv(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let o=ja();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const u=t.collectionGroup;let h=ja();return this.indexManager.getCollectionParents(e,u).next((m=>X.forEach(m,(g=>{const w=(function(k,b){return new hl(b,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,w,i,o).next((T=>{T.forEach(((k,b)=>{h=h.insert(k,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,o)))).next((h=>{u.forEach(((g,w)=>{const T=w.getKey();h.get(T)===null&&(h=h.insert(T,Xt.newInvalidDocument(T)))}));let m=ja();return h.forEach(((g,w)=>{const T=u.get(g);T!==void 0&&Wa(T.mutation,w,Sn.empty(),Rt.now()),wc(t,w)&&(m=m.insert(g,w))})),m}))}}class FS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return X.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wr(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:DS(o.bundledQuery),readTime:wr(o.readTime)}})(t)),X.resolve()}}class US{constructor(){this.overlays=new dt(Te.comparator),this.Ir=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=di();return X.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,u)=>{this.ht(e,t,u)})),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=di(),u=t.length+1,h=new Te(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,w=g.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let u=new dt(((w,T)=>w-T));const h=this.overlays.getIterator();for(;h.hasNext();){const w=h.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>i){let T=u.get(w.largestBatchId);T===null&&(T=di(),u=u.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const m=di(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((w,T)=>m.set(w,T))),!(m.size()>=o)););return X.resolve(m)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new uS(t,i));let u=this.Ir.get(t);u===void 0&&(u=Le(),this.Ir.set(t,u)),this.Ir.set(t,u.add(i.key))}}class zS{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class xf{constructor(){this.Tr=new Bt(Lt.Er),this.dr=new Bt(Lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Lt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new Lt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new Te(new st([])),i=new Lt(t,e),o=new Lt(t,e+1),u=[];return this.dr.forEachInRange([i,o],(h=>{this.Vr(h),u.push(h.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Te(new st([])),i=new Lt(t,e),o=new Lt(t,e+1);let u=Le();return this.dr.forEachInRange([i,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Lt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Lt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Te.comparator(e.key,t.key)||We(e.wr,t.wr)}static Ar(e,t){return We(e.wr,t.wr)||Te.comparator(e.key,t.key)}}class BS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Bt(Lt.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new lS(u,t,i,o);this.mutationQueue.push(h);for(const m of o)this.br=this.br.add(new Lt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),u=o<0?0:o;return X.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Lt(t,0),o=new Lt(t,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([i,o],(h=>{const m=this.Dr(h.wr);u.push(m)})),X.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Bt(We);return t.forEach((o=>{const u=new Lt(o,0),h=new Lt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],(m=>{i=i.add(m.wr)}))})),X.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let u=i;Te.isDocumentKey(u)||(u=u.child(""));const h=new Lt(new Te(u),0);let m=new Bt(We);return this.br.forEachWhile((g=>{const w=g.key.path;return!!i.isPrefixOf(w)&&(w.length===o&&(m=m.add(g.wr)),!0)}),h),X.resolve(this.Cr(m))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return X.forEach(t.mutations,(o=>{const u=new Lt(o.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new Lt(t,0),o=this.br.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $S{constructor(e){this.Mr=e,this.docs=(function(){return new dt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),u=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let i=Kr();return t.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():Xt.newInvalidDocument(o))})),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let u=Kr();const h=t.path,m=new Te(h.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:w,value:{document:T}}=g.getNext();if(!h.isPrefixOf(w.path))break;w.path.length>h.length+1||AI(SI(T),i)<=0||(o.has(T.key)||wc(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return X.resolve(u)}getAllFromCollectionGroup(e,t,i,o){Ce()}Or(e,t){return X.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new qS(this)}getSize(e){return X.resolve(this.size)}}class qS extends OS{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),X.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class WS{constructor(e){this.persistence=e,this.Nr=new Uo((t=>gf(t)),yf),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xf,this.targetCount=0,this.kr=Po.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),X.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Kn(t),X.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const u=[];return this.Nr.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),X.waitFor(u).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),X.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.Br.containsKey(t))}}class HS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new df(0),this.Kr=!1,this.Kr=!0,this.$r=new zS,this.referenceDelegate=e(this),this.Ur=new WS(this),this.indexManager=new VS,this.remoteDocumentCache=(function(o){return new $S(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new bS(t),this.Gr=new FS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new US,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new BS(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new KS(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,t){return X.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class KS extends CI{constructor(e){super(),this.currentSequenceNumber=e}}class If{constructor(e){this.persistence=e,this.Jr=new xf,this.Yr=null}static Zr(e){return new If(e)}get Xr(){if(this.Yr)return this.Yr;throw Ce()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),X.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,(i=>{const o=Te.fromPath(i);return this.ei(e,o).next((u=>{u||t.removeEntry(o,Re.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return X.or([()=>X.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Sf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Le(),o=Le();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Sf(e,t.fromCache,i,o)}}class GS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Pw()?8:RI(Zt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const u={result:null};return this.Yi(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.Zi(e,t,o,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new GS;return this.Xi(e,t,h).next((m=>{if(u.result=m,this.zi)return this.es(e,t,h,m.size)}))})).next((()=>u.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Va()<=Fe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Va()<=Fe.DEBUG&&pe("QueryEngine","Query:",mo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Va()<=Fe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):X.resolve())}Yi(e,t){if(ny(t))return X.resolve(null);let i=_r(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=jd(t,null,"F"),i=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=Le(...u);return this.Ji.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const w=this.ts(t,m);return this.ns(t,w,h,g.readTime)?this.Yi(e,jd(t,null,"F")):this.rs(e,w,t,g)}))))})))))}Zi(e,t,i,o){return ny(t)||o.isEqual(Re.min())?X.resolve(null):this.Ji.getDocuments(e,i).next((u=>{const h=this.ts(t,u);return this.ns(t,h,i,o)?X.resolve(null):(Va()<=Fe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(t)),this.rs(e,h,t,II(o,-1)).next((m=>m)))}))}ts(e,t){let i=new Bt(Yv(e));return t.forEach(((o,u)=>{wc(e,u)&&(i=i.add(u))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,t,i){return Va()<=Fe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",mo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ds.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}class YS{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new dt(We),this._s=new Uo((u=>gf(u)),yf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function XS(s,e,t,i){return new YS(s,e,t,i)}async function v_(s,e){const t=Ne(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],m=[];let g=Le();for(const w of o){h.push(w.batchId);for(const T of w.mutations)g=g.add(T.key)}for(const w of u){m.push(w.batchId);for(const T of w.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(i,g).next((w=>({hs:w,removedBatchIds:h,addedBatchIds:m})))}))}))}function JS(s,e){const t=Ne(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=t.cs.newChangeBuffer({trackRemovals:!0});return(function(m,g,w,T){const k=w.batch,b=k.keys();let U=X.resolve();return b.forEach((q=>{U=U.next((()=>T.getEntry(g,q))).next((H=>{const $=w.docVersions.get(q);Ke($!==null),H.version.compareTo($)<0&&(k.applyToRemoteDocument(H,w),H.isValidDocument()&&(H.setReadTime(w.commitVersion),T.addEntry(H)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(g,k)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Le();for(let w=0;w<m.mutationResults.length;++w)m.mutationResults[w].transformResults.length>0&&(g=g.add(m.batch.mutations[w].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function __(s){const e=Ne(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function ZS(s,e){const t=Ne(s),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const m=[];e.targetChanges.forEach(((T,k)=>{const b=o.get(k);if(!b)return;m.push(t.Ur.removeMatchingKeys(u,T.removedDocuments,k).next((()=>t.Ur.addMatchingKeys(u,T.addedDocuments,k))));let U=b.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?U=U.withResumeToken($t.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,i)),o=o.insert(k,U),(function(H,$,de){return H.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8?!0:de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0})(b,U,T)&&m.push(t.Ur.updateTargetData(u,U))}));let g=Kr(),w=Le();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(e1(u,h,e.documentUpdates).next((T=>{g=T.Ps,w=T.Is}))),!i.isEqual(Re.min())){const T=t.Ur.getLastRemoteSnapshotVersion(u).next((k=>t.Ur.setTargetsMetadata(u,u.currentSequenceNumber,i)));m.push(T)}return X.waitFor(m).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,w))).next((()=>g))})).then((u=>(t.os=o,u)))}function e1(s,e,t){let i=Le(),o=Le();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=Kr();return t.forEach(((m,g)=>{const w=u.get(m);g.isFoundDocument()!==w.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!w.isValidDocument()||g.version.compareTo(w.version)>0||g.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):pe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",w.version," Watch version:",g.version)})),{Ps:h,Is:o}}))}function t1(s,e){const t=Ne(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function n1(s,e){const t=Ne(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((u=>u?(o=u,X.resolve(o)):t.Ur.allocateTargetId(i).next((h=>(o=new Cs(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function $d(s,e,t){const i=Ne(s),o=i.os.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!cl(h))throw h;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function fy(s,e,t){const i=Ne(s);let o=Re.min(),u=Le();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,w,T){const k=Ne(g),b=k._s.get(T);return b!==void 0?X.resolve(k.os.get(b)):k.Ur.getTargetData(w,T)})(i,h,_r(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:Re.min(),t?u:Le()))).next((m=>(r1(i,KI(e),m),{documents:m,Ts:u})))))}function r1(s,e,t){let i=s.us.get(e)||Re.min();t.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.us.set(e,i)}class py{constructor(){this.activeTargetIds=ZI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s1{constructor(){this.so=new py,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new py,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class i1{_o(e){}shutdown(){}}class my{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ou=null;function _d(){return Ou===null?Ou=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ou++,"0x"+Ou.toString(16)}const o1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Gt="WebChannelConnection";class l1 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(t,i,o,u,h){const m=_d(),g=this.xo(t,i.toUriEncodedString());pe("RestConnection",`Sending RPC '${t}' ${m}:`,g,o);const w={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(w,u,h),this.No(t,g,w,o).then((T=>(pe("RestConnection",`Received RPC '${t}' ${m}: `,T),T)),(T=>{throw Ao("RestConnection",`RPC '${t}' ${m} failed with error: `,T,"url: ",g,"request:",o),T}))}Lo(t,i,o,u,h,m){return this.Mo(t,i,o,u,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((u,h)=>t[h]=u)),o&&o.headers.forEach(((u,h)=>t[h]=u))}xo(t,i){const o=o1[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const u=_d();return new Promise(((h,m)=>{const g=new bv;g.setWithCredentials(!0),g.listenOnce(Dv.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case $u.NO_ERROR:const T=g.getResponseJson();pe(Gt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),h(T);break;case $u.TIMEOUT:pe(Gt,`RPC '${e}' ${u} timed out`),m(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const k=g.getStatus();if(pe(Gt,`RPC '${e}' ${u} failed with status:`,k,"response text:",g.getResponseText()),k>0){let b=g.getResponseJson();Array.isArray(b)&&(b=b[0]);const U=b?.error;if(U&&U.status&&U.message){const q=(function($){const de=$.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(de)>=0?de:K.UNKNOWN})(U.status);m(new le(q,U.message))}else m(new le(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new le(K.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{pe(Gt,`RPC '${e}' ${u} completed.`)}}));const w=JSON.stringify(o);pe(Gt,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",w,i,15)}))}Bo(e,t,i){const o=_d(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Ov(),m=Lv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(g.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const T=u.join("");pe(Gt,`Creating RPC '${e}' stream ${o}: ${T}`,g);const k=h.createWebChannel(T,g);let b=!1,U=!1;const q=new a1({Io:$=>{U?pe(Gt,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(b||(pe(Gt,`Opening RPC '${e}' stream ${o} transport.`),k.open(),b=!0),pe(Gt,`RPC '${e}' stream ${o} sending:`,$),k.send($))},To:()=>k.close()}),H=($,de,ne)=>{$.listen(de,(me=>{try{ne(me)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return H(k,Ma.EventType.OPEN,(()=>{U||(pe(Gt,`RPC '${e}' stream ${o} transport opened.`),q.yo())})),H(k,Ma.EventType.CLOSE,(()=>{U||(U=!0,pe(Gt,`RPC '${e}' stream ${o} transport closed`),q.So())})),H(k,Ma.EventType.ERROR,($=>{U||(U=!0,Ao(Gt,`RPC '${e}' stream ${o} transport errored:`,$),q.So(new le(K.UNAVAILABLE,"The operation could not be completed")))})),H(k,Ma.EventType.MESSAGE,($=>{var de;if(!U){const ne=$.data[0];Ke(!!ne);const me=ne,oe=me.error||((de=me[0])===null||de===void 0?void 0:de.error);if(oe){pe(Gt,`RPC '${e}' stream ${o} received error:`,oe);const we=oe.status;let ge=(function(A){const P=xt[A];if(P!==void 0)return l_(P)})(we),R=oe.message;ge===void 0&&(ge=K.INTERNAL,R="Unknown error status: "+we+" with message "+oe.message),U=!0,q.So(new le(ge,R)),k.close()}else pe(Gt,`RPC '${e}' stream ${o} received:`,ne),q.bo(ne)}})),H(m,Vv.STAT_EVENT,($=>{$.stat===bd.PROXY?pe(Gt,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===bd.NOPROXY&&pe(Gt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.wo()}),0),q}}function wd(){return typeof document<"u"?document:null}function Ic(s){return new vS(s,!0)}class w_{constructor(e,t,i=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class E_{constructor(e,t,i,o,u,h,m,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new w_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new le(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class u1 extends E_{constructor(e,t,i,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=ES(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Re.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?wr(h.readTime):Re.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Bd(this.serializer),t.addTarget=(function(u,h){let m;const g=h.target;if(m=Od(g)?{documents:IS(u,g)}:{query:SS(u,g)._t},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=h_(u,h.resumeToken);const w=Fd(u,h.expectedCount);w!==null&&(m.expectedCount=w)}else if(h.snapshotVersion.compareTo(Re.min())>0){m.readTime=ic(u,h.snapshotVersion.toTimestamp());const w=Fd(u,h.expectedCount);w!==null&&(m.expectedCount=w)}return m})(this.serializer,e);const i=kS(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Bd(this.serializer),t.removeTarget=e,this.a_(t)}}class c1 extends E_{constructor(e,t,i,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=xS(e.writeResults,e.commitTime),i=wr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Bd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>TS(this.serializer,i)))};this.a_(t)}}class h1 extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Mo(e,Ud(t,i),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(K.UNKNOWN,u.toString())}))}Lo(e,t,i,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Lo(e,Ud(t,i),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(K.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class d1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Hr(t),this.D_=!1):pe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class f1{constructor(e,t,i,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((h=>{i.enqueueAndForget((async()=>{Ii(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const w=Ne(g);w.L_.add(4),await pl(w),w.q_.set("Unknown"),w.L_.delete(4),await Sc(w)})(this))}))})),this.q_=new d1(i,o)}}async function Sc(s){if(Ii(s))for(const e of s.B_)await e(!0)}async function pl(s){for(const e of s.B_)await e(!1)}function T_(s,e){const t=Ne(s);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Rf(t)?Cf(t):zo(t).r_()&&kf(t,e))}function Af(s,e){const t=Ne(s),i=zo(t);t.N_.delete(e),i.r_()&&x_(t,e),t.N_.size===0&&(i.r_()?i.o_():Ii(t)&&t.q_.set("Unknown"))}function kf(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zo(s).A_(e)}function x_(s,e){s.Q_.xe(e),zo(s).R_(e)}function Cf(s){s.Q_=new pS({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),zo(s).start(),s.q_.v_()}function Rf(s){return Ii(s)&&!zo(s).n_()&&s.N_.size>0}function Ii(s){return Ne(s).L_.size===0}function I_(s){s.Q_=void 0}async function p1(s){s.q_.set("Online")}async function m1(s){s.N_.forEach(((e,t)=>{kf(s,e)}))}async function g1(s,e){I_(s),Rf(s)?(s.q_.M_(e),Cf(s)):s.q_.set("Unknown")}async function y1(s,e,t){if(s.q_.set("Online"),e instanceof c_&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.N_.delete(m),o.Q_.removeTarget(m))})(s,e)}catch(i){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await oc(s,i)}else if(e instanceof Hu?s.Q_.Ke(e):e instanceof u_?s.Q_.He(e):s.Q_.We(e),!t.isEqual(Re.min()))try{const i=await __(s.localStore);t.compareTo(i)>=0&&await(function(u,h){const m=u.Q_.rt(h);return m.targetChanges.forEach(((g,w)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.N_.get(w);T&&u.N_.set(w,T.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,w)=>{const T=u.N_.get(g);if(!T)return;u.N_.set(g,T.withResumeToken($t.EMPTY_BYTE_STRING,T.snapshotVersion)),x_(u,g);const k=new Cs(T.target,g,w,T.sequenceNumber);kf(u,k)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(i){pe("RemoteStore","Failed to raise snapshot:",i),await oc(s,i)}}async function oc(s,e,t){if(!cl(e))throw e;s.L_.add(1),await pl(s),s.q_.set("Offline"),t||(t=()=>__(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{pe("RemoteStore","Retrying IndexedDB access"),await t(),s.L_.delete(1),await Sc(s)}))}function S_(s,e){return e().catch((t=>oc(s,t,e)))}async function Ac(s){const e=Ne(s),t=Ls(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;v1(e);)try{const o=await t1(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,_1(e,o)}catch(o){await oc(e,o)}A_(e)&&k_(e)}function v1(s){return Ii(s)&&s.O_.length<10}function _1(s,e){s.O_.push(e);const t=Ls(s);t.r_()&&t.V_&&t.m_(e.mutations)}function A_(s){return Ii(s)&&!Ls(s).n_()&&s.O_.length>0}function k_(s){Ls(s).start()}async function w1(s){Ls(s).p_()}async function E1(s){const e=Ls(s);for(const t of s.O_)e.m_(t.mutations)}async function T1(s,e,t){const i=s.O_.shift(),o=wf.from(i,e,t);await S_(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Ac(s)}async function x1(s,e){e&&Ls(s).V_&&await(async function(i,o){if((function(h){return hS(h)&&h!==K.ABORTED})(o.code)){const u=i.O_.shift();Ls(i).s_(),await S_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Ac(i)}})(s,e),A_(s)&&k_(s)}async function gy(s,e){const t=Ne(s);t.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const i=Ii(t);t.L_.add(3),await pl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Sc(t)}async function I1(s,e){const t=Ne(s);e?(t.L_.delete(2),await Sc(t)):e||(t.L_.add(2),await pl(t),t.q_.set("Unknown"))}function zo(s){return s.K_||(s.K_=(function(t,i,o){const u=Ne(t);return u.w_(),new u1(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:p1.bind(null,s),Ro:m1.bind(null,s),mo:g1.bind(null,s),d_:y1.bind(null,s)}),s.B_.push((async e=>{e?(s.K_.s_(),Rf(s)?Cf(s):s.q_.set("Unknown")):(await s.K_.stop(),I_(s))}))),s.K_}function Ls(s){return s.U_||(s.U_=(function(t,i,o){const u=Ne(t);return u.w_(),new c1(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:w1.bind(null,s),mo:x1.bind(null,s),f_:E1.bind(null,s),g_:T1.bind(null,s)}),s.B_.push((async e=>{e?(s.U_.s_(),await Ac(s)):(await s.U_.stop(),s.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))}))),s.U_}class Nf{constructor(e,t,i,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,u){const h=Date.now()+i,m=new Nf(e,t,h,o,u);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pf(s,e){if(Hr("AsyncQueue",`${e}: ${s}`),cl(s))return new le(K.UNAVAILABLE,`${e}: ${s}`);throw s}class To{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=ja(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new To(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new To;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class yy{constructor(){this.W_=new dt(Te.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ce():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class bo{constructor(e,t,i,o,u,h,m,g,w){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=w}static fromInitialDocuments(e,t,i,o,u){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new bo(e,t,To.emptySet(t),h,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class S1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class A1{constructor(){this.queries=vy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Ne(t),u=o.queries;o.queries=vy(),u.forEach(((h,m)=>{for(const g of m.j_)g.onError(i)}))})(this,new le(K.ABORTED,"Firestore shutting down"))}}function vy(){return new Uo((s=>Qv(s)),_c)}async function bf(s,e){const t=Ne(s);let i=3;const o=e.query;let u=t.queries.get(o);u?!u.H_()&&e.J_()&&(i=2):(u=new S1,i=e.J_()?0:1);try{switch(i){case 0:u.z_=await t.onListen(o,!0);break;case 1:u.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Pf(h,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.j_.push(e),e.Z_(t.onlineState),u.z_&&e.X_(u.z_)&&Vf(t)}async function Df(s,e){const t=Ne(s),i=e.query;let o=3;const u=t.queries.get(i);if(u){const h=u.j_.indexOf(e);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function k1(s,e){const t=Ne(s);let i=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.j_)m.X_(o)&&(i=!0);h.z_=o}}i&&Vf(t)}function C1(s,e,t){const i=Ne(s),o=i.queries.get(e);if(o)for(const u of o.j_)u.onError(t);i.queries.delete(e)}function Vf(s){s.Y_.forEach((e=>{e.next()}))}var qd,_y;(_y=qd||(qd={})).ea="default",_y.Cache="cache";class Lf{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qd.Cache}}class C_{constructor(e){this.key=e}}class R_{constructor(e){this.key=e}}class R1{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Le(),this.mutatedKeys=Le(),this.Aa=Yv(e),this.Ra=new To(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new yy,o=t?t.Ra:this.Ra;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,w=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,k)=>{const b=o.get(T),U=wc(this.query,k)?k:null,q=!!b&&this.mutatedKeys.has(b.key),H=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let $=!1;b&&U?b.data.isEqual(U.data)?q!==H&&(i.track({type:3,doc:U}),$=!0):this.ga(b,U)||(i.track({type:2,doc:U}),$=!0,(g&&this.Aa(U,g)>0||w&&this.Aa(U,w)<0)&&(m=!0)):!b&&U?(i.track({type:0,doc:U}),$=!0):b&&!U&&(i.track({type:1,doc:b}),$=!0,(g||w)&&(m=!0)),$&&(U?(h=h.add(U),u=H?u.add(T):u.delete(T)):(h=h.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),u=u.delete(T.key),i.track({type:1,doc:T})}return{Ra:h,fa:i,ns:m,mutatedKeys:u}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((T,k)=>(function(U,q){const H=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return H(U)-H(q)})(T.type,k.type)||this.Aa(T.doc,k.doc))),this.pa(i),o=o!=null&&o;const m=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,w=g!==this.Ea;return this.Ea=g,h.length!==0||w?{snapshot:new bo(this.query,e.Ra,u,h,e.mutatedKeys,g===0,w,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Le(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new R_(i))})),this.da.forEach((i=>{e.has(i)||t.push(new C_(i))})),t}ba(e){this.Ta=e.Ts,this.da=Le();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class N1{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class P1{constructor(e){this.key=e,this.va=!1}}class b1{constructor(e,t,i,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Uo((m=>Qv(m)),_c),this.Ma=new Map,this.xa=new Set,this.Oa=new dt(Te.comparator),this.Na=new Map,this.La=new xf,this.Ba={},this.ka=new Map,this.qa=Po.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function D1(s,e,t=!0){const i=L_(s);let o;const u=i.Fa.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await N_(i,e,t,!0),o}async function V1(s,e){const t=L_(s);await N_(t,e,!0,!1)}async function N_(s,e,t,i){const o=await n1(s.localStore,_r(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let m;return i&&(m=await L1(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&T_(s.remoteStore,o),m}async function L1(s,e,t,i,o){s.Ka=(k,b,U)=>(async function(H,$,de,ne){let me=$.view.ma(de);me.ns&&(me=await fy(H.localStore,$.query,!1).then((({documents:R})=>$.view.ma(R,me))));const oe=ne&&ne.targetChanges.get($.targetId),we=ne&&ne.targetMismatches.get($.targetId)!=null,ge=$.view.applyChanges(me,H.isPrimaryClient,oe,we);return Ey(H,$.targetId,ge.wa),ge.snapshot})(s,k,b,U);const u=await fy(s.localStore,e,!0),h=new R1(e,u.Ts),m=h.ma(u.documents),g=fl.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),w=h.applyChanges(m,s.isPrimaryClient,g);Ey(s,t,w.wa);const T=new N1(e,t,h);return s.Fa.set(e,T),s.Ma.has(t)?s.Ma.get(t).push(e):s.Ma.set(t,[e]),w.snapshot}async function O1(s,e,t){const i=Ne(s),o=i.Fa.get(e),u=i.Ma.get(o.targetId);if(u.length>1)return i.Ma.set(o.targetId,u.filter((h=>!_c(h,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await $d(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Af(i.remoteStore,o.targetId),Wd(i,o.targetId)})).catch(ul)):(Wd(i,o.targetId),await $d(i.localStore,o.targetId,!0))}async function M1(s,e){const t=Ne(s),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Af(t.remoteStore,i.targetId))}async function j1(s,e,t){const i=W1(s);try{const o=await(function(h,m){const g=Ne(h),w=Rt.now(),T=m.reduce(((U,q)=>U.add(q.key)),Le());let k,b;return g.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let q=Kr(),H=Le();return g.cs.getEntries(U,T).next(($=>{q=$,q.forEach(((de,ne)=>{ne.isValidDocument()||(H=H.add(de))}))})).next((()=>g.localDocuments.getOverlayedDocuments(U,q))).next(($=>{k=$;const de=[];for(const ne of m){const me=oS(ne,k.get(ne.key).overlayedDocument);me!=null&&de.push(new Ms(ne.key,me,zv(me.value.mapValue),rr.exists(!0)))}return g.mutationQueue.addMutationBatch(U,w,de,m)})).next(($=>{b=$;const de=$.applyToLocalDocumentSet(k,H);return g.documentOverlayCache.saveOverlays(U,$.batchId,de)}))})).then((()=>({batchId:b.batchId,changes:Jv(k)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let w=h.Ba[h.currentUser.toKey()];w||(w=new dt(We)),w=w.insert(m,g),h.Ba[h.currentUser.toKey()]=w})(i,o.batchId,t),await ml(i,o.changes),await Ac(i.remoteStore)}catch(o){const u=Pf(o,"Failed to persist write");t.reject(u)}}async function P_(s,e){const t=Ne(s);try{const i=await ZS(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Na.get(u);h&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Ke(h.va):o.removedDocuments.size>0&&(Ke(h.va),h.va=!1))})),await ml(t,i,e)}catch(i){await ul(i)}}function wy(s,e,t){const i=Ne(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((u,h)=>{const m=h.view.Z_(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Ne(h);g.onlineState=m;let w=!1;g.queries.forEach(((T,k)=>{for(const b of k.j_)b.Z_(m)&&(w=!0)})),w&&Vf(g)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function F1(s,e,t){const i=Ne(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),u=o&&o.key;if(u){let h=new dt(Te.comparator);h=h.insert(u,Xt.newNoDocument(u,Re.min()));const m=Le().add(u),g=new xc(Re.min(),new Map,new dt(We),h,m);await P_(i,g),i.Oa=i.Oa.remove(u),i.Na.delete(e),Of(i)}else await $d(i.localStore,e,!1).then((()=>Wd(i,e,t))).catch(ul)}async function U1(s,e){const t=Ne(s),i=e.batch.batchId;try{const o=await JS(t.localStore,e);D_(t,i,null),b_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ml(t,o)}catch(o){await ul(o)}}async function z1(s,e,t){const i=Ne(s);try{const o=await(function(h,m){const g=Ne(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let T;return g.mutationQueue.lookupMutationBatch(w,m).next((k=>(Ke(k!==null),T=k.keys(),g.mutationQueue.removeMutationBatch(w,k)))).next((()=>g.mutationQueue.performConsistencyCheck(w))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(w,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,T))).next((()=>g.localDocuments.getDocuments(w,T)))}))})(i.localStore,e);D_(i,e,t),b_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ml(i,o)}catch(o){await ul(o)}}function b_(s,e){(s.ka.get(e)||[]).forEach((t=>{t.resolve()})),s.ka.delete(e)}function D_(s,e,t){const i=Ne(s);let o=i.Ba[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Wd(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),t&&s.Ca.$a(i,t);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach((i=>{s.La.containsKey(i)||V_(s,i)}))}function V_(s,e){s.xa.delete(e.path.canonicalString());const t=s.Oa.get(e);t!==null&&(Af(s.remoteStore,t),s.Oa=s.Oa.remove(e),s.Na.delete(t),Of(s))}function Ey(s,e,t){for(const i of t)i instanceof C_?(s.La.addReference(i.key,e),B1(s,i)):i instanceof R_?(pe("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||V_(s,i.key)):Ce()}function B1(s,e){const t=e.key,i=t.path.canonicalString();s.Oa.get(t)||s.xa.has(i)||(pe("SyncEngine","New document in limbo: "+t),s.xa.add(i),Of(s))}function Of(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const t=new Te(st.fromString(e)),i=s.qa.next();s.Na.set(i,new P1(t)),s.Oa=s.Oa.insert(t,i),T_(s.remoteStore,new Cs(_r(vc(t.path)),i,"TargetPurposeLimboResolution",df.oe))}}async function ml(s,e,t){const i=Ne(s),o=[],u=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach(((m,g)=>{h.push(i.Ka(g,e,t).then((w=>{var T;if((w||t)&&i.isPrimaryClient){const k=w?!w.fromCache:(T=t?.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;i.sharedClientState.updateQueryState(g.targetId,k?"current":"not-current")}if(w){o.push(w);const k=Sf.Wi(g.targetId,w);u.push(k)}})))})),await Promise.all(h),i.Ca.d_(o),await(async function(g,w){const T=Ne(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>X.forEach(w,(b=>X.forEach(b.$i,(U=>T.persistence.referenceDelegate.addReference(k,b.targetId,U))).next((()=>X.forEach(b.Ui,(U=>T.persistence.referenceDelegate.removeReference(k,b.targetId,U)))))))))}catch(k){if(!cl(k))throw k;pe("LocalStore","Failed to update sequence numbers: "+k)}for(const k of w){const b=k.targetId;if(!k.fromCache){const U=T.os.get(b),q=U.snapshotVersion,H=U.withLastLimboFreeSnapshotVersion(q);T.os=T.os.insert(b,H)}}})(i.localStore,u))}async function $1(s,e){const t=Ne(s);if(!t.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const i=await v_(t.localStore,e);t.currentUser=e,(function(u,h){u.ka.forEach((m=>{m.forEach((g=>{g.reject(new le(K.CANCELLED,h))}))})),u.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ml(t,i.hs)}}function q1(s,e){const t=Ne(s),i=t.Na.get(e);if(i&&i.va)return Le().add(i.key);{let o=Le();const u=t.Ma.get(e);if(!u)return o;for(const h of u){const m=t.Fa.get(h);o=o.unionWith(m.view.Va)}return o}}function L_(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=P_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F1.bind(null,e),e.Ca.d_=k1.bind(null,e.eventManager),e.Ca.$a=C1.bind(null,e.eventManager),e}function W1(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z1.bind(null,e),e}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ic(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return XS(this.persistence,new QS,e.initialUser,this.serializer)}Ga(e){return new HS(If.Zr,this.serializer)}Wa(e){return new s1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class Hd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$1.bind(null,this.syncEngine),await I1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new A1})()}createDatastore(e){const t=Ic(e.databaseInfo.databaseId),i=(function(u){return new l1(u)})(e.databaseInfo);return(function(u,h,m,g){return new h1(u,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,u,h,m){return new f1(i,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>wy(this.syncEngine,t,0)),(function(){return my.D()?new my:new i1})())}createSyncEngine(e,t){return(function(o,u,h,m,g,w,T){const k=new b1(o,u,h,m,g,w);return T&&(k.Qa=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=Ne(o);pe("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await pl(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Hd.provider={build:()=>new Hd};class Mf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class H1{constructor(e,t,i,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Yt.UNAUTHENTICATED,this.clientId=jv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{pe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(pe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Pf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ed(s,e){s.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await v_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Ty(s,e){s.asyncQueue.verifyOperationInProgress();const t=await K1(s);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>gy(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>gy(e.remoteStore,o))),s._onlineComponents=e}async function K1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ed(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ao("Error using user provided cache. Falling back to memory cache: "+t),await Ed(s,new ac)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await Ed(s,new ac);return s._offlineComponents}async function O_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await Ty(s,s._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await Ty(s,new Hd))),s._onlineComponents}function G1(s){return O_(s).then((e=>e.syncEngine))}async function lc(s){const e=await O_(s),t=e.eventManager;return t.onListen=D1.bind(null,e.syncEngine),t.onUnlisten=O1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=V1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=M1.bind(null,e.syncEngine),t}function Q1(s,e,t={}){const i=new $r;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,w){const T=new Mf({next:b=>{T.Za(),h.enqueueAndForget((()=>Df(u,k)));const U=b.docs.has(m);!U&&b.fromCache?w.reject(new le(K.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&b.fromCache&&g&&g.source==="server"?w.reject(new le(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(b)},error:b=>w.reject(b)}),k=new Lf(vc(m.path),T,{includeMetadataChanges:!0,_a:!0});return bf(u,k)})(await lc(s),s.asyncQueue,e,t,i))),i.promise}function Y1(s,e,t={}){const i=new $r;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,w){const T=new Mf({next:b=>{T.Za(),h.enqueueAndForget((()=>Df(u,k))),b.fromCache&&g.source==="server"?w.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(b)},error:b=>w.reject(b)}),k=new Lf(m,T,{includeMetadataChanges:!0,_a:!0});return bf(u,k)})(await lc(s),s.asyncQueue,e,t,i))),i.promise}function M_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const xy=new Map;function j_(s,e,t){if(!t)throw new le(K.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function X1(s,e,t,i){if(e===!0&&i===!0)throw new le(K.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Iy(s){if(!Te.isDocumentKey(s))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Sy(s){if(Te.isDocumentKey(s))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function kc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ce()}function jn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kc(s);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}class Ay{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M_((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ay({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ay(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new mI;switch(i.type){case"firstParty":return new _I(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=xy.get(t);i&&(pe("ComponentProvider","Removing Datastore"),xy.delete(t),i.terminate())})(this),Promise.resolve()}}function J1(s,e,t,i={}){var o;const u=(s=jn(s,Cc))._getSettings(),h=`${e}:${t}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),i.mockUserToken){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Yt.MOCK_USER;else{m=Iw(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Yt(w)}s._authCredentials=new gI(new Mv(m,g))}}class Si{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class an{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class bs extends Si{constructor(e,t,i){super(e,t,vc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Te(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function F_(s,e,...t){if(s=gt(s),j_("collection","path",e),s instanceof Cc){const i=st.fromString(e,...t);return Sy(i),new bs(s,null,i)}{if(!(s instanceof an||s instanceof bs))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(st.fromString(e,...t));return Sy(i),new bs(s.firestore,null,i)}}function mt(s,e,...t){if(s=gt(s),arguments.length===1&&(e=jv.newId()),j_("doc","path",e),s instanceof Cc){const i=st.fromString(e,...t);return Iy(i),new an(s,null,new Te(i))}{if(!(s instanceof an||s instanceof bs))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(st.fromString(e,...t));return Iy(i),new an(s.firestore,s instanceof bs?s.converter:null,new Te(i))}}class ky{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new w_(this,"async_queue_retry"),this.Vu=()=>{const i=wd();i&&pe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=wd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=wd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new $r;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cl(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m})(i);throw Hr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Nf.createAndSchedule(this,e,t,i,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&Ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Cy(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Os extends Cc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new ky,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function Z1(s,e){const t=typeof s=="object"?s:Hy(),i=typeof s=="string"?s:"(default)",o=ef(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=Tw("firestore");u&&J1(o,...u)}return o}function Rc(s){if(s._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||eA(s),s._firestoreClient}function eA(s){var e,t,i;const o=s._freezeSettings(),u=(function(m,g,w,T){return new bI(m,g,w,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,M_(T.experimentalLongPollingOptions),T.useFetchStreams)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new H1(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&(function(m){const g=m?._online.build();return{_offline:m?._offline.build(g),_online:g}})(s._componentsProvider))}class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do($t.fromBase64String(e))}catch(t){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Do($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gl{constructor(e){this._methodName=e}}class jf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}class Ff{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}}const tA=/^__.*__$/;class nA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,t,this.fieldTransforms):new dl(e,this.data,t,this.fieldTransforms)}}class U_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ms(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function z_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class Pc{constructor(e,t,i,o,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(z_(this.Cu)&&tA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class rA{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ic(e)}Qu(e,t,i,o=!1){return new Pc({Cu:e,methodName:t,qu:i,path:zt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uf(s){const e=s._freezeSettings(),t=Ic(s._databaseId);return new rA(s._databaseId,!!e.ignoreUndefinedProperties,t)}function sA(s,e,t,i,o,u={}){const h=s.Qu(u.merge||u.mergeFields?2:0,e,t,o);$f("Data must be an object, but it was:",h,i);const m=B_(i,h);let g,w;if(u.merge)g=new Sn(h.fieldMask),w=h.fieldTransforms;else if(u.mergeFields){const T=[];for(const k of u.mergeFields){const b=Kd(e,k,t);if(!h.contains(b))throw new le(K.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);q_(T,b)||T.push(b)}g=new Sn(T),w=h.fieldTransforms.filter((k=>g.covers(k.field)))}else g=null,w=h.fieldTransforms;return new nA(new gn(m),g,w)}class bc extends gl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}function iA(s,e,t){return new Pc({Cu:3,qu:e.settings.qu,methodName:s._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zf extends gl{_toFieldTransform(e){return new i_(e.path,new nl)}isEqual(e){return e instanceof zf}}class Bf extends gl{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=iA(this,e,!0),i=this.Ku.map((u=>Bo(u,t))),o=new No(i);return new i_(e.path,o)}isEqual(e){return e instanceof Bf&&Qa(this.Ku,e.Ku)}}function oA(s,e,t,i){const o=s.Qu(1,e,t);$f("Data must be an object, but it was:",o,i);const u=[],h=gn.empty();xi(i,((g,w)=>{const T=qf(e,g,t);w=gt(w);const k=o.Nu(T);if(w instanceof bc)u.push(T);else{const b=Bo(w,k);b!=null&&(u.push(T),h.set(T,b))}}));const m=new Sn(u);return new U_(h,m,o.fieldTransforms)}function aA(s,e,t,i,o,u){const h=s.Qu(1,e,t),m=[Kd(e,i,t)],g=[o];if(u.length%2!=0)throw new le(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<u.length;b+=2)m.push(Kd(e,u[b])),g.push(u[b+1]);const w=[],T=gn.empty();for(let b=m.length-1;b>=0;--b)if(!q_(w,m[b])){const U=m[b];let q=g[b];q=gt(q);const H=h.Nu(U);if(q instanceof bc)w.push(U);else{const $=Bo(q,H);$!=null&&(w.push(U),T.set(U,$))}}const k=new Sn(w);return new U_(T,k,h.fieldTransforms)}function lA(s,e,t,i=!1){return Bo(t,s.Qu(i?4:3,e))}function Bo(s,e){if($_(s=gt(s)))return $f("Unsupported field value:",e,s),B_(s,e);if(s instanceof gl)return(function(i,o){if(!z_(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const u=[];let h=0;for(const m of i){let g=Bo(m,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return eS(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Rt.fromDate(i);return{timestampValue:ic(o.serializer,u)}}if(i instanceof Rt){const u=new Rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ic(o.serializer,u)}}if(i instanceof jf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Do)return{bytesValue:h_(o.serializer,i._byteString)};if(i instanceof an){const u=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Tf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ff)return(function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return vf(m.serializer,g)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${kc(i)}`)})(s,e)}function B_(s,e){const t={};return Fv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(s,((i,o)=>{const u=Bo(o,e.Mu(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function $_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Rt||s instanceof jf||s instanceof Do||s instanceof an||s instanceof gl||s instanceof Ff)}function $f(s,e,t){if(!$_(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=kc(t);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function Kd(s,e,t){if((e=gt(e))instanceof Nc)return e._internalPath;if(typeof e=="string")return qf(s,e);throw uc("Field path arguments must be of type string or ",s,!1,void 0,t)}const uA=new RegExp("[~\\*/\\[\\]]");function qf(s,e,t){if(e.search(uA)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Nc(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function uc(s,e,t,i,o){const u=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new le(K.INVALID_ARGUMENT,m+s+g)}function q_(s,e){return s.some((t=>t.isEqual(e)))}class W_{constructor(e,t,i,o,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cA extends W_{data(){return super.data()}}function Wf(s,e){return typeof e=="string"?qf(s,e):e instanceof Nc?e._internalPath:e._delegate._internalPath}function H_(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hf{}class hA extends Hf{}function xo(s,e,...t){let i=[];e instanceof Hf&&i.push(e),i=i.concat(t),(function(u){const h=u.filter((g=>g instanceof Kf)).length,m=u.filter((g=>g instanceof Dc)).length;if(h>1||h>0&&m>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class Dc extends hA{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Dc(e,t,i)}_apply(e){const t=this._parse(e);return K_(e._query,t),new Si(e.firestore,e.converter,Md(e._query,t))}_parse(e){const t=Uf(e.firestore);return(function(u,h,m,g,w,T,k){let b;if(w.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Ny(k,T);const U=[];for(const q of k)U.push(Ry(g,u,q));b={arrayValue:{values:U}}}else b=Ry(g,u,k)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Ny(k,T),b=lA(m,h,k,T==="in"||T==="not-in");return It.create(w,T,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cc(s,e,t){const i=e,o=Wf("where",s);return Dc._create(o,i,t)}class Kf extends Hf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ir.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)K_(h,g),h=Md(h,g)})(e._query,t),new Si(e.firestore,e.converter,Md(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ry(s,e,t){if(typeof(t=gt(t))=="string"){if(t==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gv(e)&&t.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(st.fromString(t));if(!Te.isDocumentKey(i))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Yg(s,new Te(i))}if(t instanceof an)return Yg(s,t._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kc(t)}.`)}function Ny(s,e){if(!Array.isArray(s)||s.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function K_(s,e){const t=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dA{convertValue(e,t="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return xi(e,((o,u)=>{i[o]=this.convertValue(u,t)})),i}convertVectorValue(e){var t,i,o;const u=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>_t(h.doubleValue)));return new Ff(u)}convertGeoPoint(e){return new jf(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=pf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Za(e));default:return null}}convertTimestamp(e){const t=Vs(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=st.fromString(e);Ke(y_(i));const o=new el(i.get(1),i.get(3)),u=new Te(i.popFirst(5));return o.isEqual(t)||Hr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function fA(s,e,t){let i;return i=s?s.toFirestore(e):e,i}class Ua{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class G_ extends W_{constructor(e,t,i,o,u,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Wf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ku extends G_{data(e={}){return super.data(e)}}class Q_{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ua(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ku(this._firestore,this._userDataWriter,i.key,i,new Ua(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Ku(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ua(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Ku(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ua(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let w=-1,T=-1;return m.type!==0&&(w=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),T=h.indexOf(m.doc.key)),{type:pA(m.type),doc:g,oldIndex:w,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pA(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}function mA(s){s=jn(s,an);const e=jn(s.firestore,Os);return Q1(Rc(e),s._key).then((t=>Y_(e,s,t)))}class Gf extends dA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}function Py(s){s=jn(s,Si);const e=jn(s.firestore,Os),t=Rc(e),i=new Gf(e);return H_(s._query),Y1(t,s._query).then((o=>new Q_(e,i,s,o)))}function In(s,e,t,...i){s=jn(s,an);const o=jn(s.firestore,Os),u=Uf(o);let h;return h=typeof(e=gt(e))=="string"||e instanceof Nc?aA(u,"updateDoc",s._key,e,t,i):oA(u,"updateDoc",s._key,e),Qf(o,[h.toMutation(s._key,rr.exists(!0))])}function Ha(s){return Qf(jn(s.firestore,Os),[new _f(s._key,rr.none())])}function hc(s,e){const t=jn(s.firestore,Os),i=mt(s),o=fA(s.converter,e);return Qf(t,[sA(Uf(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,rr.exists(!1))]).then((()=>i))}function Vo(s,...e){var t,i,o;s=gt(s);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Cy(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(Cy(e[h])){const k=e[h];e[h]=(t=k.next)===null||t===void 0?void 0:t.bind(k),e[h+1]=(i=k.error)===null||i===void 0?void 0:i.bind(k),e[h+2]=(o=k.complete)===null||o===void 0?void 0:o.bind(k)}let g,w,T;if(s instanceof an)w=jn(s.firestore,Os),T=vc(s._key.path),g={next:k=>{e[h]&&e[h](Y_(w,s,k))},error:e[h+1],complete:e[h+2]};else{const k=jn(s,Si);w=jn(k.firestore,Os),T=k._query;const b=new Gf(w);g={next:U=>{e[h]&&e[h](new Q_(w,b,k,U))},error:e[h+1],complete:e[h+2]},H_(s._query)}return(function(b,U,q,H){const $=new Mf(H),de=new Lf(U,$,q);return b.asyncQueue.enqueueAndForget((async()=>bf(await lc(b),de))),()=>{$.Za(),b.asyncQueue.enqueueAndForget((async()=>Df(await lc(b),de)))}})(Rc(w),T,m,g)}function Qf(s,e){return(function(i,o){const u=new $r;return i.asyncQueue.enqueueAndForget((async()=>j1(await G1(i),o,u))),u.promise})(Rc(s),e)}function Y_(s,e,t){const i=t.docs.get(e._key),o=new Gf(s);return new G_(s,o,e._key,i,new Ua(t.hasPendingWrites,t.fromCache),e.converter)}function pi(){return new zf("serverTimestamp")}function dc(...s){return new Bf("arrayUnion",s)}(function(e,t=!0){(function(o){Fo=o})(Mo),So(new gi("firestore",((i,{instanceIdentifier:o,options:u})=>{const h=i.getProvider("app").getImmediate(),m=new Os(new yI(i.getProvider("auth-internal")),new EI(i.getProvider("app-check-internal")),(function(w,T){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(w.options.projectId,T)})(h,o),h);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Ps(Wg,"4.7.3",e),Ps(Wg,"4.7.3","esm2017")})();var gA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yA=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Qe=(s,e)=>{const t=he.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:h,className:m="",children:g,...w},T)=>he.createElement("svg",{ref:T,...gA,width:o,height:o,stroke:i,strokeWidth:h?Number(u)*24/Number(o):u,className:["lucide",`lucide-${yA(s)}`,m].join(" "),...w},[...e.map(([k,b])=>he.createElement(k,b)),...Array.isArray(g)?g:[g]]));return t.displayName=`${s}`,t};const Gd=Qe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const by=Qe("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);const vA=Qe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);const Yf=Qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const _A=Qe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);const wA=Qe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Lo=Qe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Qd=Qe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const EA=Qe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const X_=Qe("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);const Xf=Qe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const TA=Qe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const Dy=Qe("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const Yd=Qe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const xA=Qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const IA=Qe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Vy=Qe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Oo=Qe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);const xs=Qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Jf=Qe("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);const Zf=Qe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const Ka=Qe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const Ly=Qe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const SA=Qe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const AA=Qe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);const Io=Qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Ga=Qe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Mu=Qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kA=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyCFwluXW6iFFyuLw1pgkP8kGQ94FNxa5uc",authDomain:"lista-de-la-compra-c6e01.firebaseapp.com",projectId:"lista-de-la-compra-c6e01",storageBucket:"lista-de-la-compra-c6e01.firebasestorage.app",messagingSenderId:"1039300941532",appId:"1:1039300941532:web:dc31680c56f6c191468619",measurementId:"G-EQYCX8XJD6"},J_=Wy(kA),po=fI(J_),Jt=Z1(J_),Z_=typeof __app_id<"u"?__app_id:"default-app-id",e0="shopping_lists",on=s=>F_(s,"artifacts",Z_,"public","data",e0),Qt=s=>F_(Jt,"artifacts",Z_,"public","data",e0,s,"items"),Oy=[{name:"blue",color:"bg-blue-600",text:"text-blue-600",light:"bg-blue-50"},{name:"green",color:"bg-green-600",text:"text-green-600",light:"bg-green-50"},{name:"orange",color:"bg-orange-500",text:"text-orange-500",light:"bg-orange-50"},{name:"purple",color:"bg-purple-600",text:"text-purple-600",light:"bg-purple-50"},{name:"red",color:"bg-red-600",text:"text-red-600",light:"bg-red-50"},{name:"teal",color:"bg-teal-600",text:"text-teal-600",light:"bg-teal-50"},{name:"yellow",color:"bg-yellow-500",text:"text-yellow-600",light:"bg-yellow-50"},{name:"pink",color:"bg-pink-600",text:"text-pink-600",light:"bg-pink-50"},{name:"indigo",color:"bg-indigo-600",text:"text-indigo-600",light:"bg-indigo-50"},{name:"cyan",color:"bg-cyan-600",text:"text-cyan-600",light:"bg-cyan-50"}],ju=s=>s.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()),mi=()=>v.jsx("style",{children:`
    :root {
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
      line-height: 1.5;
      font-weight: 400;
      color-scheme: light;
      font-synthesis: none;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background-color: #f9fafb !important; /* bg-gray-50 */
      color: #111827; /* text-gray-900 */
    }
    body {
      margin: 0 !important;
      padding: 0 !important;
      display: block !important;
      place-items: unset !important;
      min-width: unset !important;
      min-height: 100vh !important;
      width: 100% !important;
      background-color: #f9fafb !important;
    }
    #root {
      max-width: none !important;
      margin: 0 !important;
      padding: 0 !important;
      text-align: left !important;
      width: 100% !important;
      min-height: 100vh;
      display: block !important;
    }
  `});function CA({listId:s,listName:e,onBack:t,currentUser:i}){const[o,u]=he.useState([]),[h,m]=he.useState(!0),[g,w]=he.useState(""),[T,k]=he.useState("normal"),[b,U]=he.useState(!1),[q,H]=he.useState(null),[$,de]=he.useState(null),[ne,me]=he.useState("priority"),[oe,we]=he.useState(""),[ge,R]=he.useState(""),[x,A]=he.useState([]);he.useEffect(()=>{const W=xo(Qt(s)),Y=Vo(W,B=>{const re=B.docs.map(_e=>({id:_e.id,..._e.data()})),ve={high:3,normal:2,low:1};re.sort((_e,ke)=>{if(_e.completed===ke.completed){if(_e.completed)return 0;const be=ve[_e.priority]||2;return(ve[ke.priority]||2)-be}return _e.completed?1:-1}),u(re),m(!1)}),L=Vo(mt(on(Jt),s),B=>{B.exists()&&A(B.data().sharedWith||[])});return()=>{Y(),L()}},[s]);const P=he.useMemo(()=>{const W=o.filter(re=>!re.completed),Y=o.filter(re=>re.completed),L={high:3,normal:2,low:1};let B=[...W];return ne==="priority"?B.sort((re,ve)=>{const _e=L[re.priority]||2;return(L[ve.priority]||2)-_e}):ne==="date-new"?B.sort((re,ve)=>(ve.createdAt?.seconds||0)-(re.createdAt?.seconds||0)):ne==="date-old"&&B.sort((re,ve)=>(re.createdAt?.seconds||0)-(ve.createdAt?.seconds||0)),[...B,...Y]},[o,ne]),V=async W=>{if(W.preventDefault(),!!g.trim())try{await hc(Qt(s),{name:g.trim(),completed:!1,priority:T,addedBy:i.displayName||i.email.split("@")[0],notes:"",createdAt:pi()}),w(""),k("normal"),On(s)}catch(Y){console.error("Error adding task:",Y)}},C=async W=>{try{await In(mt(Qt(s),W.id),{completed:!W.completed}),On(s)}catch(Y){console.error(Y)}},I=async W=>{try{await Ha(mt(Qt(s),W)),H(null),On(s)}catch(Y){console.error(Y)}},Pe=async(W,Y)=>{try{await In(mt(Qt(s),W),{notes:Y})}catch(L){console.error(L)}},Oe=async()=>{const W=o.filter(Y=>Y.completed);try{await Promise.all(W.map(Y=>In(mt(Qt(s),Y.id),{completed:!1}))),On(s)}catch(Y){console.error("Error resetting tasks:",Y)}},it=async W=>{if(W.preventDefault(),!!oe.trim())try{await In(mt(on(Jt),s),{sharedWith:dc(oe.trim())}),R("success"),we(""),setTimeout(()=>R(""),3e3)}catch(Y){console.error(Y),R("error")}},Me=()=>`${window.location.origin}${window.location.pathname}?listId=${s}`,ee=()=>{const W=Me();navigator.clipboard.writeText(W).then(()=>{R("link-copied"),setTimeout(()=>R(""),3e3)})};return v.jsxs("div",{className:"space-y-6 w-full max-w-5xl mx-auto",children:[v.jsx(mi,{}),v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between sticky top-16 z-10",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition",children:v.jsx(Yf,{className:"w-5 h-5 text-gray-600"})}),v.jsx("div",{children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Qd,{className:"w-5 h-5 text-blue-600"}),v.jsx("h2",{className:"text-xl font-bold text-gray-800 truncate max-w-[200px]",children:e})]})})]}),v.jsx("button",{onClick:()=>U(!0),className:"p-2 bg-blue-50 text-blue-700 rounded-full hover:bg-blue-100 transition",children:v.jsx(Zf,{className:"w-5 h-5"})})]}),b&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl relative",children:[v.jsx("button",{onClick:()=>U(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:""}),v.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-800",children:[v.jsx(Ga,{className:"w-5 h-5"})," ",v.jsx("h3",{className:"font-bold text-lg",children:"Share List"})]}),v.jsxs("form",{onSubmit:it,className:"flex gap-2 mb-4",children:[v.jsx("input",{type:"email",value:oe,onChange:W=>we(W.target.value),placeholder:"friend@email.com",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition",children:"Add"})]}),ge==="success"&&v.jsxs("p",{className:"text-green-600 text-sm mb-2 flex items-center gap-1",children:[v.jsx(Lo,{className:"w-4 h-4"})," User added."]}),ge==="link-copied"&&v.jsxs("p",{className:"text-blue-600 text-sm mb-2 flex items-center gap-1",children:[v.jsx(Lo,{className:"w-4 h-4"})," Link copied."]}),v.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:[v.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Invitation Link"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{readOnly:!0,value:Me(),className:"flex-1 text-xs bg-white border px-2 py-1 rounded text-gray-600 truncate"}),v.jsx("button",{type:"button",onClick:ee,className:"p-1.5 bg-white border rounded hover:bg-gray-100",children:v.jsx(Xf,{className:"w-4 h-4 text-gray-600"})})]})]}),x.length>0&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Shared with:"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(W=>v.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-full border border-blue-100",children:W},W))})]})]})}),v.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:v.jsxs("form",{onSubmit:V,className:"flex flex-col md:flex-row gap-4",children:[v.jsx("div",{className:"flex-1 relative",children:v.jsx("input",{type:"text",value:g,onChange:W=>w(W.target.value),placeholder:"Add a new task...",className:"w-full pl-4 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none font-medium"})}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("select",{value:T,onChange:W=>k(W.target.value),className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none text-sm font-bold text-gray-600 cursor-pointer appearance-none",children:[v.jsx("option",{value:"low",children:"Low Priority"}),v.jsx("option",{value:"normal",children:"Normal"}),v.jsx("option",{value:"high",children:"High Priority"})]}),v.jsxs("button",{type:"submit",disabled:!g.trim(),className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2",children:[v.jsx(xs,{className:"w-5 h-5"})," Add"]})]})]})}),v.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Sort by:"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:()=>me("priority"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition flex items-center gap-1 ${ne==="priority"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[v.jsx(TA,{className:"w-3 h-3"})," Priority"]}),v.jsxs("button",{onClick:()=>me("date-new"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition flex items-center gap-1 ${ne==="date-new"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[v.jsx(vA,{className:"w-3 h-3"})," Newest"]}),v.jsxs("button",{onClick:()=>me("date-old"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition flex items-center gap-1 ${ne==="date-old"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[v.jsx(_A,{className:"w-3 h-3"})," Oldest"]})]})]})}),v.jsxs("div",{className:"space-y-3",children:[P.filter(W=>!W.completed).map(W=>{const Y=W.createdAt?.seconds?new Date(W.createdAt.seconds*1e3):null,L=B=>{if(!B)return"";const ve=new Date-B,_e=Math.floor(ve/6e4),ke=Math.floor(ve/36e5),be=Math.floor(ve/864e5);return _e<1?"just now":_e<60?`${_e}m ago`:ke<24?`${ke}h ago`:be===1?"yesterday":be<7?`${be}d ago`:B.toLocaleDateString()};return v.jsxs("div",{className:`bg-white rounded-xl shadow-sm border border-gray-100 group hover:border-blue-200 transition overflow-hidden ${$===W.id?"ring-2 ring-blue-500 ring-offset-2":""}`,children:[v.jsxs("div",{className:"p-4 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[v.jsx("button",{onClick:()=>C(W),className:"p-1 rounded text-gray-300 hover:text-blue-500 hover:bg-blue-50 transition",children:v.jsx(SA,{className:"w-6 h-6"})}),v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsx("p",{className:"font-medium text-gray-800 truncate",children:W.name}),v.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[W.priority==="high"&&v.jsx("span",{className:"text-[10px] uppercase font-bold text-red-600 bg-red-50 px-1.5 py-0.5 rounded",children:"High"}),W.priority==="low"&&v.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 bg-gray-100 px-1.5 py-0.5 rounded",children:"Low"}),v.jsxs("span",{className:"text-xs text-gray-400",children:["Added by ",W.addedBy]}),Y&&v.jsxs("span",{className:"text-xs text-gray-400",children:[" ",L(Y)]}),W.notes&&!$&&v.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded flex items-center gap-0.5",children:[v.jsx(by,{className:"w-3 h-3"})," Notes"]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("button",{onClick:()=>de(B=>B===W.id?null:W.id),className:`p-2 rounded-full transition ${$===W.id?"bg-blue-100 text-blue-600":"text-gray-300 hover:text-blue-500 hover:bg-blue-50"}`,children:v.jsx(by,{className:"w-4 h-4"})}),v.jsx("button",{onClick:()=>H(W),className:"p-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition",children:v.jsx(Io,{className:"w-4 h-4"})})]})]}),$===W.id&&v.jsx("div",{className:"px-4 pb-4 animate-in slide-in-from-top-2",children:v.jsx("textarea",{defaultValue:W.notes||"",onBlur:B=>Pe(W.id,B.target.value),placeholder:"Add notes, details, or subtasks...",className:"w-full bg-gray-50 p-3 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-0 text-sm min-h-[80px] text-gray-700 placeholder-gray-400",autoFocus:!0})})]},W.id)}),o.length===0&&!h&&v.jsx("div",{className:"text-center py-10 text-gray-400 italic",children:"No pending tasks. Great job!"})]}),o.some(W=>W.completed)&&v.jsxs("div",{className:"pt-8 opacity-75",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase flex items-center gap-2 tracking-wider",children:[v.jsx(EA,{className:"w-4 h-4"})," Completed"]}),v.jsxs("button",{onClick:Oe,className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg text-xs font-bold transition flex items-center gap-1",title:"Reset all completed tasks",children:[v.jsx(Jf,{className:"w-3 h-3"})," Reset All"]})]}),v.jsx("div",{className:"space-y-2",children:o.filter(W=>W.completed).map(W=>v.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-transparent flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:()=>C(W),className:"p-1 rounded text-green-500",children:v.jsx(Qd,{className:"w-6 h-6"})}),v.jsx("p",{className:"font-medium text-gray-500 line-through decoration-gray-400",children:W.name})]}),v.jsx("button",{onClick:()=>H(W),className:"p-2 text-gray-300 hover:text-red-500 transition",children:v.jsx(Io,{className:"w-4 h-4"})})]},W.id))})]}),q&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl",children:[v.jsx("h3",{className:"font-bold mb-2",children:"Delete Task?"}),v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['"',q.name,'" will be permanently removed.']}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{onClick:()=>H(null),className:"text-gray-600",children:"Cancel"}),v.jsx("button",{onClick:()=>I(q.id),className:"bg-red-600 text-white px-4 py-2 rounded-lg font-bold",children:"Delete"})]})]})})]})}const On=async s=>{try{await In(mt(on(Jt),s),{updatedAt:pi()})}catch(e){console.error("Error updating list timestamp:",e)}};function RA({listId:s,listName:e,onBack:t,currentUser:i}){const[o,u]=he.useState([]),[h,m]=he.useState([]),[g,w]=he.useState(!0),[T,k]=he.useState(null),[b,U]=he.useState(!1),[q,H]=he.useState(null),[$,de]=he.useState(null),[ne,me]=he.useState(""),[oe,we]=he.useState(1),[ge,R]=he.useState(""),[x,A]=he.useState(!1),[P,V]=he.useState(""),[C,I]=he.useState(""),[Pe,Oe]=he.useState(""),[it,Me]=he.useState([]),[ee,W]=he.useState([]),[Y,L]=he.useState(!1);he.useEffect(()=>{const se=xo(Qt(s)),Ee=Vo(se,Xe=>{const Je=Xe.docs.map(ue=>({id:ue.id,...ue.data()}));Je.sort((ue,ot)=>(ot.createdAt?.seconds||0)-(ue.createdAt?.seconds||0)),u(Je),w(!1)}),De=Vo(mt(on(Jt),s),Xe=>{if(Xe.exists()){const Je=Xe.data();Me(Je.sharedWith||[]);const ue=Je.supermarkets||[];m(ue),ue.length>0?R(ot=>ue.some(Nt=>Nt.name===ot)?ot:ue[0].name):R("")}});return()=>{Ee(),De()}},[s]);const B=he.useMemo(()=>h.filter(Ee=>o.some(De=>De.supermarket===Ee.name)).sort((Ee,De)=>{const Xe=o.filter(Ze=>Ze.supermarket===Ee.name),Je=o.filter(Ze=>Ze.supermarket===De.name),ue=Math.max(...Xe.map(Ze=>Ze.createdAt?.seconds||0));return Math.max(...Je.map(Ze=>Ze.createdAt?.seconds||0))-ue}),[o,h]),re=async()=>{if(!ge){console.error("Please select a Shop/Location first.");return}L(!0),W([]);const se="You are a creative assistant specialized in list building. Your task is to suggest 5 practical and useful items to add to the shopping list based on the list's context and the current shop/location. Provide the items as a numbered list, one item per line, without extra dialogue or introduction.",Ee=`The list is named "${e}" and the current shop/location is "${ge}". Suggest 5 items that could be needed.`,Xe="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=",Je={contents:[{parts:[{text:Ee}]}],systemInstruction:{parts:[{text:se}]}};let ue=0;const ot=3;for(;ue<ot;)try{const Ze=await fetch(Xe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)});if(!Ze.ok)throw new Error(`API returned status ${Ze.status}`);const ft=(await Ze.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(ft){const en=ft.split(`
`).map(ut=>ut.replace(/^\s*\d+\.\s*/,"").trim()).filter(ut=>ut.length>0).slice(0,5);W(en);break}}catch(Ze){console.error(`Attempt ${ue+1} failed:`,Ze),ue++,ue<ot&&await new Promise(Nt=>setTimeout(Nt,Math.pow(2,ue)*1e3))}L(!1)},ve=async(se,Ee,De)=>{const Xe=Ee+De;Xe<1?await Ha(mt(Qt(s),se)):await In(mt(Qt(s),se),{quantity:Xe}),await On(s)},_e=se=>{const Ee=oe+se;Ee<1?(me(""),we(1)):we(Ee)},ke=async se=>{if(se&&se.preventDefault(),!P.trim())return;const Ee=ju(P.trim());if(h.some(ue=>ue.name===Ee)){console.error("Shop already exists.");return}const De=h.length%Oy.length,Je={...Oy[De],name:Ee};try{await In(mt(on(Jt),s),{supermarkets:dc(Je)}),await On(s),R(Je.name),V(""),A(!1)}catch(ue){console.error(ue)}},be=async se=>{if(se.preventDefault(),!!ne.trim()){if(!ge){console.error("First add a Shop (e.g., Online Store, Local Market, Hardware Store...)");return}try{await hc(Qt(s),{name:ju(ne.trim()),quantity:oe,supermarket:ge,createdAt:pi(),addedBy:i.displayName||(i.email?i.email.split("@")[0]:i.uid),completed:!1}),await On(s),me(""),we(1)}catch(Ee){console.error(Ee)}}},Ue=async(se,Ee)=>{if(ge)try{await hc(Qt(s),{name:ju(se),quantity:1,supermarket:ge,createdAt:pi(),addedBy:i.displayName||(i.email?i.email.split("@")[0]:i.uid),completed:!1}),await On(s),W(De=>De.filter((Xe,Je)=>Je!==Ee))}catch(De){console.error("Error adding generated item:",De)}},Ge=async()=>{if(!q||q.type!=="clear")return;const se=q.name,Ee=o.filter(De=>De.supermarket===se);H(null),Ee.forEach(async De=>{await Ha(mt(Qt(s),De.id))}),Ee.length>0&&await On(s)},wt=async se=>{if(se.preventDefault(),!$||!$.newName.trim()){de(null);return}const Ee=$.oldName,De=ju($.newName.trim()),Xe=mt(on(Jt),s);if(h.some(ue=>ue.name===De&&ue.name!==Ee)){console.error("The new shop name already exists."),de(null);return}if(De===Ee){de(null);return}de(null);try{u(ft=>ft.map(en=>en.supermarket===Ee?{...en,supermarket:De}:en));const ue=xo(Qt(s),cc("supermarket","==",Ee)),Ze=(await Py(ue)).docs.map(ft=>In(mt(Qt(s),ft.id),{supermarket:De}));Promise.all(Ze).catch(ft=>{console.error("Error updating subcollection items in DB:",ft)});const Nt=h.map(ft=>ft.name===Ee?{...ft,name:De}:ft);await In(Xe,{supermarkets:Nt}),await On(s),m(Nt),ge===Ee&&R(De)}catch(ue){console.error("Error renaming shop and updating items:",ue)}},Fn=async()=>{if(!q||q.type!=="delete")return;const se=q.name,Ee=mt(on(Jt),s);H(null);try{const De=xo(Qt(s),cc("supermarket","==",se)),Je=(await Py(De)).docs.map(ot=>Ha(mt(Qt(s),ot.id)));await Promise.all(Je);const ue=h.filter(ot=>ot.name!==se);await In(Ee,{supermarkets:ue}),await On(s),m(ue),ge===se&&R(ue.length>0?ue[0].name:"")}catch(De){console.error("Error deleting shop and its items:",De)}},Xr=async se=>{if(se.preventDefault(),!!C.trim())try{await In(mt(on(Jt),s),{sharedWith:dc(C.toLowerCase().trim())}),await On(s),Oe("success"),setTimeout(()=>Oe(""),3e3),I("")}catch(Ee){console.error(Ee),Oe("error")}},Un=()=>`${window.location.origin}${window.location.pathname}?listId=${s}`,Ir=()=>{const se=Un(),Ee=document.createElement("textarea");Ee.value=se,Ee.style.position="fixed",Ee.style.left="-9999px",document.body.appendChild(Ee),Ee.select();try{document.execCommand("copy"),Oe("link-copied"),setTimeout(()=>Oe(""),2e3)}catch(De){console.error("Error copying using execCommand:",De),navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(se).then(()=>{Oe("link-copied"),setTimeout(()=>Oe(""),2e3)}).catch(Xe=>{console.error("Final clipboard copy failed:",Xe),Oe("error"),setTimeout(()=>Oe(""),4e3)}):(Oe("error"),setTimeout(()=>Oe(""),4e3))}finally{document.body.removeChild(Ee)}};return v.jsxs("div",{className:"space-y-6 w-full max-w-7xl mx-auto",children:[v.jsx(mi,{}),v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between sticky top-16 z-10",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition",title:"Go back home",children:v.jsx(Yf,{className:"w-5 h-5 text-gray-600"})}),v.jsx("h2",{className:"text-xl font-bold text-gray-800 truncate max-w-[200px]",children:e})]}),v.jsx("button",{onClick:()=>U(!0),className:"p-2 bg-green-50 text-green-700 rounded-full hover:bg-green-100 transition",title:"Share list",children:v.jsx(Zf,{className:"w-5 h-5"})})]}),b&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl relative",children:[v.jsx("button",{onClick:()=>U(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:""}),v.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-800",children:[v.jsx(Ga,{className:"w-5 h-5"})," ",v.jsx("h3",{className:"font-bold text-lg",children:"Share List"})]}),v.jsxs("form",{onSubmit:Xr,className:"flex gap-2 mb-4",children:[v.jsx("input",{type:"email",value:C,onChange:se=>I(se.target.value),placeholder:"friend@email.com",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"}),v.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition",children:"Add"})]}),Pe==="success"&&v.jsxs("p",{className:"text-green-600 text-sm mb-2 flex items-center gap-1",children:[v.jsx(Lo,{className:"w-4 h-4"})," User added."]}),Pe==="link-copied"&&v.jsxs("p",{className:"text-blue-600 text-sm mb-2 flex items-center gap-1",children:[v.jsx(Lo,{className:"w-4 h-4"})," Link copied to clipboard."]}),Pe==="error"&&v.jsxs("p",{className:"text-red-600 text-sm mb-2 flex items-center gap-1",children:[v.jsx(Gd,{className:"w-4 h-4"})," Copy failed. Please copy the URL manually."]}),v.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:[v.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Invitation Link"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{readOnly:!0,value:Un(),className:"flex-1 text-xs bg-white border px-2 py-1 rounded text-gray-600 truncate"}),v.jsx("button",{type:"button",onClick:Ir,className:"p-1.5 bg-white border rounded hover:bg-gray-100",title:"Copy",children:v.jsx(Xf,{className:"w-4 h-4 text-gray-600"})})]})]}),it.length>0&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Shared with:"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:it.map(se=>v.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-full border border-blue-100",children:se},se))})]})]})}),q&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx(Gd,{className:q.type==="delete"?"text-red-600":"text-yellow-600"}),v.jsx("h3",{className:"font-bold",children:q.type==="delete"?`Delete ${q.name} shop?`:`Clear ${q.name} shop?`})]}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:q.type==="delete"?`This action will delete the shop from your list AND all ${o.filter(se=>se.supermarket===q.name).length} associated products.`:"This action will ONLY delete the products from this shop from the list."}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{onClick:()=>H(null),className:"px-4 py-2 text-gray-600",children:"Cancel"}),v.jsx("button",{onClick:q.type==="delete"?Fn:Ge,className:`px-4 py-2 rounded-lg font-bold ${q.type==="delete"?"bg-red-600 text-white":"bg-yellow-500 text-yellow-900"}`,children:q.type==="delete"?"Delete All":"Clear Products"})]})]})}),$&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl relative",children:[v.jsx("button",{onClick:()=>de(null),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:""}),v.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-800",children:[v.jsx(Oo,{className:"w-5 h-5"})," ",v.jsx("h3",{className:"font-bold text-lg",children:"Rename Shop"})]}),v.jsxs("form",{onSubmit:wt,className:"flex flex-col gap-4",children:[v.jsx("input",{type:"text",value:$.newName,onChange:se=>de({...$,newName:se.target.value}),placeholder:$.oldName,className:"px-4 py-2 border rounded-xl focus:ring-2 focus:ring-green-500 outline-none",autoFocus:!0}),v.jsx("button",{type:"submit",disabled:!$.newName.trim(),className:"bg-green-600 text-white px-4 py-2 rounded-xl font-bold hover:bg-green-700 transition disabled:opacity-50",children:"Rename"})]})]})}),v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 relative",children:[v.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[v.jsx(xs,{className:"text-green-600"})," Add Product"]}),v.jsxs("form",{onSubmit:be,className:"space-y-4",children:[v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("div",{className:"flex-1 relative",children:[v.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1",children:"Product"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"text",value:ne,autoComplete:"off",onChange:se=>me(se.target.value),placeholder:"What's missing?",className:"w-full pl-4 pr-10 py-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-green-500 outline-none text-gray-900"}),ne&&v.jsx("button",{type:"button",onClick:()=>me(""),className:"absolute right-3 top-3.5 text-gray-400 hover:text-gray-600 bg-transparent border-none hover:bg-transparent",children:v.jsx(Mu,{className:"w-5 h-5"})})]})]}),v.jsxs("div",{className:"w-48",children:[v.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1",children:"Quantity"}),v.jsxs("div",{className:"flex items-center gap-2 h-[48px]",children:[v.jsx("button",{type:"button",onClick:()=>_e(-1),className:`w-12 h-full flex items-center justify-center rounded-xl transition ${oe===1?"bg-red-50 text-red-500 hover:bg-red-100 border border-red-100":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200 border border-yellow-200"}`,children:oe===1?v.jsx(Io,{className:"w-5 h-5"}):v.jsx(Vy,{className:"w-5 h-5"})}),v.jsx("div",{className:"flex-1 h-full bg-gray-50 border border-gray-200 rounded-xl flex items-center justify-center font-bold text-gray-800 text-lg",children:oe}),v.jsx("button",{type:"button",onClick:()=>_e(1),className:"w-12 h-full bg-yellow-400 text-yellow-900 hover:bg-yellow-500 rounded-xl flex items-center justify-center transition shadow-sm font-bold",children:v.jsx(xs,{className:"w-5 h-5"})})]})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsxs("button",{type:"submit",disabled:!ne.trim()||h.length===0,className:"flex-1 h-12 bg-green-600 text-white font-bold px-6 rounded-xl shadow-lg hover:bg-green-700 transition active:scale-95 disabled:opacity-50 flex items-center justify-center gap-2",children:[v.jsx(xs,{className:"w-5 h-5"})," Add Product"]}),v.jsx("button",{type:"button",onClick:re,disabled:!ge||Y,title:"Generate Ideas ",className:"h-12 w-12 flex items-center justify-center bg-yellow-400 text-yellow-900 rounded-xl shadow-lg hover:bg-yellow-500 transition active:scale-95 disabled:opacity-50",children:Y?v.jsx(Jf,{className:"w-5 h-5 animate-spin"}):v.jsx(Ly,{className:"w-5 h-5"})})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between items-end mb-2",children:[v.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase ml-1",children:"Shop / Location"}),!x&&v.jsxs("button",{type:"button",onClick:()=>A(!0),className:"text-xs font-bold text-green-600 hover:text-green-700 flex items-center gap-1 bg-green-50 px-2 py-1 rounded-lg",children:[v.jsx(xs,{className:"w-3 h-3"})," New Shop"]})]}),x&&v.jsxs("div",{className:"mb-3 flex gap-2 animate-in slide-in-from-top-2 duration-200",children:[v.jsxs("div",{className:"flex-1 relative",children:[v.jsx("input",{type:"text",value:P,onChange:se=>V(se.target.value),onKeyDown:se=>{se.key==="Enter"&&(se.preventDefault(),ke())},autoComplete:"off",placeholder:"Shop Name (e.g., Online Store, Local Market, Hardware Store...)",className:"w-full pl-4 pr-10 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none text-gray-900 text-sm",autoFocus:!0}),P&&v.jsx("button",{type:"button",onClick:()=>V(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 bg-transparent border-none hover:bg-transparent",children:v.jsx(Mu,{className:"w-4 h-4"})})]}),v.jsx("button",{type:"button",onClick:ke,disabled:!P.trim(),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm font-bold hover:bg-green-700 disabled:opacity-50",children:"Add"}),v.jsx("button",{type:"button",onClick:()=>A(!1),className:"bg-gray-100 text-gray-500 px-2 rounded-lg hover:bg-gray-200",children:v.jsx(Mu,{className:"w-4 h-4"})})]}),h.length===0?v.jsx("div",{className:"text-sm text-gray-400 italic text-center border-2 border-dashed border-gray-100 rounded-lg p-3",children:"No shops. Create the first one!"}):v.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(se=>v.jsxs("div",{className:"relative group/super",children:[v.jsx("button",{type:"button",onClick:()=>R(se.name),className:`min-w-[100px] py-2 px-3 pr-16 rounded-lg text-sm font-medium border transition-all relative z-10 
                                ${ge===se.name?`${se.color} text-white shadow-md transform scale-105`:"bg-white text-gray-600 hover:bg-gray-50"}
                                `,children:se.name}),v.jsxs("div",{className:"absolute right-0 top-0 h-full flex items-center p-1 z-20 transition-opacity",children:[v.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),de({oldName:se.name,newName:se.name})},title:"Rename",className:`p-1 rounded-full text-xs transition z-30 opacity-75 hover:opacity-100 
                                    ${ge===se.name?"bg-white/20 text-white hover:bg-white/40":"bg-gray-100 text-gray-600 hover:bg-gray-200"}
                                    `,children:v.jsx(Oo,{className:"w-3 h-3"})}),v.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),H({name:se.name,type:"delete"})},title:"Delete Shop",className:`p-1 rounded-full text-xs transition z-30 opacity-75 hover:opacity-100 
                                    ${ge===se.name?"bg-red-500/50 text-white hover:bg-red-600/70":"bg-red-100 text-red-600 hover:bg-red-200"}
                                    `,children:v.jsx(Mu,{className:"w-3 h-3"})})]})]},se.name))})]})]})]}),ee.length>0&&v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[v.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-700",children:[v.jsx(Ly,{className:"text-yellow-600"})," Quick Ideas from Gemini"]}),v.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map((se,Ee)=>v.jsxs("div",{className:"bg-yellow-50 text-yellow-800 text-sm font-medium px-3 py-1.5 rounded-full border border-yellow-200 flex items-center gap-2",children:[v.jsx("span",{children:se}),v.jsx("button",{onClick:()=>Ue(se,Ee),title:`Add ${se}`,className:"text-green-600 hover:text-green-700 p-1 rounded-full bg-white transition",children:v.jsx(xs,{className:"w-3 h-3"})})]},Ee))})]}),g?v.jsx("div",{className:"text-center py-10 text-gray-400 animate-pulse",children:"Loading..."}):o.length===0?v.jsxs("div",{className:"text-center py-16 bg-white rounded-3xl border border-dashed border-gray-300",children:[v.jsx(AA,{className:"w-16 h-16 text-gray-200 mx-auto mb-4"}),v.jsx("h3",{className:"text-lg font-medium text-gray-600",children:"Empty List"}),v.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Add shops and products to start."})]}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 items-start",children:B.map(se=>{const Ee=o.filter(ue=>ue.supermarket===se.name),De=Math.max(...Ee.map(ue=>ue.createdAt?.seconds||0)),Xe=De?new Date(De*1e3):null,Je=ue=>{if(!ue)return"";const Ze=new Date-ue,Nt=Math.floor(Ze/6e4),ft=Math.floor(Ze/36e5),en=Math.floor(Ze/864e5);return Nt<1?"just now":Nt<60?`${Nt}m ago`:ft<24?`${ft}h ago`:en===1?"yesterday":en<7?`${en}d ago`:ue.toLocaleDateString()};return v.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col",children:[v.jsxs("div",{className:`${se.light} p-3 border-b border-gray-100 flex justify-between items-center`,children:[v.jsxs("div",{children:[v.jsx("h3",{className:`font-bold ${se.text} text-sm uppercase tracking-wider`,children:se.name}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[v.jsxs("span",{children:[Ee.length," items"]}),Xe&&v.jsxs(v.Fragment,{children:[v.jsx("span",{children:""}),v.jsx("span",{children:Je(Xe)})]})]})]}),v.jsx("div",{className:"flex items-center gap-1",children:v.jsx("button",{onClick:()=>H({name:se.name,type:"clear"}),title:"Clear (Delete products)",className:"p-1.5 bg-white rounded-full text-gray-400 hover:text-red-500 shadow-sm transition",children:v.jsx(Io,{className:"w-3.5 h-3.5"})})})]}),v.jsx("div",{className:"p-2 space-y-2",children:Ee.map(ue=>v.jsxs("div",{className:"flex justify-between items-center bg-white border border-gray-100 p-2 rounded-lg shadow-sm hover:shadow-md transition",children:[v.jsxs("div",{className:"min-w-0 flex-1 pr-2",children:[v.jsx("span",{className:"font-bold text-gray-900 block truncate leading-tight",title:ue.name,"data-completed":ue.completed,children:ue.name}),v.jsx("span",{className:"text-xs text-gray-400",children:ue.addedBy?`by ${ue.addedBy}`:""})]}),v.jsxs("div",{className:"flex items-center gap-1.5",children:[v.jsx("button",{onClick:()=>ve(ue.id,ue.quantity,-1),className:`w-8 h-8 flex items-center justify-center rounded-full transition ${ue.quantity===1?"bg-white border border-gray-200 text-gray-400 hover:text-red-500 hover:border-red-200":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:ue.quantity===1?v.jsx(Io,{className:"w-4 h-4"}):v.jsx(Vy,{className:"w-4 h-4"})}),v.jsx("span",{className:"w-6 text-center font-bold text-gray-800 text-sm",children:ue.quantity}),v.jsx("button",{onClick:()=>ve(ue.id,ue.quantity,1),className:"w-8 h-8 bg-yellow-400 text-yellow-900 hover:bg-yellow-500 rounded-full flex items-center justify-center transition shadow-sm",children:v.jsx(xs,{className:"w-4 h-4"})})]})]},ue.id))})]},se.name)})})]})}function NA({currentUser:s,onBack:e}){const[t,i]=he.useState("main"),[o,u]=he.useState(s.displayName||""),[h,m]=he.useState(s.photoURL||""),[g,w]=he.useState(""),[T,k]=he.useState(""),[b,U]=he.useState(""),[q,H]=he.useState({type:"",msg:""}),$=lw.useRef(null),de=async oe=>{oe.preventDefault();try{o.trim()!==s.displayName&&(await Nd(s,{displayName:o.trim()}),H({type:"success",msg:"Profile updated."}))}catch(we){console.error(we),H({type:"error",msg:"Error updating name."})}setTimeout(()=>H({type:"",msg:""}),3e3)},ne=oe=>{const we=oe.target.files[0];if(!we)return;const ge=new FileReader;ge.onloadend=async()=>{const R=ge.result;try{await Nd(s,{photoURL:R}),m(R),H({type:"success",msg:"Avatar updated."}),setTimeout(()=>H({type:"",msg:""}),3e3)}catch(x){console.error("Error updating avatar:",x),H({type:"error",msg:"Error updating avatar."})}},ge.readAsDataURL(we)},me=async oe=>{if(oe.preventDefault(),T.length<6){H({type:"error",msg:"New password must be at least 6 chars."});return}if(T!==b){H({type:"error",msg:"New passwords do not match."});return}try{const we=Ti.credential(s.email,g);await WT(s,we),await XT(s,T),H({type:"success",msg:"Password updated successfully."}),w(""),k(""),U(""),setTimeout(()=>i("main"),1500)}catch(we){console.error(we),we.code==="auth/wrong-password"?H({type:"error",msg:"Incorrect current password."}):H({type:"error",msg:"Error updating password. Try re-login."})}};return v.jsxs("div",{className:"space-y-6 w-full max-w-2xl mx-auto",children:[v.jsx(mi,{}),v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center gap-3 sticky top-16 z-10",children:[v.jsx("button",{onClick:()=>t==="password"?i("main"):e(),className:"p-2 hover:bg-gray-100 rounded-full transition",children:v.jsx(Yf,{className:"w-5 h-5 text-gray-600"})}),v.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t==="password"?"Change Password":"My Profile"})]}),v.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 md:p-8",children:t==="main"?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex flex-col items-center mb-8",children:[v.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>$.current?.click(),children:[v.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-100 overflow-hidden border-4 border-white shadow-md",children:h?v.jsx("img",{src:h,alt:"Avatar",className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center bg-green-100 text-green-600",children:v.jsx(X_,{className:"w-12 h-12"})})}),v.jsx("div",{className:"absolute inset-0 bg-white/80 rounded-full opacity-0 group-hover:opacity-100 flex items-center justify-center transition",children:v.jsx(wA,{className:"w-8 h-8 text-gray-700"})}),v.jsx("input",{type:"file",ref:$,onChange:ne,accept:"image/*",className:"hidden"})]}),v.jsxs("div",{className:"mt-4 text-center w-full",children:[v.jsxs("form",{onSubmit:de,className:"flex items-center justify-center gap-2",children:[v.jsx("input",{type:"text",value:o,onChange:oe=>u(oe.target.value),className:"text-xl font-bold text-gray-800 text-center bg-transparent border-b border-transparent hover:border-gray-300 focus:border-green-500 outline-none transition max-w-[250px]",placeholder:"Your Name"}),v.jsx("button",{type:"button",onClick:de,className:"text-gray-400 hover:text-green-600 transition",title:"Save Name",children:v.jsx(Oo,{className:"w-4 h-4"})})]}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.email})]})]}),q.msg&&v.jsx("div",{className:`p-4 rounded-xl mb-6 text-sm font-medium text-center animate-in fade-in zoom-in duration-300 ${q.type==="success"?"bg-green-50 text-green-600":"bg-red-50 text-red-600"}`,children:q.msg}),v.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[v.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Settings"}),v.jsxs("button",{onClick:()=>{H({type:"",msg:""}),i("password")},className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition group",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm text-gray-500 group-hover:text-gray-900",children:v.jsx(Yd,{className:"w-5 h-5"})}),v.jsxs("div",{className:"text-left",children:[v.jsx("p",{className:"font-medium text-gray-900",children:"Change Password"}),v.jsx("p",{className:"text-xs text-gray-500",children:"Update your security credentials"})]})]}),v.jsx("div",{className:"text-gray-300 group-hover:text-gray-600",children:v.jsx(Oo,{className:"w-4 h-4"})})]})]})]}):v.jsxs("form",{onSubmit:me,className:"space-y-5 animate-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("div",{className:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-3",children:v.jsx(Yd,{className:"w-8 h-8"})}),v.jsx("p",{className:"text-sm text-gray-500 max-w-xs mx-auto",children:"For security, please enter your current password before setting a new one."})]}),q.msg&&v.jsx("div",{className:`p-3 rounded-xl text-sm font-medium text-center ${q.type==="success"?"bg-green-50 text-green-600":"bg-red-50 text-red-600"}`,children:q.msg}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1",children:"Current Password"}),v.jsx("input",{type:"password",value:g,onChange:oe=>w(oe.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition",placeholder:"******"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1",children:"New Password"}),v.jsx("input",{type:"password",value:T,onChange:oe=>k(oe.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition",placeholder:"******"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1",children:"Confirm"}),v.jsx("input",{type:"password",value:b,onChange:oe=>U(oe.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition",placeholder:"******"})]})]}),v.jsxs("div",{className:"pt-4 flex gap-3",children:[v.jsx("button",{type:"button",onClick:()=>i("main"),className:"flex-1 px-4 py-3 text-gray-600 font-bold hover:bg-gray-100 rounded-xl transition",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!g||!T,className:"flex-1 bg-blue-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-blue-700 transition disabled:opacity-50",children:"Update"})]})]})})]})}function PA({currentUser:s,onSelectList:e}){const[t,i]=he.useState([]),[o,u]=he.useState(""),[h,m]=he.useState("shopping"),[g,w]=he.useState(!0),[T,k]=he.useState(null),[b,U]=he.useState(null),[q,H]=he.useState(""),[$,de]=he.useState(null),[ne,me]=he.useState(""),[oe,we]=he.useState("");he.useEffect(()=>{const C=s.email&&s.email.includes("@")?s.email:s.uid,I=xo(on(Jt),cc("owner","==",C)),Pe=xo(on(Jt),cc("sharedWith","array-contains",C));let Oe=[],it=[];const Me=Vo(I,Y=>{Oe=Y.docs.map(L=>({id:L.id,...L.data(),ownership:"mine"})),W()}),ee=Vo(Pe,Y=>{it=Y.docs.map(L=>({id:L.id,...L.data(),ownership:"shared"})),W()}),W=()=>{const L=[...Oe,...it].filter((B,re,ve)=>ve.findIndex(_e=>_e.id===B.id)===re);L.sort((B,re)=>{const ve=B.updatedAt||B.createdAt,_e=re.updatedAt||re.createdAt,ke=ve?.seconds||0;return(_e?.seconds||0)-ke}),i(L),w(!1)};return()=>{Me(),ee()}},[s]);const ge=async C=>{if(C.preventDefault(),!o.trim())return;const I=s.email&&s.email.includes("@")?s.email:s.uid;try{await hc(on(Jt),{name:o.trim(),owner:I,type:h,sharedWith:[],supermarkets:[],createdAt:pi(),updatedAt:pi()}),u(""),m("shopping")}catch(Pe){console.error("Error creating list:",Pe)}},R=async C=>{await Ha(mt(on(Jt),C)),k(null)},x=async C=>{C.preventDefault();const I=q.trim();if(!I||!b){U(null),H("");return}try{await In(mt(on(Jt),b),{name:I,updatedAt:pi()}),U(null),H("")}catch(Pe){console.error(Pe)}},A=async C=>{if(C.preventDefault(),!(!ne.trim()||!$))try{await In(mt(on(Jt),$.id),{sharedWith:dc(ne.toLowerCase().trim())}),we("success"),me(""),setTimeout(()=>we(""),3e3)}catch(I){console.error(I),we("error")}},P=C=>`${window.location.origin}${window.location.pathname}?listId=${C}`,V=C=>{const I=P(C),Pe=document.createElement("textarea");Pe.value=I,Pe.style.position="fixed",Pe.style.left="-9999px",document.body.appendChild(Pe),Pe.select();try{document.execCommand("copy"),we("link-copied"),setTimeout(()=>we(""),2e3)}catch(Oe){console.error("Error copying:",Oe)}finally{document.body.removeChild(Pe)}};return v.jsxs("div",{className:"space-y-8 w-full max-w-7xl mx-auto",children:[v.jsx(mi,{}),T&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx(Gd,{className:"text-red-600"})," ",v.jsxs("h3",{className:"font-bold",children:["Delete '",T.name,"'?"]})]}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This action is permanent and will delete all its products."}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{onClick:C=>{C.stopPropagation(),k(null)},className:"px-4 py-2 text-gray-600",children:"Cancel"}),v.jsx("button",{onClick:C=>{C.stopPropagation(),R(T.id)},className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:"Delete"})]})]})}),b&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl relative",children:[v.jsx("button",{onClick:()=>U(null),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:""}),v.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-800",children:[v.jsx(Oo,{className:"w-5 h-5"})," ",v.jsx("h3",{className:"font-bold text-lg",children:"Rename List"})]}),v.jsxs("form",{onSubmit:x,className:"flex flex-col gap-4",children:[v.jsx("input",{type:"text",value:q,onChange:C=>H(C.target.value),placeholder:"New name",className:"px-4 py-2 border rounded-xl focus:ring-2 focus:ring-green-500 outline-none",autoFocus:!0}),v.jsx("button",{type:"submit",disabled:!q.trim(),className:"bg-blue-600 text-white px-4 py-2 rounded-xl font-bold hover:bg-blue-700 transition disabled:opacity-50",children:"Rename"})]})]})}),$&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl relative",children:[v.jsx("button",{onClick:()=>{de(null),we("")},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:""}),v.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-800",children:[v.jsx(Ga,{className:"w-5 h-5"})," ",v.jsx("h3",{className:"font-bold text-lg",children:"Share List"})]}),v.jsxs("form",{onSubmit:A,className:"flex gap-2 mb-4",children:[v.jsx("input",{type:"email",value:ne,onChange:C=>me(C.target.value),placeholder:"friend@email.com",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition",children:"Add"})]}),oe==="success"&&v.jsxs("p",{className:"text-green-600 text-sm mb-2 flex items-center gap-1",children:[v.jsx(Lo,{className:"w-4 h-4"})," User added."]}),oe==="link-copied"&&v.jsxs("p",{className:"text-blue-600 text-sm mb-2 flex items-center gap-1",children:[v.jsx(Lo,{className:"w-4 h-4"})," Link copied."]}),v.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:[v.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Invitation Link"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{readOnly:!0,value:P($.id),className:"flex-1 text-xs bg-white border px-2 py-1 rounded text-gray-600 truncate"}),v.jsx("button",{type:"button",onClick:()=>V($.id),className:"p-1.5 bg-white border rounded hover:bg-gray-100",children:v.jsx(Xf,{className:"w-4 h-4 text-gray-600"})})]})]}),$.sharedWith&&$.sharedWith.length>0&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Shared with:"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:$.sharedWith.map(C=>v.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-full border border-blue-100",children:C},C))})]})]})}),v.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[v.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[v.jsx(xs,{className:"text-green-600"})," New List"]}),v.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-3 p-1 bg-gray-100 rounded-xl",children:[v.jsxs("button",{type:"button",onClick:()=>m("shopping"),className:`flex items-center justify-center gap-2 py-2 rounded-lg font-bold transition ${h==="shopping"?"bg-white text-green-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[v.jsx(Ka,{className:"w-5 h-5"})," Shopping List"]}),v.jsxs("button",{type:"button",onClick:()=>m("todo"),className:`flex items-center justify-center gap-2 py-2 rounded-lg font-bold transition ${h==="todo"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[v.jsx(Dy,{className:"w-5 h-5"})," To-Do List"]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",value:o,onChange:C=>u(C.target.value),placeholder:h==="shopping"?"E.g., Groceries...":"E.g., Project Alpha...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none"}),v.jsx("button",{type:"submit",disabled:!o.trim(),className:`text-white font-bold px-6 py-3 rounded-xl transition disabled:opacity-50 ${h==="shopping"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:"Create"})]})]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"My Lists"}),g?v.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading lists..."}):t.length===0?v.jsx("div",{className:"text-center py-10 bg-white rounded-2xl border border-dashed border-gray-200",children:v.jsx("p",{className:"text-gray-400",children:"You don't have any lists created."})}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(C=>v.jsxs("div",{className:"relative w-full",children:[v.jsxs("button",{onClick:()=>e(C),className:`bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition text-left group relative overflow-hidden w-full ${C.type==="todo"?"hover:border-blue-200":"hover:border-green-200"}`,children:[v.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition",children:C.type==="todo"?v.jsx(Dy,{className:"w-16 h-16 text-blue-600 transform -rotate-12"}):v.jsx(Ka,{className:"w-16 h-16 text-green-600 transform rotate-12"})}),v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[C.type==="todo"?v.jsxs("span",{className:"bg-blue-100 text-blue-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase flex items-center gap-1",children:[v.jsx(Qd,{className:"w-3 h-3"})," To-Do"]}):v.jsxs("span",{className:"bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase flex items-center gap-1",children:[v.jsx(Ka,{className:"w-3 h-3"})," Shopping"]}),C.sharedWith&&C.sharedWith.length>0&&v.jsxs("span",{className:"bg-purple-100 text-purple-700 text-[10px] font-bold px-2 py-0.5 rounded uppercase flex items-center gap-1",children:[v.jsx(Ga,{className:"w-3 h-3"})," Shared"]})]}),v.jsx("h4",{className:"font-bold text-lg text-gray-800 mb-1 pr-16",children:C.name}),v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[C.ownership==="mine"?v.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:"Owner"}):v.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full flex items-center gap-1",children:[v.jsx(Ga,{className:"w-3 h-3"})," Shared"]}),C.updatedAt?v.jsxs("span",{className:"text-gray-400",children:[" Last updated: ",new Date(C.updatedAt?.seconds*1e3).toLocaleDateString()," ",new Date(C.updatedAt?.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):v.jsxs("span",{className:"text-gray-400",children:[" Created: ",C.createdAt?.toDate().toLocaleDateString()]})]})]}),C.ownership==="mine"&&v.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:[v.jsx("button",{onClick:I=>{I.stopPropagation(),de(C)},title:"Share",className:"p-2 bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200 transition",children:v.jsx(Zf,{className:"w-4 h-4"})}),v.jsx("button",{onClick:I=>{I.stopPropagation(),U(C.id),H(C.name)},title:"Rename",className:"p-2 bg-gray-100 text-gray-600 rounded-full hover:bg-gray-200 transition",children:v.jsx(Oo,{className:"w-4 h-4"})}),v.jsx("button",{onClick:I=>{I.stopPropagation(),k(C)},title:"Delete",className:"p-2 bg-red-100 text-red-600 rounded-full hover:bg-red-200 transition",children:v.jsx(Io,{className:"w-4 h-4"})})]})]},C.id))})]})]})}function bA(){const[s,e]=he.useState(null),[t,i]=he.useState(""),[o,u]=he.useState(""),[h,m]=he.useState(!1),[g,w]=he.useState(""),[T,k]=he.useState("home"),[b,U]=he.useState(null),[q,H]=he.useState(!1),$=async()=>{await nx(po),e(null),k("home"),U(null)};he.useEffect(()=>{let ne=null;return(async()=>{const oe=typeof __initial_auth_token<"u"?__initial_auth_token:null;try{oe?await KT(po,oe):await BT(po)}catch(we){console.error("Initial Canvas authentication failed:",we)}ne=tx(po,we=>{if(e(we),H(!0),we){const R=new URLSearchParams(window.location.search).get("listId");R&&mA(mt(on(Jt),R)).then(x=>{if(x.exists()){const A=x.data(),P=we.email&&we.email.includes("@")?we.email:we.uid,V=A.owner===P,C=A.sharedWith?.includes(P);if(V||C)U({id:x.id,...A}),k("list");else if(!V&&!C){console.error("You do not have permission. Request access from: "+we.email);try{window.history.replaceState({},document.title,window.location.pathname)}catch(I){console.warn("History modification blocked during deep link cleanup:",I.message)}}}})}})})(),()=>{ne&&ne()}},[]);const de=async ne=>{if(ne.preventDefault(),w(""),!t||!o){w("Please fill in all fields.");return}try{if(h){const me=await GT(po,t,o);await Nd(me.user,{displayName:t.split("@")[0]})}else await QT(po,t,o)}catch{w("Authentication error.")}};return q?s?v.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans pb-12 w-full",children:[v.jsx(mi,{}),v.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-20 w-full",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center w-full",children:[v.jsxs("div",{className:"flex items-center gap-2 text-green-700 cursor-pointer",onClick:()=>{k("home"),U(null)},children:[v.jsx(Ka,{className:"w-6 h-6"}),v.jsx("h1",{className:"text-lg font-bold hidden sm:block",children:"Super List"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("button",{onClick:()=>k("profile"),className:"flex items-center gap-2 bg-gray-100 rounded-full pl-1 pr-3 py-1 hover:bg-gray-200 transition",children:[s.photoURL?v.jsx("img",{src:s.photoURL,alt:"Avatar",className:"w-6 h-6 rounded-full object-cover"}):v.jsx(X_,{className:"w-6 h-6 text-gray-400"}),v.jsx("span",{className:"text-xs font-medium text-gray-700 max-w-[100px] truncate",children:s.displayName||s.email?.split("@")[0]})]}),v.jsx("button",{onClick:$,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition",children:v.jsx(xA,{className:"w-5 h-5"})})]})]})}),v.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6 w-full",children:T==="profile"?v.jsx(NA,{currentUser:s,onBack:()=>{k("home")}}):T==="home"?v.jsx(PA,{currentUser:s,onSelectList:ne=>{U(ne),k("list")}}):b&&b.type==="todo"?v.jsx(CA,{listId:b.id,listName:b.name,currentUser:s,onBack:()=>{k("home"),U(null);try{window.history.replaceState({},document.title,window.location.pathname)}catch{}}}):v.jsx(RA,{listId:b.id,listName:b.name,currentUser:s,onBack:()=>{k("home"),U(null);try{window.history.replaceState({},document.title,window.location.pathname)}catch(ne){console.warn("History modification blocked:",ne.message)}}})})]}):v.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4 font-sans w-full",children:[v.jsx(mi,{}),v.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl max-w-sm w-full text-center border border-gray-100",children:[v.jsx("div",{className:"bg-green-100 p-5 rounded-full mb-6 inline-block shadow-sm",children:v.jsx(Ka,{className:"w-10 h-10 text-green-600"})}),v.jsx("h1",{className:"text-3xl font-extrabold text-gray-800 mb-2",children:"Super List"}),v.jsx("p",{className:"text-gray-500 mb-6",children:h?"Create your account":"Log in"}),v.jsxs("form",{onSubmit:de,className:"space-y-4 text-left",children:[v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Email"}),v.jsxs("div",{className:"relative",children:[v.jsx(IA,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),v.jsx("input",{type:"email",value:t,onChange:ne=>i(ne.target.value),placeholder:"your@email.com",className:"w-full pl-10 pr-4 py-3 border rounded-xl outline-none",required:!0})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Password"}),v.jsxs("div",{className:"relative",children:[v.jsx(Yd,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),v.jsx("input",{type:"password",value:o,onChange:ne=>u(ne.target.value),placeholder:"******",className:"w-full pl-10 pr-4 py-3 border rounded-xl outline-none",required:!0})]})]}),g&&v.jsx("div",{className:"text-sm text-red-500 bg-red-50 p-2 rounded-lg text-center",children:g}),v.jsx("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition",children:h?"Register":"Log In"})]}),v.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 text-sm text-gray-500",children:[h?"Already have an account? ":"Don't have an account? ",v.jsx("button",{onClick:()=>{m(!h),w("")},className:"text-green-600 font-bold hover:underline",children:h?"Log In":"Register"})]})]})]}):v.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[v.jsx(mi,{}),v.jsxs("div",{className:"text-gray-500 flex items-center gap-2",children:[v.jsx(Jf,{className:"w-5 h-5 animate-spin"})," Loading application..."]})]})}pw.createRoot(document.getElementById("root")).render(v.jsx(he.StrictMode,{children:v.jsx(bA,{})}));
